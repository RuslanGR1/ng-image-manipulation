<div class="main-container">
  <div>
    <h2 class="title">Demo</h2>
    <p class="description">Image manipulation demo</p>

    <div class="file-wrapper">
      <span>Select Image</span>
      <input
        #imageInput
        type="file"
        accept="image/*"
        (change)="processFile(imageInput)"
        id="actual-btn"
        onclick="this.value=null;"
        hidden
      />
      <label class="upload-button btn btn-ml" for="actual-btn">Choose File</label>
    </div>

    <div class="availableImages">
      <img *ngFor="let image of imageUrls" [src]="image" alt="" />
    </div>
  </div>

  <div>
    <h3 class="preview">
      Page preview
      <button class="export-btn btn" (click)="exportImage()">Export result image</button>
    </h3>
    <div id="container"></div>
    <div class="bottom-line">
      <div class="actions">
        <h3 class="actions-title">Actions for selected Object:</h3>
        <div class="action action-priority">
          <p class="action-title">Layer Priority</p>
          <button
            (click)="handlePriorityChange(priorityAction.Increase)"
            class="btn"
            [disabled]="!isPriorityButtonActive(priorityAction.Increase)"
          >
            Increase Priority
          </button>
          <button
            (click)="handlePriorityChange(priorityAction.Decrease)"
            class="btn btn-second btn-ml"
            [disabled]="!isPriorityButtonActive(priorityAction.Decrease)"
          >
            Decrease Priority
          </button>
        </div>
        <div class="action action-opacity">
          <p class="action-title">Layer Opacity (0-1)</p>
          <div class="opacity-wrapper">
            <input
              [disabled]="!isOpacityButtonActive()"
              [(ngModel)]="opacityText"
              type="number"
              max="1"
              min="0"
              step="0.1"
              class="opacity-input default-input"
              name="opacity"
              id="opacity"
            />
            <button class="btn opacity-btn btn-ml" (click)="setOpacity()" [disabled]="!isOpacityButtonActive()">
              Apply
            </button>
          </div>
        </div>
        <div class="action scale-action">
          <p class="action-title">Image Scale</p>
          <input
            [disabled]="!isImageNodeSelected()"
            [(ngModel)]="imageScale"
            type="number"
            class="default-input opacity-input"
          />
          <button [disabled]="!isImageNodeSelected()" (click)="changeSelectedImageScale()" class="btn btn-ml">
            Apply
          </button>
        </div>
        <div class="action-toggle-resize d-flex align-center">
          <p>Object Resize State</p>
          <button
            (click)="toggleScale()"
            class="btn btn-ml resize-btn"
            [disabled]="!isDeleteButtonActive()"
            [ngClass]="{locked: !isResizeEnabled()}"
          >
            <p class="m-0" *ngIf="isResizeEnabled()">Unlocked</p>
            <p class="m-0" *ngIf="!isResizeEnabled()">Locked</p>
          </button>
        </div>
        <div class="action action-delete">
          <button [disabled]="!isDeleteButtonActive()" class="btn delete-btn" (click)="deleteSelectedObject()">
            Delete selected Object
          </button>
        </div>
      </div>
      <div class="actions-right">
        <div class="text-nots">
          <h3 class="actions-title">Addition text:</h3>
          <input [(ngModel)]="noteText" #ctrl="ngModel" class="default-input note-input" />
          <button (click)="addOrChangeText()" class="btn btn-ml text-add-button">
            <p *ngIf="isTextNodeSelected()">Change text</p>
            <p *ngIf="!isTextNodeSelected()">Add new text</p>
          </button>
        </div>
        <h3 class="canvas-title">Canvas Actions:</h3>
        <div class="canvas-action d-flex align-center">
          <p>Canvas Size</p>
          <p>Width <input [(ngModel)]="canvasWidth" type="text" class="default-input canvas-input" /></p>
          <p>Height <input [(ngModel)]="canvasHeight" type="number" class="default-input canvas-input" /></p>
          <button [disabled]="!isCanvasResizeButtonActive()" (click)="resizeCanvas()" class="btn">Apply</button>
        </div>
      </div>
    </div>
  </div>
</div>
