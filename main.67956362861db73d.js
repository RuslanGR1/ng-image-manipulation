"use strict";(self.webpackChunkimage_manipulation=self.webpackChunkimage_manipulation||[]).push([[179],{467:(pn,It,Ce)=>{function j(e){return"function"==typeof e}function $(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const te=$(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function de(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class we{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(j(r))try{r()}catch(s){t=s instanceof te?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{N(s)}catch(o){t=t??[],o instanceof te?t=[...t,...o.errors]:t.push(o)}}if(t)throw new te(t)}}add(t){var n;if(t&&t!==this)if(this.closed)N(t);else{if(t instanceof we){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&de(n,t)}remove(t){const{_finalizers:n}=this;n&&de(n,t),t instanceof we&&t._removeParent(this)}}we.EMPTY=(()=>{const e=new we;return e.closed=!0,e})();const y=we.EMPTY;function q(e){return e instanceof we||e&&"closed"in e&&j(e.remove)&&j(e.add)&&j(e.unsubscribe)}function N(e){j(e)?e():e.unsubscribe()}const ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ce={setTimeout(e,t,...n){const{delegate:r}=ce;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=ce;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Te(e){ce.setTimeout(()=>{const{onUnhandledError:t}=ie;if(!t)throw e;t(e)})}function ye(){}const Pe=Ne("C",void 0,void 0);function Ne(e,t,n){return{kind:e,value:t,error:n}}let Oe=null;function je(e){if(ie.useDeprecatedSynchronousErrorHandling){const t=!Oe;if(t&&(Oe={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Oe;if(Oe=null,n)throw r}}else e()}class S extends we{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,q(t)&&t.add(this)):this.destination=ne}static create(t,n,r){return new ue(t,n,r)}next(t){this.isStopped?V(function le(e){return Ne("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?V(function Je(e){return Ne("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?V(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const I=Function.prototype.bind;function k(e,t){return I.call(e,t)}class Z{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){pe(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){pe(r)}else pe(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){pe(n)}}}class ue extends S{constructor(t,n,r){let i;if(super(),j(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&ie.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&k(t.next,s),error:t.error&&k(t.error,s),complete:t.complete&&k(t.complete,s)}):i=t}this.destination=new Z(i)}}function pe(e){ie.useDeprecatedSynchronousErrorHandling?function x(e){ie.useDeprecatedSynchronousErrorHandling&&Oe&&(Oe.errorThrown=!0,Oe.error=e)}(e):Te(e)}function V(e,t){const{onStoppedNotification:n}=ie;n&&ce.setTimeout(()=>n(e,t))}const ne={closed:!0,next:ye,error:function Me(e){throw e},complete:ye},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function _t(e){return e}function T(e){return 0===e.length?_t:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let R=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function ge(e){return e&&e instanceof S||function G(e){return e&&j(e.next)&&j(e.error)&&j(e.complete)}(e)&&q(e)}(n)?n:new ue(n,r,i);return je(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=U(r))((i,s)=>{const o=new ue({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ae](){return this}pipe(...n){return T(n)(this)}toPromise(n){return new(n=U(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function U(e){var t;return null!==(t=e??ie.Promise)&&void 0!==t?t:Promise}const Ie=$(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ke=(()=>{class e extends R{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new gt(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ie}next(n){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){je(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?y:(this.currentObservers=null,s.push(n),new we(()=>{this.currentObservers=null,de(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new R;return n.source=this,n}}return e.create=(t,n)=>new gt(t,n),e})();class gt extends ke{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:y}}function Et(e){return j(e?.lift)}function ht(e){return t=>{if(Et(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function et(e,t,n,r,i){return new B(e,t,n,r,i)}class B extends S{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function W(e,t){return ht((n,r)=>{let i=0;n.subscribe(et(r,s=>{r.next(e.call(t,s,i++))}))})}function er(e){return this instanceof er?(this.v=e,this):new er(e)}function Vs(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Us(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(d){s({value:d,done:a})},o)}(a,u,(o=e[s](o)).done,o.value)})}}}const $s=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function xr(e){return j(e?.then)}function ua(e){return j(e[Ae])}function Qr(e){return Symbol.asyncIterator&&j(e?.[Symbol.asyncIterator])}function ca(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gs=function vu(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zs(e){return j(e?.[Gs])}function da(e){return function Hs(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(E){r[E]&&(i[E]=function(O){return new Promise(function(H,K){s.push([E,O,H,K])>1||a(E,O)})})}function a(E,O){try{!function u(E){E.value instanceof er?Promise.resolve(E.value.v).then(d,p):_(s[0][2],E)}(r[E](O))}catch(H){_(s[0][3],H)}}function d(E){a("next",E)}function p(E){a("throw",E)}function _(E,O){E(O),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield er(n.read());if(i)return yield er(void 0);yield yield er(r)}}finally{n.releaseLock()}})}function ha(e){return j(e?.getReader)}function On(e){if(e instanceof R)return e;if(null!=e){if(ua(e))return function yu(e){return new R(t=>{const n=e[Ae]();if(j(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if($s(e))return function fa(e){return new R(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(xr(e))return function pa(e){return new R(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Te)})}(e);if(Qr(e))return pi(e);if(zs(e))return function _u(e){return new R(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(ha(e))return function Du(e){return pi(da(e))}(e)}throw ca(e)}function pi(e){return new R(t=>{(function Cu(e,t){var n,r,i,s;return function Tr(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(p){try{d(r.next(p))}catch(_){o(_)}}function u(p){try{d(r.throw(p))}catch(_){o(_)}}function d(p){p.done?s(p.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(p.value).then(a,u)}d((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Vs(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function nr(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Lt(e,t,n=1/0){return j(t)?Lt((r,i)=>W((s,o)=>t(r,s,i,o))(On(e(r,i))),n):("number"==typeof t&&(n=t),ht((r,i)=>function ga(e,t,n,r,i,s,o,a){const u=[];let d=0,p=0,_=!1;const E=()=>{_&&!u.length&&!d&&t.complete()},O=K=>d<r?H(K):u.push(K),H=K=>{s&&t.next(K),d++;let Y=!1;On(n(K,p++)).subscribe(et(t,oe=>{i?.(oe),s?O(oe):t.next(oe)},()=>{Y=!0},void 0,()=>{if(Y)try{for(d--;u.length&&d<r;){const oe=u.shift();o?nr(t,o,()=>H(oe)):H(oe)}E()}catch(oe){t.error(oe)}}))};return e.subscribe(et(t,O,()=>{_=!0,E()})),()=>{a?.()}}(r,i,e,n)))}function Rr(e=1/0){return Lt(_t,e)}const zn=new R(e=>e.complete());function Ks(e){return e[e.length-1]}function gi(e){return function Ws(e){return e&&j(e.schedule)}(Ks(e))?e.pop():void 0}function ma(e,t=0){return ht((n,r)=>{n.subscribe(et(r,i=>nr(r,e,()=>r.next(i),t),()=>nr(r,e,()=>r.complete(),t),i=>nr(r,e,()=>r.error(i),t)))})}function Zs(e,t=0){return ht((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Da(e,t){if(!e)throw new Error("Iterable cannot be null");return new R(n=>{nr(n,t,()=>{const r=e[Symbol.asyncIterator]();nr(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function jt(e,t){return t?function Su(e,t){if(null!=e){if(ua(e))return function va(e,t){return On(e).pipe(Zs(t),ma(t))}(e,t);if($s(e))return function Bt(e,t){return new R(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(xr(e))return function ya(e,t){return On(e).pipe(Zs(t),ma(t))}(e,t);if(Qr(e))return Da(e,t);if(zs(e))return function _a(e,t){return new R(n=>{let r;return nr(n,t,()=>{r=e[Gs](),nr(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>j(r?.return)&&r.return()})}(e,t);if(ha(e))return function Ca(e,t){return Da(da(e),t)}(e,t)}throw ca(e)}(e,t):On(e)}function Jr(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new ue({next:()=>{r.unsubscribe(),e()}});return On(t(...n)).subscribe(r)}function Dt(e){for(let t in e)if(e[t]===Dt)return t;throw Error("Could not find renamed property on target object.")}function St(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(St).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ys(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Iu=Dt({__forward_ref__:Dt});function ct(e){return e.__forward_ref__=ct,e.toString=function(){return St(this())},e}function Ue(e){return Fn(e)?e():e}function Fn(e){return"function"==typeof e&&e.hasOwnProperty(Iu)&&e.__forward_ref__===ct}function Li(e){return e&&!!e.\u0275providers}const wa="https://g.co/ng/security#xss";class fe extends Error{constructor(t,n){super(Bi(t,n)),this.code=t}}function Bi(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function Ze(e){return"string"==typeof e?e:null==e?"":String(e)}function ji(e,t){throw new fe(-201,!1)}function bn(e,t){null==e&&function yt(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Ge(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function rr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Hi(e){return Ou(e,c)||Ou(e,f)}function Ou(e,t){return e.hasOwnProperty(t)?e[t]:null}function l(e){return e&&(e.hasOwnProperty(h)||e.hasOwnProperty(m))?e[h]:null}const c=Dt({\u0275prov:Dt}),h=Dt({\u0275inj:Dt}),f=Dt({ngInjectableDef:Dt}),m=Dt({ngInjectorDef:Dt});var g=(()=>((g=g||{})[g.Default=0]="Default",g[g.Host=1]="Host",g[g.Self=2]="Self",g[g.SkipSelf=4]="SkipSelf",g[g.Optional=8]="Optional",g))();let v;function C(e){const t=v;return v=e,t}function M(e,t,n){const r=Hi(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&g.Optional?null:void 0!==t?t:void ji(St(e))}const P=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),z={},ae="__NG_DI_FLAG__",re="ngTempTokenPath",se="ngTokenPath",he=/\n/gm,xe="\u0275",me="__source";let Re;function Se(e){const t=Re;return Re=e,t}function Le(e,t=g.Default){if(void 0===Re)throw new fe(-203,!1);return null===Re?M(e,void 0,t):Re.get(e,t&g.Optional?null:void 0,t)}function ee(e,t=g.Default){return(function D(){return v}()||Le)(Ue(e),t)}function ve(e,t=g.Default){return ee(e,Be(t))}function Be(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bt(e){const t=[];for(let n=0;n<e.length;n++){const r=Ue(e[n]);if(Array.isArray(r)){if(0===r.length)throw new fe(900,!1);let i,s=g.Default;for(let o=0;o<r.length;o++){const a=r[o],u=ft(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}t.push(ee(i,s))}else t.push(ee(r))}return t}function Zt(e,t){return e[ae]=t,e.prototype[ae]=t,e}function ft(e){return e[ae]}function Ht(e){return{toString:e}.toString()}var qe=(()=>((qe=qe||{})[qe.OnPush=0]="OnPush",qe[qe.Default=1]="Default",qe))(),pt=(()=>{return(e=pt||(pt={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",pt;var e})();const Pt={},it=[],Nn=Dt({\u0275cmp:Dt}),Nu=Dt({\u0275dir:Dt}),ku=Dt({\u0275pipe:Dt}),Mf=Dt({\u0275mod:Dt}),Pr=Dt({\u0275fac:Dt}),Qs=Dt({__NG_ELEMENT_ID__:Dt});let wD=0;function Vi(e){return Ht(()=>{const t=Af(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===qe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||pt.Emulated,id:"c"+wD++,styles:e.styles||it,_:null,schemas:e.schemas||null,tView:null};xf(n);const r=e.dependencies;return n.directiveDefs=ba(r,!1),n.pipeDefs=ba(r,!0),n})}function bD(e){return Ct(e)||ln(e)}function ED(e){return null!==e}function ei(e){return Ht(()=>({type:e.type,bootstrap:e.bootstrap||it,declarations:e.declarations||it,imports:e.imports||it,exports:e.exports||it,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Tf(e,t){if(null==e)return Pt;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function vn(e){return Ht(()=>{const t=Af(e);return xf(t),t})}function Ct(e){return e[Nn]||null}function ln(e){return e[Nu]||null}function In(e){return e[ku]||null}function kn(e,t){const n=e[Mf]||null;if(!n&&!0===t)throw new Error(`Type ${St(e)} does not have '\u0275mod' property.`);return n}function Af(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||it,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tf(e.inputs,t),outputs:Tf(e.outputs)}}function xf(e){e.features?.forEach(t=>t(e))}function ba(e,t){if(!e)return null;const n=t?In:bD;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(ED)}const Or=0,Ee=1,tt=2,Nt=3,ir=4,mi=5,un=6,Gi=7,Vt=8,Ea=9,Ia=10,st=11,Lu=12,Js=13,Rf=14,zi=15,cn=16,eo=17,Wi=18,mr=19,to=20,Pf=21,xt=22,Bu=1,Of=2,Ma=7,Ta=8,Ki=9,yn=10;function Ln(e){return Array.isArray(e)&&"object"==typeof e[Bu]}function sr(e){return Array.isArray(e)&&!0===e[Bu]}function ju(e){return 0!=(4&e.flags)}function no(e){return e.componentOffset>-1}function Aa(e){return 1==(1&e.flags)}function or(e){return!!e.template}function MD(e){return 0!=(256&e[tt])}function vi(e,t){return e.hasOwnProperty(Pr)?e[Pr]:null}class xD{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function yi(){return kf}function kf(e){return e.type.prototype.ngOnChanges&&(e.setInput=PD),RD}function RD(){const e=Bf(this),t=e?.current;if(t){const n=e.previous;if(n===Pt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function PD(e,t,n,r){const i=this.declaredInputs[n],s=Bf(e)||function OD(e,t){return e[Lf]=t}(e,{previous:Pt,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new xD(u&&u.currentValue,t,a===Pt),e[r]=t}yi.ngInherit=!0;const Lf="__ngSimpleChanges__";function Bf(e){return e[Lf]||null}const Wn=function(e,t,n){};function rn(e){for(;Array.isArray(e);)e=e[Or];return e}function Bn(e,t){return rn(t[e.index])}function Hf(e,t){return e.data[t]}function jn(e,t){const n=t[e];return Ln(n)?n:n[Or]}function Ra(e){return 64==(64&e[tt])}function ti(e,t){return null==t?null:e[t]}function Vf(e){e[Wi]=0}function Hu(e,t){e[mi]+=t;let n=e,r=e[Nt];for(;null!==r&&(1===t&&1===n[mi]||-1===t&&0===n[mi]);)r[mi]+=t,n=r,r=r[Nt]}const Ye={lFrame:Qf(null),bindingsEnabled:!0};function Gf(){return Ye.bindingsEnabled}function J(){return Ye.lFrame.lView}function dt(){return Ye.lFrame.tView}function qi(e){return Ye.lFrame.contextLView=e,e[Vt]}function Yi(e){return Ye.lFrame.contextLView=null,e}function sn(){let e=zf();for(;null!==e&&64===e.type;)e=e.parent;return e}function zf(){return Ye.lFrame.currentTNode}function vr(e,t){const n=Ye.lFrame;n.currentTNode=e,n.isParent=t}function Vu(){return Ye.lFrame.isParent}function WD(e,t){const n=Ye.lFrame;n.bindingIndex=n.bindingRootIndex=e,Gu(t)}function Gu(e){Ye.lFrame.currentDirectiveIndex=e}function qf(){return Ye.lFrame.currentQueryIndex}function Wu(e){Ye.lFrame.currentQueryIndex=e}function ZD(e){const t=e[Ee];return 2===t.type?t.declTNode:1===t.type?e[un]:null}function Yf(e,t,n){if(n&g.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&g.Host||(i=ZD(s),null===i||(s=s[zi],10&i.type))););if(null===i)return!1;t=i,e=s}const r=Ye.lFrame=Xf();return r.currentTNode=t,r.lView=e,!0}function Ku(e){const t=Xf(),n=e[Ee];Ye.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Xf(){const e=Ye.lFrame,t=null===e?null:e.child;return null===t?Qf(e):t}function Qf(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Jf(){const e=Ye.lFrame;return Ye.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ep=Jf;function Zu(){const e=Jf();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Dn(){return Ye.lFrame.selectedIndex}function _i(e){Ye.lFrame.selectedIndex=e}function Pa(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(e.contentHooks||(e.contentHooks=[])).push(-n,o),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),u&&(e.viewHooks||(e.viewHooks=[])).push(-n,u),d&&((e.viewHooks||(e.viewHooks=[])).push(n,d),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,d)),null!=p&&(e.destroyHooks||(e.destroyHooks=[])).push(n,p)}}function Oa(e,t,n){tp(e,t,3,n)}function Fa(e,t,n,r){(3&e[tt])===n&&tp(e,t,n,r)}function qu(e,t){let n=e[tt];(3&n)===t&&(n&=2047,n+=1,e[tt]=n)}function tp(e,t,n,r){const s=r??-1,o=t.length-1;let a=0;for(let u=void 0!==r?65535&e[Wi]:0;u<o;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[Wi]+=65536),(a<s||-1==s)&&(rC(e,n,t,u),e[Wi]=(4294901760&e[Wi])+u+2),u++}function rC(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[tt]>>11<e[Wi]>>16&&(3&e[tt])===t){e[tt]+=2048,Wn(4,a,s);try{s.call(a)}finally{Wn(5,a,s)}}}else{Wn(4,a,s);try{s.call(a)}finally{Wn(5,a,s)}}}const Qi=-1;class io{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Xu(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{const s=i,o=n[++r];rp(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function np(e){return 3===e||4===e||6===e}function rp(e){return 64===e.charCodeAt(0)}function so(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||ip(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function ip(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function sp(e){return e!==Qi}function Na(e){return 32767&e}function ka(e,t){let n=function aC(e){return e>>16}(e),r=t;for(;n>0;)r=r[zi],n--;return r}let Qu=!0;function La(e){const t=Qu;return Qu=e,t}const op=255,ap=5;let lC=0;const yr={};function Ba(e,t){const n=lp(e,t);if(-1!==n)return n;const r=t[Ee];r.firstCreatePass&&(e.injectorIndex=t.length,Ju(r.data,e),Ju(t,null),Ju(r.blueprint,null));const i=ec(e,t),s=e.injectorIndex;if(sp(i)){const o=Na(i),a=ka(i,t),u=a[Ee].data;for(let d=0;d<8;d++)t[s+d]=a[o+d]|u[o+d]}return t[s+8]=i,s}function Ju(e,t){e.push(0,0,0,0,0,0,0,0,t)}function lp(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function ec(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=mp(i),null===r)return Qi;if(n++,i=i[zi],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Qi}function tc(e,t,n){!function uC(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qs)&&(r=n[Qs]),null==r&&(r=n[Qs]=lC++);const i=r&op;t.data[e+(i>>ap)]|=1<<i}(e,t,n)}function up(e,t,n){if(n&g.Optional||void 0!==e)return e;ji()}function cp(e,t,n,r){if(n&g.Optional&&void 0===r&&(r=null),!(n&(g.Self|g.Host))){const i=e[Ea],s=C(void 0);try{return i?i.get(t,r,n&g.Optional):M(t,r,n&g.Optional)}finally{C(s)}}return up(r,0,n)}function dp(e,t,n,r=g.Default,i){if(null!==e){if(1024&t[tt]){const o=function pC(e,t,n,r,i){let s=e,o=t;for(;null!==s&&null!==o&&1024&o[tt]&&!(256&o[tt]);){const a=hp(s,o,n,r|g.Self,yr);if(a!==yr)return a;let u=s.parent;if(!u){const d=o[Pf];if(d){const p=d.get(n,yr,r);if(p!==yr)return p}u=mp(o),o=o[zi]}s=u}return i}(e,t,n,r,yr);if(o!==yr)return o}const s=hp(e,t,n,r,yr);if(s!==yr)return s}return cp(t,n,r,i)}function hp(e,t,n,r,i){const s=function hC(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Qs)?e[Qs]:void 0;return"number"==typeof t?t>=0?t&op:fC:t}(n);if("function"==typeof s){if(!Yf(t,e,r))return r&g.Host?up(i,0,r):cp(t,n,r,i);try{const o=s(r);if(null!=o||r&g.Optional)return o;ji()}finally{ep()}}else if("number"==typeof s){let o=null,a=lp(e,t),u=Qi,d=r&g.Host?t[cn][un]:null;for((-1===a||r&g.SkipSelf)&&(u=-1===a?ec(e,t):t[a+8],u!==Qi&&pp(r,!1)?(o=t[Ee],a=Na(u),t=ka(u,t)):a=-1);-1!==a;){const p=t[Ee];if(fp(s,a,p.data)){const _=dC(a,t,n,o,r,d);if(_!==yr)return _}u=t[a+8],u!==Qi&&pp(r,t[Ee].data[a+8]===d)&&fp(s,a,t)?(o=p,a=Na(u),t=ka(u,t)):a=-1}}return i}function dC(e,t,n,r,i,s){const o=t[Ee],a=o.data[e+8],p=ja(a,o,n,null==r?no(a)&&Qu:r!=o&&0!=(3&a.type),i&g.Host&&s===a);return null!==p?Di(t,o,p,a):yr}function ja(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,p=s>>20,E=i?a+p:e.directiveEnd;for(let O=r?a:a+p;O<E;O++){const H=o[O];if(O<u&&n===H||O>=u&&H.type===n)return O}if(i){const O=o[u];if(O&&or(O)&&O.type===n)return u}return null}function Di(e,t,n,r){let i=e[n];const s=t.data;if(function iC(e){return e instanceof io}(i)){const o=i;o.resolving&&function Mu(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new fe(-200,`Circular dependency in DI detected for ${e}${n}`)}(function vt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ze(e)}(s[n]));const a=La(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?C(o.injectImpl):null;Yf(e,r,g.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function nC(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=kf(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&C(u),La(a),o.resolving=!1,ep()}}return i}function fp(e,t,n){return!!(n[t+(e>>ap)]&1<<e)}function pp(e,t){return!(e&g.Self||e&g.Host&&t)}class Ji{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return dp(this._tNode,this._lView,t,Be(r),n)}}function fC(){return new Ji(sn(),J())}function nc(e){return Fn(e)?()=>{const t=nc(Ue(e));return t&&t()}:vi(e)}function mp(e){const t=e[Ee],n=t.type;return 2===n?t.declTNode:1===n?e[un]:null}const ts="__parameters__";function rs(e,t,n){return Ht(()=>{const r=function rc(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,p){const _=u.hasOwnProperty(ts)?u[ts]:Object.defineProperty(u,ts,{value:[]})[ts];for(;_.length<=p;)_.push(null);return(_[p]=_[p]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class ze{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ge({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ci(e,t){e.forEach(n=>Array.isArray(n)?Ci(n,t):t(n))}function yp(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ha(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const uo=Zt(rs("Optional"),8),co=Zt(rs("SkipSelf"),4);var Mn=(()=>((Mn=Mn||{})[Mn.Important=1]="Important",Mn[Mn.DashCase=2]="DashCase",Mn))();const dc=new Map;let UC=0;const fc="__ngContext__";function dn(e,t){Ln(t)?(e[fc]=t[to],function VC(e){dc.set(e[to],e)}(t)):e[fc]=t}let pc;function gc(e,t){return pc(e,t)}function go(e){const t=e[Nt];return sr(t)?t[Nt]:t}function mc(e){return jp(e[Js])}function vc(e){return jp(e[ir])}function jp(e){for(;null!==e&&!sr(e);)e=e[ir];return e}function os(e,t,n,r,i){if(null!=r){let s,o=!1;sr(r)?s=r:Ln(r)&&(o=!0,r=r[Or]);const a=rn(r);0===e&&null!==n?null==i?zp(t,n,a):wi(t,n,a,i||null,!0):1===e&&null!==n?wi(t,n,a,i||null,!0):2===e?function bc(e,t,n){const r=za(e,t);r&&function lw(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function dw(e,t,n,r,i){const s=n[Ma];s!==rn(n)&&os(t,e,r,s,i);for(let a=yn;a<n.length;a++){const u=n[a];mo(u[Ee],u,e,t,r,s)}}(t,e,s,n,i)}}function _c(e,t,n){return e.createElement(t,n)}function Hp(e,t){const n=e[Ki],r=n.indexOf(t),i=t[Nt];512&t[tt]&&(t[tt]&=-513,Hu(i,-1)),n.splice(r,1)}function Dc(e,t){if(e.length<=yn)return;const n=yn+t,r=e[n];if(r){const i=r[eo];null!==i&&i!==e&&Hp(i,r),t>0&&(e[n-1][ir]=r[ir]);const s=Ha(e,yn+t);!function ew(e,t){mo(e,t,t[st],2,null,null),t[Or]=null,t[un]=null}(r[Ee],r);const o=s[mr];null!==o&&o.detachView(s[Ee]),r[Nt]=null,r[ir]=null,r[tt]&=-65}return r}function Vp(e,t){if(!(128&t[tt])){const n=t[st];n.destroyNode&&mo(e,t,n,3,null,null),function rw(e){let t=e[Js];if(!t)return Cc(e[Ee],e);for(;t;){let n=null;if(Ln(t))n=t[Js];else{const r=t[yn];r&&(n=r)}if(!n){for(;t&&!t[ir]&&t!==e;)Ln(t)&&Cc(t[Ee],t),t=t[Nt];null===t&&(t=e),Ln(t)&&Cc(t[Ee],t),n=t&&t[ir]}t=n}}(t)}}function Cc(e,t){if(!(128&t[tt])){t[tt]&=-65,t[tt]|=128,function aw(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof io)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Wn(4,a,u);try{u.call(a)}finally{Wn(5,a,u)}}else{Wn(4,i,s);try{s.call(i)}finally{Wn(5,i,s)}}}}}(e,t),function ow(e,t){const n=e.cleanup,r=t[Gi];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();t[Gi]=null}}(e,t),1===t[Ee].type&&t[st].destroy();const n=t[eo];if(null!==n&&sr(t[Nt])){n!==t[Nt]&&Hp(n,t);const r=t[mr];null!==r&&r.detachView(e)}!function $C(e){dc.delete(e[to])}(t)}}function $p(e,t,n){return function Gp(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Or];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===pt.None||s===pt.Emulated)return null}return Bn(r,n)}}(e,t.parent,n)}function wi(e,t,n,r,i){e.insertBefore(t,n,r,i)}function zp(e,t,n){e.appendChild(t,n)}function Wp(e,t,n,r,i){null!==r?wi(e,t,n,r,i):zp(e,t,n)}function za(e,t){return e.parentNode(t)}let wc,Mc,qp=function Zp(e,t,n){return 40&e.type?Bn(e,n):null};function Wa(e,t,n,r){const i=$p(e,r,t),s=t[st],a=function Kp(e,t,n){return qp(e,t,n)}(r.parent||t[un],r,t);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Wp(s,i,n[u],a,!1);else Wp(s,i,n,a,!1);void 0!==wc&&wc(s,r,t,n,i)}function Ka(e,t){if(null!==t){const n=t.type;if(3&n)return Bn(t,e);if(4&n)return Sc(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ka(e,r);{const i=e[t.index];return sr(i)?Sc(-1,i):rn(i)}}if(32&n)return gc(t,e)()||rn(e[t.index]);{const r=Xp(e,t);return null!==r?Array.isArray(r)?r[0]:Ka(go(e[cn]),r):Ka(e,t.next)}}return null}function Xp(e,t){return null!==t?e[cn][un].projection[t.projection]:null}function Sc(e,t){const n=yn+e+1;if(n<t.length){const r=t[n],i=r[Ee].firstChild;if(null!==i)return Ka(r,i)}return t[Ma]}function Ec(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&dn(rn(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Ec(e,t,n.child,r,i,s,!1),os(t,e,i,a,s);else if(32&u){const d=gc(n,r);let p;for(;p=d();)os(t,e,i,p,s);os(t,e,i,a,s)}else 16&u?Qp(e,t,r,n,i,s):os(t,e,i,a,s);n=o?n.projectionNext:n.next}}function mo(e,t,n,r,i,s){Ec(n,r,e.firstChild,t,i,s,!1)}function Qp(e,t,n,r,i,s){const o=n[cn],u=o[un].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)os(t,e,i,u[d],s);else Ec(e,t,u,o[Nt],i,s,!0)}function Jp(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function eg(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Xu(e,t,r),null!==i&&Jp(e,t,i),null!==s&&function fw(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class sg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wa})`}}const Mw=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var qt=(()=>((qt=qt||{})[qt.NONE=0]="NONE",qt[qt.HTML=1]="HTML",qt[qt.STYLE=2]="STYLE",qt[qt.SCRIPT=3]="SCRIPT",qt[qt.URL=4]="URL",qt[qt.RESOURCE_URL=5]="RESOURCE_URL",qt))();function Oc(e){const t=function _o(){const e=J();return e&&e[Lu]}();return t?t.sanitize(qt.URL,e)||"":function vo(e,t){const n=function Sw(e){return e instanceof sg&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${wa})`)}return n===t}(e,"URL")?function ni(e){return e instanceof sg?e.changingThisBreaksApplicationSecurity:e}(e):function Ac(e){return(e=String(e)).match(Mw)?e:"unsafe:"+e}(Ze(e))}const Xa=new ze("ENVIRONMENT_INITIALIZER"),pg=new ze("INJECTOR",-1),gg=new ze("INJECTOR_DEF_TYPES");class mg{get(t,n=z){if(n===z){const r=new Error(`NullInjectorError: No provider for ${St(t)}!`);throw r.name="NullInjectorError",r}return n}}function Uw(...e){return{\u0275providers:vg(0,e),\u0275fromNgModule:!0}}function vg(e,...t){const n=[],r=new Set;let i;return Ci(t,s=>{const o=s;Fc(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&yg(i,n),n}function yg(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];Nc(i,s=>{t.push(s)})}}function Fc(e,t,n,r){if(!(e=Ue(e)))return!1;let i=null,s=l(e);const o=!s&&Ct(e);if(s||o){if(o&&!o.standalone)return!1;i=e}else{const u=e.ngModule;if(s=l(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Fc(d,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Ci(s.imports,p=>{Fc(p,t,n,r)&&(d||(d=[]),d.push(p))})}finally{}void 0!==d&&yg(d,t)}if(!a){const d=vi(i)||(()=>new i);t.push({provide:i,useFactory:d,deps:it},{provide:gg,useValue:i,multi:!0},{provide:Xa,useValue:()=>ee(i),multi:!0})}const u=s.providers;null==u||a||Nc(u,p=>{t.push(p)})}}return i!==e&&void 0!==e.providers}function Nc(e,t){for(let n of e)Li(n)&&(n=n.\u0275providers),Array.isArray(n)?Nc(n,t):t(n)}const Hw=Dt({provide:String,useValue:Dt});function kc(e){return null!==e&&"object"==typeof e&&Hw in e}function Si(e){return"function"==typeof e}const Lc=new ze("Set Injector scope."),Qa={},$w={};let Bc;function Ja(){return void 0===Bc&&(Bc=new mg),Bc}class Lr{}class Cg extends Lr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uc(t,o=>this.processProvider(o)),this.records.set(pg,ls(void 0,this)),i.has("environment")&&this.records.set(Lr,ls(void 0,this));const s=this.records.get(Lc);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(gg.multi,it,g.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Se(this),r=C(void 0);try{return t()}finally{Se(n),C(r)}}get(t,n=z,r=g.Default){this.assertNotDestroyed(),r=Be(r);const i=Se(this),s=C(void 0);try{if(!(r&g.SkipSelf)){let a=this.records.get(t);if(void 0===a){const u=function Zw(e){return"function"==typeof e||"object"==typeof e&&e instanceof ze}(t)&&Hi(t);a=u&&this.injectableDefInScope(u)?ls(jc(t),Qa):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&g.Self?Ja():this.parent).get(t,n=r&g.Optional&&n===z?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[re]=o[re]||[]).unshift(St(t)),i)throw o;return function Ut(e,t,n,r){const i=e[re];throw t[me]&&i.unshift(t[me]),e.message=function an(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==xe?e.slice(2):e;let i=St(t);if(Array.isArray(t))i=t.map(St).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):St(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(he,"\n  ")}`}("\n"+e.message,i,n,r),e[se]=i,e[re]=null,e}(o,t,"R3InjectorError",this.source)}throw o}finally{C(s),Se(i)}}resolveInjectorInitializers(){const t=Se(this),n=C(void 0);try{const r=this.get(Xa.multi,it,g.Self);for(const i of r)i()}finally{Se(t),C(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(St(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(t){let n=Si(t=Ue(t))?t:Ue(t&&t.provide);const r=function zw(e){return kc(e)?ls(void 0,e.useValue):ls(function wg(e,t,n){let r;if(Si(e)){const i=Ue(e);return vi(i)||jc(i)}if(kc(e))r=()=>Ue(e.useValue);else if(function Dg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...bt(e.deps||[]));else if(function _g(e){return!(!e||!e.useExisting)}(e))r=()=>ee(Ue(e.useExisting));else{const i=Ue(e&&(e.useClass||e.provide));if(!function Ww(e){return!!e.deps}(e))return vi(i)||jc(i);r=()=>new i(...bt(e.deps))}return r}(e),Qa)}(t);if(Si(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ls(void 0,Qa,!0),i.factory=()=>bt(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Qa&&(n.value=$w,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Kw(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Ue(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function jc(e){const t=Hi(e),n=null!==t?t.factory:vi(e);if(null!==n)return n;if(e instanceof ze)throw new fe(204,!1);if(e instanceof Function)return function Gw(e){const t=e.length;if(t>0)throw function lo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new fe(204,!1);const n=function Fu(e){const t=e&&(e[c]||e[f]);return t?(function w(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),t):null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new fe(204,!1)}function ls(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Uc(e,t){for(const n of e)Array.isArray(n)?Uc(n,t):n&&Li(n)?Uc(n.\u0275providers,t):t(n)}class qw{}class Sg{}class Xw{resolveComponentFactory(t){throw function Yw(e){const t=Error(`No component factory found for ${St(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Do=(()=>{class e{}return e.NULL=new Xw,e})();function Qw(){return us(sn(),J())}function us(e,t){return new _r(Bn(e,t))}let _r=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=Qw,e})();function Jw(e){return e instanceof _r?e.nativeElement:e}class Eg{}let tS=(()=>{class e{}return e.\u0275prov=Ge({token:e,providedIn:"root",factory:()=>null}),e})();class tl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const nS=new tl("15.2.5"),Hc={},Vc="ngOriginalError";function $c(e){return e[Vc]}class cs{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&$c(t);for(;n&&$c(n);)n=$c(n);return n||null}}function Br(e){return e instanceof Function?e():e}function Mg(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}const Tg="ng-template";function fS(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const o=e[r++];if(n&&"class"===s&&-1!==Mg(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ag(e){return 4===e.type&&e.value!==Tg}function pS(e,t,n){return t===(4!==e.type||n?e.value:Tg)}function gS(e,t,n){let r=4;const i=e.attrs||[],s=function yS(e){for(let t=0;t<e.length;t++)if(np(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!pS(e,u,n)||""===u&&1===t.length){if(ar(r))return!1;o=!0}}else{const d=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!fS(e.attrs,d,n)){if(ar(r))return!1;o=!0}continue}const _=mS(8&r?"class":u,i,Ag(e),n);if(-1===_){if(ar(r))return!1;o=!0;continue}if(""!==d){let E;E=_>s?"":i[_+1].toLowerCase();const O=8&r?E:null;if(O&&-1!==Mg(O,d,0)||2&r&&d!==E){if(ar(r))return!1;o=!0}}}}else{if(!o&&!ar(r)&&!ar(u))return!1;if(o&&ar(u))continue;o=!1,r=u|1&r}}return ar(r)||o}function ar(e){return 0==(1&e)}function mS(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function _S(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function xg(e,t,n=!1){for(let r=0;r<t.length;r++)if(gS(e,t[r],n))return!0;return!1}function Rg(e,t){return e?":not("+t.trim()+")":t}function CS(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ar(o)&&(t+=Rg(s,i),i=""),r=o,s=s||!ar(r);n++}return""!==i&&(t+=Rg(s,i)),t}const Xe={};function jr(e){Pg(dt(),J(),Dn()+e,!1)}function Pg(e,t,n,r){if(!r)if(3==(3&t[tt])){const s=e.preOrderCheckHooks;null!==s&&Oa(t,s,n)}else{const s=e.preOrderHooks;null!==s&&Fa(t,s,0,n)}_i(n)}function kg(e,t=null,n=null,r){const i=Lg(e,t,n,r);return i.resolveInjectorInitializers(),i}function Lg(e,t=null,n=null,r,i=new Set){const s=[n||it,Uw(e)];return r=r||("object"==typeof e?void 0:St(e)),new Cg(s,t||Ja(),r||null,i)}let Ur=(()=>{class e{static create(n,r){if(Array.isArray(n))return kg({name:""},r,n,"");{const i=n.name??"";return kg({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=z,e.NULL=new mg,e.\u0275prov=Ge({token:e,providedIn:"any",factory:()=>ee(pg)}),e.__NG_ELEMENT_ID__=-1,e})();function He(e,t=g.Default){const n=J();return null===n?ee(e,t):dp(sn(),n,Ue(e),t)}function zg(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=e.data[s];Wu(n[r]),o.contentQueries(2,t[s],s)}}}function rl(e,t,n,r,i,s,o,a,u,d,p){const _=t.blueprint.slice();return _[Or]=i,_[tt]=76|r,(null!==p||e&&1024&e[tt])&&(_[tt]|=1024),Vf(_),_[Nt]=_[zi]=e,_[Vt]=n,_[Ia]=o||e&&e[Ia],_[st]=a||e&&e[st],_[Lu]=u||e&&e[Lu]||null,_[Ea]=d||e&&e[Ea]||null,_[un]=s,_[to]=function HC(){return UC++}(),_[Pf]=p,_[cn]=2==t.type?e[cn]:_,_}function fs(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Zc(e,t,n,r,i){const s=zf(),o=Vu(),u=e.data[t]=function KS(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(e,t,n,r,i),function zD(){return Ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ro(){const e=Ye.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return vr(s,!0),s}function Co(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function qc(e,t,n){Ku(t);try{const r=e.viewQuery;null!==r&&sd(1,r,n);const i=e.template;null!==i&&Wg(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&zg(e,t),e.staticViewQueries&&sd(2,e.viewQuery,n);const s=e.components;null!==s&&function GS(e,t){for(let n=0;n<t.length;n++)hb(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[tt]&=-5,Zu()}}function il(e,t,n,r){const i=t[tt];if(128!=(128&i)){Ku(t);try{Vf(t),function Kf(e){return Ye.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Wg(e,t,n,2,r);const o=3==(3&i);if(o){const d=e.preOrderCheckHooks;null!==d&&Oa(t,d,null)}else{const d=e.preOrderHooks;null!==d&&Fa(t,d,0,null),qu(t,0)}if(function cb(e){for(let t=mc(e);null!==t;t=vc(t)){if(!t[Of])continue;const n=t[Ki];for(let r=0;r<n.length;r++){const i=n[r];512&i[tt]||Hu(i[Nt],1),i[tt]|=512}}}(t),function ub(e){for(let t=mc(e);null!==t;t=vc(t))for(let n=yn;n<t.length;n++){const r=t[n],i=r[Ee];Ra(r)&&il(i,r,i.template,r[Vt])}}(t),null!==e.contentQueries&&zg(e,t),o){const d=e.contentCheckHooks;null!==d&&Oa(t,d)}else{const d=e.contentHooks;null!==d&&Fa(t,d,1),qu(t,1)}!function VS(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)_i(~i);else{const s=i,o=n[++r],a=n[++r];WD(o,s),a(2,t[s])}}}finally{_i(-1)}}(e,t);const a=e.components;null!==a&&function $S(e,t){for(let n=0;n<t.length;n++)db(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&sd(2,u,r),o){const d=e.viewCheckHooks;null!==d&&Oa(t,d)}else{const d=e.viewHooks;null!==d&&Fa(t,d,2),qu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[tt]&=-41,512&t[tt]&&(t[tt]&=-513,Hu(t[Nt],-1))}finally{Zu()}}}function Wg(e,t,n,r,i){const s=Dn(),o=2&r;try{_i(-1),o&&t.length>xt&&Pg(e,t,xt,!1),Wn(o?2:0,i),n(r,i)}finally{_i(s),Wn(o?3:1,i)}}function Yc(e,t,n){if(ju(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const o=e.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function Xc(e,t,n){Gf()&&(function JS(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;no(n)&&function ob(e,t,n){const r=Bn(t,e),i=Kg(n),s=e[Ia],o=sl(e,rl(e,i,null,n.onPush?32:16,r,t,s,s.createRenderer(r,n),null,null,null));e[t.index]=o}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Ba(n,t),dn(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const u=e.data[a],d=Di(t,e,a,n);dn(d,t),null!==o&&ab(0,a-i,d,u,0,o),or(u)&&(jn(n.index,t)[Vt]=Di(t,e,a,n))}}(e,t,n,Bn(n,t)),64==(64&n.flags)&&Jg(e,t,n))}function Qc(e,t,n=Bn){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Kg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Jc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Jc(e,t,n,r,i,s,o,a,u,d){const p=xt+r,_=p+i,E=function zS(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Xe);return n}(p,_),O="function"==typeof d?d():d;return E[Ee]={type:e,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:t,data:E.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:O,incompleteFirstPass:!1}}function Zg(e,t,n,r){const i=tm(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&nm(e).push(r,i.length-1))}function qg(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?Yg(n,t,i,s):r.hasOwnProperty(i)&&Yg(n,t,r[i],s)}return n}function Yg(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Xg(e,t){const n=jn(t,e);16&n[tt]||(n[tt]|=32)}function ed(e,t,n,r){if(Gf()){const i=null===r?null:{"":-1},s=function tb(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(xg(t,o.selectors,!1))if(r||(r=[]),or(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),td(e,t,a.length)}else r.unshift(o),td(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Qg(e,t,n,o,i,a),i&&function nb(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new fe(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=so(n.mergedAttrs,n.attrs)}function Qg(e,t,n,r,i,s){for(let d=0;d<r.length;d++)tc(Ba(n,t),e,r[d].type);!function ib(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,u=Co(e,t,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=so(n.mergedAttrs,p.hostAttrs),sb(e,n,t,u,p),rb(u,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const _=p.type.prototype;!o&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),o=!0),!a&&(_.ngOnChanges||_.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function ZS(e,t,n){const i=t.directiveEnd,s=e.data,o=t.attrs,a=[];let u=null,d=null;for(let p=t.directiveStart;p<i;p++){const _=s[p],E=n?n.get(_):null,H=E?E.outputs:null;u=qg(_.inputs,p,u,E?E.inputs:null),d=qg(_.outputs,p,d,H);const K=null===u||null===o||Ag(t)?null:lb(u,p,o);a.push(K)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=d}(e,n,s)}function Jg(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function KD(){return Ye.lFrame.currentDirectiveIndex}();try{_i(s);for(let a=r;a<i;a++){const u=e.data[a],d=t[a];Gu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&eb(u,d)}}finally{_i(-1),Gu(o)}}function eb(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function td(e,t,n){t.componentOffset=n,(e.components||(e.components=[])).push(t.index)}function rb(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;or(t)&&(n[""]=e)}}function sb(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=vi(i.type)),o=new io(s,or(i),He);e.blueprint[r]=o,n[r]=o,function XS(e,t,n,r,i){const s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function QS(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(e,t,r,Co(e,n,i.hostVars,Xe),i)}function ab(e,t,n,r,i,s){const o=s[t];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const d=o[u++],p=o[u++],_=o[u++];null!==a?r.setInput(n,_,d,p):n[p]=_}}}function lb(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function em(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}function db(e,t){const n=jn(t,e);if(Ra(n)){const r=n[Ee];48&n[tt]?il(r,n,r.template,n[Vt]):n[mi]>0&&rd(n)}}function rd(e){for(let r=mc(e);null!==r;r=vc(r))for(let i=yn;i<r.length;i++){const s=r[i];if(Ra(s))if(512&s[tt]){const o=s[Ee];il(o,s,o.template,s[Vt])}else s[mi]>0&&rd(s)}const n=e[Ee].components;if(null!==n)for(let r=0;r<n.length;r++){const i=jn(n[r],e);Ra(i)&&i[mi]>0&&rd(i)}}function hb(e,t){const n=jn(t,e),r=n[Ee];(function fb(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),qc(r,n,n[Vt])}function sl(e,t){return e[Js]?e[Rf][ir]=t:e[Js]=t,e[Rf]=t,t}function id(e){for(;e;){e[tt]|=32;const t=go(e);if(MD(e)&&!t)return e;e=t}return null}function ol(e,t,n,r=!0){const i=t[Ia];i.begin&&i.begin();try{il(e,t,e.template,n)}catch(o){throw r&&im(t,o),o}finally{i.end&&i.end()}}function sd(e,t,n){Wu(0),t(e,n)}function tm(e){return e[Gi]||(e[Gi]=[])}function nm(e){return e.cleanup||(e.cleanup=[])}function im(e,t){const n=e[Ea],r=n?n.get(cs,null):null;r&&r.handleError(t)}function od(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],d=e.data[o];null!==d.setInput?d.setInput(u,i,r,a):u[a]=i}}function al(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=Ys(i,a):2==s&&(r=Ys(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function ll(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(rn(s)),sr(s))for(let a=yn;a<s.length;a++){const u=s[a],d=u[Ee].firstChild;null!==d&&ll(u[Ee],u,d,r)}const o=n.type;if(8&o)ll(e,t,n.child,r);else if(32&o){const a=gc(n,t);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Xp(t,n);if(Array.isArray(a))r.push(...a);else{const u=go(t[cn]);ll(u[Ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class wo{get rootNodes(){const t=this._lView,n=t[Ee];return ll(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vt]}set context(t){this._lView[Vt]=t}get destroyed(){return 128==(128&this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Nt];if(sr(t)){const n=t[Ta],r=n?n.indexOf(this):-1;r>-1&&(Dc(t,r),Ha(n,r))}this._attachedToViewContainer=!1}Vp(this._lView[Ee],this._lView)}onDestroy(t){Zg(this._lView[Ee],this._lView,null,t)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-65}reattach(){this._lView[tt]|=64}detectChanges(){ol(this._lView[Ee],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nw(e,t){mo(e,t,t[st],2,null,null)}(this._lView[Ee],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=t}}class pb extends wo{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;ol(t[Ee],t,t[Vt],!1)}checkNoChanges(){}get context(){return null}}class sm extends Do{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ct(t);return new So(n,this.ngModule)}}function om(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class mb{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Be(r);const i=this.injector.get(t,Hc,r);return i!==Hc||n===Hc?i:this.parentInjector.get(t,n,r)}}class So extends Sg{get inputs(){return om(this.componentDef.inputs)}get outputs(){return om(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function wS(e){return e.map(CS).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof Lr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new mb(t,s):t,a=o.get(Eg,null);if(null===a)throw new fe(407,!1);const u=o.get(tS,null),d=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",_=r?function WS(e,t,n){return e.selectRootElement(t,n===pt.ShadowDom)}(d,r,this.componentDef.encapsulation):_c(d,p,function gb(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(p)),E=this.componentDef.onPush?288:272,O=Jc(0,null,null,1,0,null,null,null,null,null),H=rl(null,O,null,E,null,null,a,d,u,o,null);let K,Y;Ku(H);try{const oe=this.componentDef;let be,X=null;oe.findHostDirectiveDefs?(be=[],X=new Map,oe.findHostDirectiveDefs(oe,be,X),be.push(oe)):be=[oe];const Ke=function yb(e,t){const n=e[Ee],r=xt;return e[r]=t,fs(n,r,2,"#host",null)}(H,_),Mt=function _b(e,t,n,r,i,s,o,a){const u=i[Ee];!function Db(e,t,n,r){for(const i of e)t.mergedAttrs=so(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(al(t,t.mergedAttrs,!0),null!==n&&eg(r,n,t))}(r,e,t,o);const d=s.createRenderer(t,n),p=rl(i,Kg(n),null,n.onPush?32:16,i[e.index],e,s,d,a||null,null,null);return u.firstCreatePass&&td(u,e,r.length-1),sl(i,p),i[e.index]=p}(Ke,_,oe,be,H,a,d);Y=Hf(O,xt),_&&function wb(e,t,n,r){if(r)Xu(e,n,["ng-version",nS.full]);else{const{attrs:i,classes:s}=function SS(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!ar(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Xu(e,n,i),s&&s.length>0&&Jp(e,n,s.join(" "))}}(d,oe,_,r),void 0!==n&&function Sb(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Y,this.ngContentSelectors,n),K=function Cb(e,t,n,r,i,s){const o=sn(),a=i[Ee],u=Bn(o,i);Qg(a,i,o,n,null,r);for(let p=0;p<n.length;p++)dn(Di(i,a,o.directiveStart+p,o),i);Jg(a,i,o),u&&dn(u,i);const d=Di(i,a,o.directiveStart+o.componentOffset,o);if(e[Vt]=i[Vt]=d,null!==s)for(const p of s)p(d,t);return Yc(a,o,e),d}(Mt,oe,be,X,H,[bb]),qc(O,H,null)}finally{Zu()}return new vb(this.componentType,K,us(Y,H),H,Y)}}class vb extends qw{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new pb(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const s=this._rootLView;od(s[Ee],s,i,t,n),Xg(s,this._tNode.index)}}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function bb(){const e=sn();Pa(J()[Ee],e)}function ul(e){return!!function ld(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function cd(e,t,n,r,i,s,o,a){const u=J(),d=dt(),p=e+xt,_=d.firstCreatePass?function Bb(e,t,n,r,i,s,o,a,u){const d=t.consts,p=fs(t,e,4,o||null,ti(d,a));ed(t,n,p,ti(d,u)),Pa(t,p);const _=p.tView=Jc(2,p,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d);return null!==t.queries&&(t.queries.template(t,p),_.queries=t.queries.embeddedTView(p)),p}(p,d,u,t,n,r,i,s,o):d.data[p];vr(_,!1);const E=u[st].createComment("");Wa(d,u,E,_),dn(E,u),sl(u,u[p]=em(E,u,E,_)),Aa(_)&&Xc(d,u,_),null!=o&&Qc(u,_,a)}function wr(e,t,n){const r=J();return function hn(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}(r,function Xi(){return Ye.lFrame.bindingIndex++}(),t)&&function Hn(e,t,n,r,i,s,o,a){const u=Bn(t,n);let p,d=t.inputs;!a&&null!=d&&(p=d[r])?(od(e,n,p,r,i),no(t)&&Xg(n,t.index)):3&t.type&&(r=function qS(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(u,r,i))}(dt(),function Ot(){const e=Ye.lFrame;return Hf(e.tView,e.selectedIndex)}(),r,e,t,r[st],n,!1),wr}function dd(e,t,n,r,i){const o=i?"class":"style";od(e,n,t.inputs[o],o,r)}function $t(e,t,n,r){const i=J(),s=dt(),o=xt+e,a=i[st],u=s.firstCreatePass?function Ub(e,t,n,r,i,s){const o=t.consts,u=fs(t,e,2,r,ti(o,i));return ed(t,n,u,ti(o,s)),null!==u.attrs&&al(u,u.attrs,!1),null!==u.mergedAttrs&&al(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,t,n,r):s.data[o],d=i[o]=_c(a,t,function tC(){return Ye.lFrame.currentNamespace}()),p=Aa(u);return vr(u,!0),eg(a,d,u),32!=(32&u.flags)&&Wa(s,i,d,u),0===function jD(){return Ye.lFrame.elementDepthCount}()&&dn(d,i),function UD(){Ye.lFrame.elementDepthCount++}(),p&&(Xc(s,i,u),Yc(s,u,i)),null!==r&&Qc(i,u),$t}function Yt(){let e=sn();Vu()?function $u(){Ye.lFrame.isParent=!1}():(e=e.parent,vr(e,!1));const t=e;!function HD(){Ye.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(Pa(n,e),ju(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function sC(e){return 0!=(8&e.flags)}(t)&&dd(n,t,J(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function oC(e){return 0!=(16&e.flags)}(t)&&dd(n,t,J(),t.stylesWithoutHost,!1),Yt}function Ei(e,t,n,r){return $t(e,t,n,r),Yt(),Ei}function pd(){return J()}function dl(e){return!!e&&"function"==typeof e.then}const bm=function Sm(e){return!!e&&"function"==typeof e.subscribe};function Vr(e,t,n,r){const i=J(),s=dt(),o=sn();return function Im(e,t,n,r,i,s,o){const a=Aa(r),d=e.firstCreatePass&&nm(e),p=t[Vt],_=tm(t);let E=!0;if(3&r.type||o){const K=Bn(r,t),Y=o?o(K):K,oe=_.length,be=o?Ke=>o(rn(Ke[r.index])):r.index;let X=null;if(!o&&a&&(X=function Vb(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[Gi],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==X)(X.__ngLastListenerFn__||X).__ngNextListenerFn__=s,X.__ngLastListenerFn__=s,E=!1;else{s=Tm(r,t,p,s,!1);const Ke=n.listen(Y,i,s);_.push(s,Ke),d&&d.push(i,be,oe,oe+1)}}else s=Tm(r,t,p,s,!1);const O=r.outputs;let H;if(E&&null!==O&&(H=O[i])){const K=H.length;if(K)for(let Y=0;Y<K;Y+=2){const Mt=t[H[Y]][H[Y+1]].subscribe(s),Kt=_.length;_.push(s,Mt),d&&d.push(i,r.index,Kt,-(Kt+1))}}}(s,i,i[st],o,e,t,r),Vr}function Mm(e,t,n,r){try{return Wn(6,t,n),!1!==n(r)}catch(i){return im(e,i),!1}finally{Wn(7,t,n)}}function Tm(e,t,n,r,i){return function s(o){if(o===Function)return r;id(e.componentOffset>-1?jn(e.index,t):t);let u=Mm(t,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=Mm(t,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function Ss(e=1){return function qD(e){return(Ye.lFrame.contextLView=function YD(e,t){for(;e>0;)t=t[zi],e--;return t}(e,Ye.lFrame.contextLView))[Vt]}(e)}function Cn(e,t=""){const n=J(),r=dt(),i=e+xt,s=r.firstCreatePass?fs(r,i,1,t,null):r.data[i],o=n[i]=function yc(e,t){return e.createText(t)}(n[st],t);Wa(r,n,o,s),vr(s,!1)}const Is="en-US";let Dv=Is;class Ms{}class Wv{}class Kv extends Ms{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sm(this);const r=kn(t);this._bootstrapComponents=Br(r.bootstrap),this._r3Injector=Lg(t,n,[{provide:Ms,useValue:this},{provide:Do,useValue:this.componentFactoryResolver}],St(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class xd extends Wv{constructor(t){super(),this.moduleType=t}create(t){return new Kv(this.moduleType,t)}}class RI extends Ms{constructor(t,n,r){super(),this.componentFactoryResolver=new sm(this),this.instance=null;const i=new Cg([...t,{provide:Ms,useValue:this},{provide:Do,useValue:this.componentFactoryResolver}],n||Ja(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function yl(e,t,n=null){return new RI(e,t,n).injector}let PI=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=vg(0,n.type),i=r.length>0?yl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Ge({token:e,providedIn:"environment",factory:()=>new e(ee(Lr))}),e})();function Zv(e){e.getStandaloneInjector=t=>t.get(PI).getOrCreateStandaloneInjector(e)}function Pd(e){return t=>{setTimeout(e,void 0,t)}}const nt=class iM extends ke{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Pd(s),i&&(i=Pd(i)),o&&(o=Pd(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof we&&t.add(a),a}};function sM(){return this._results[Symbol.iterator]()}class Oo{get changes(){return this._changes||(this._changes=new nt)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Oo.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=sM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=function Kn(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function mC(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $r=(()=>{class e{}return e.__NG_ELEMENT_ID__=lM,e})();const oM=$r,aM=class extends oM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tView,i=rl(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[eo]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[mr];return null!==o&&(i[mr]=o.createEmbeddedView(r)),qc(r,i,t),new wo(i)}};function lM(){return _l(sn(),J())}function _l(e,t){return 4&e.type?new aM(t,e,us(e,t)):null}let cr=(()=>{class e{}return e.__NG_ELEMENT_ID__=uM,e})();function uM(){return ly(sn(),J())}const cM=cr,oy=class extends cM{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return us(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){const t=ec(this._hostTNode,this._hostLView);if(sp(t)){const n=ka(t,this._hostLView),r=Na(t);return new Ji(n[Ee].data[r+8],n)}return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=ay(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-yn}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=t.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(t,n,r,i,s){const o=t&&!function ao(e){return"function"==typeof e}(t);let a;if(o)a=n;else{const _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}const u=o?t:new So(Ct(t)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const E=(o?d:this.parentInjector).get(Lr,null);E&&(s=E)}const p=u.create(d,i,void 0,s);return this.insert(p.hostView,a),p}insert(t,n){const r=t._lView,i=r[Ee];if(function BD(e){return sr(e[Nt])}(r)){const p=this.indexOf(t);if(-1!==p)this.detach(p);else{const _=r[Nt],E=new oy(_,_[un],_[Nt]);E.detach(E.indexOf(t))}}const s=this._adjustIndex(n),o=this._lContainer;!function iw(e,t,n,r){const i=yn+r,s=n.length;r>0&&(n[i-1][ir]=t),r<s-yn?(t[ir]=n[i],yp(n,yn+r,t)):(n.push(t),t[ir]=null),t[Nt]=n;const o=t[eo];null!==o&&n!==o&&function sw(e,t){const n=e[Ki];t[cn]!==t[Nt][Nt][cn]&&(e[Of]=!0),null===n?e[Ki]=[t]:n.push(t)}(o,t);const a=t[mr];null!==a&&a.insertView(e),t[tt]|=64}(i,r,o,s);const a=Sc(s,o),u=r[st],d=za(u,o[Ma]);return null!==d&&function tw(e,t,n,r,i,s){r[Or]=i,r[un]=t,mo(e,r,n,1,i,s)}(i,o[un],u,r,d,a),t.attachToViewContainerRef(),yp(Od(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=ay(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Dc(this._lContainer,n);r&&(Ha(Od(this._lContainer),n),Vp(r[Ee],r))}detach(t){const n=this._adjustIndex(t,-1),r=Dc(this._lContainer,n);return r&&null!=Ha(Od(this._lContainer),n)?new wo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function ay(e){return e[Ta]}function Od(e){return e[Ta]||(e[Ta]=[])}function ly(e,t){let n;const r=t[e.index];if(sr(r))n=r;else{let i;if(8&e.type)i=rn(r);else{const s=t[st];i=s.createComment("");const o=Bn(e,t);wi(s,za(s,o),i,function uw(e,t){return e.nextSibling(t)}(s,o),!1)}t[e.index]=n=em(r,t,i,e),sl(t,n)}return new oy(n,e,t)}class Fd{constructor(t){this.queryList=t,this.matches=null}clone(){return new Fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Nd{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const o=n.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Nd(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==py(t,n).matches&&this.queries[n].setDirty()}}class uy{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class kd{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new kd(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ld{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new Ld(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(t,n,dM(n,s)),this.matchTNodeWithReadOption(t,n,ja(n,t,s,!1,!1))}else r===$r?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ja(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===_r||i===cr||i===$r&&4&n.type)this.addMatch(n.index,-2);else{const s=ja(n,t,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function dM(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function fM(e,t,n,r){return-1===n?function hM(e,t){return 11&e.type?us(e,t):4&e.type?_l(e,t):null}(t,e):-2===n?function pM(e,t,n){return n===_r?us(t,e):n===$r?_l(t,e):n===cr?ly(t,e):void 0}(e,t,r):Di(e,e[Ee],n,t)}function cy(e,t,n,r){const i=t[mr].queries[r];if(null===i.matches){const s=e.data,o=n.matches,a=[];for(let u=0;u<o.length;u+=2){const d=o[u];a.push(d<0?null:fM(t,s[d],o[u+1],n.metadata.read))}i.matches=a}return i.matches}function Bd(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=cy(e,t,i,n);for(let a=0;a<s.length;a+=2){const u=s[a];if(u>0)r.push(o[a/2]);else{const d=s[a+1],p=t[-u];for(let _=yn;_<p.length;_++){const E=p[_];E[eo]===E[Nt]&&Bd(E[Ee],E,d,r)}if(null!==p[Ki]){const _=p[Ki];for(let E=0;E<_.length;E++){const O=_[E];Bd(O[Ee],O,d,r)}}}}}return r}function Fo(e){const t=J(),n=dt(),r=qf();Wu(r+1);const i=py(n,r);if(e.dirty&&function LD(e){return 4==(4&e[tt])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Bd(n,t,r,[]):cy(n,t,i,r);e.reset(s,Jw),e.notifyOnChanges()}return!0}return!1}function dy(e,t,n){const r=dt();r.firstCreatePass&&(function fy(e,t,n){null===e.queries&&(e.queries=new kd),e.queries.track(new Ld(t,n))}(r,new uy(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function hy(e,t,n){const r=new Oo(4==(4&n));Zg(e,t,r,r.destroy),null===t[mr]&&(t[mr]=new Nd),t[mr].queries.push(new Fd(r))}(r,J(),t)}function py(e,t){return e.queries.getByIndex(t)}function wl(...e){}const Sl=new ze("Application Initializer");let bl=(()=>{class e{constructor(n){this.appInits=n,this.resolve=wl,this.reject=wl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(dl(s))n.push(s);else if(bm(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(ee(Sl,8))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Lo=new ze("AppId",{providedIn:"root",factory:function Py(){return`${Gd()}${Gd()}${Gd()}`}});function Gd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Oy=new ze("Platform Initializer"),Fy=new ze("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let LM=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Gr=new ze("LocaleId",{providedIn:"root",factory:()=>ve(Gr,g.Optional|g.SkipSelf)||function BM(){return typeof $localize<"u"&&$localize.locale||Is}()});class UM{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Ny=(()=>{class e{compileModuleSync(n){return new xd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Br(kn(n).declarations).reduce((o,a)=>{const u=Ct(a);return u&&o.push(new So(u)),o},[]);return new UM(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $M=(()=>Promise.resolve(0))();function zd(e){typeof Zone>"u"?$M.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Gt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function GM(){let e=P.requestAnimationFrame,t=P.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function KM(e){const t=()=>{!function WM(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(P,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Kd(e),e.isCheckStableRunning=!0,Wd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Kd(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return By(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),jy(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return By(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),jy(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Kd(e),Wd(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gt.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Gt.isInAngularZone())throw new fe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,zM,wl,wl);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const zM={};function Wd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Kd(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function By(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function jy(e){e._nesting--,Wd(e)}class ZM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Uy=new ze(""),El=new ze("");let Yd,Zd=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yd||(function qM(e){Yd=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gt.assertNotInAngularZone(),zd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zd(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(ee(Gt),ee(qd),ee(El))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})(),qd=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Yd?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const zr=!1;let ii=null;const Hy=new ze("AllowMultipleToken"),Xd=new ze("PlatformDestroyListeners"),Vy=new ze("appBootstrapListener");class $y{constructor(t,n){this.name=t,this.token=n}}function zy(e,t,n=[]){const r=`Platform: ${t}`,i=new ze(r);return(s=[])=>{let o=Qd();if(!o||o.injector.get(Hy,!1)){const a=[...n,...s,{provide:i,useValue:!0}];e?e(a):function QM(e){if(ii&&!ii.get(Hy,!1))throw new fe(400,!1);ii=e;const t=e.get(Ky);(function Gy(e){const t=e.get(Oy,null);t&&t.forEach(n=>n())})(e)}(function Wy(e=[],t){return Ur.create({name:t,providers:[{provide:Lc,useValue:"platform"},{provide:Xd,useValue:new Set([()=>ii=null])},...e]})}(a,r))}return function e1(e){const t=Qd();if(!t)throw new fe(401,!1);return t}()}}function Qd(){return ii?.get(Ky)??null}let Ky=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function qy(e,t){let n;return n="noop"===e?new ZM:("zone.js"===e?void 0:e)||new Gt(t),n}(r?.ngZone,function Zy(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Gt,useValue:i}];return i.run(()=>{const o=Ur.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),u=a.injector.get(cs,null);if(!u)throw new fe(402,!1);return i.runOutsideAngular(()=>{const d=i.onError.subscribe({next:p=>{u.handleError(p)}});a.onDestroy(()=>{Ml(this._modules,a),d.unsubscribe()})}),function Yy(e,t,n){try{const r=n();return dl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(u,i,()=>{const d=a.injector.get(bl);return d.runInitializers(),d.donePromise.then(()=>(function Cv(e){bn(e,"Expected localeId to be defined"),"string"==typeof e&&(Dv=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Gr,Is)||Is),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=Xy({},r);return function YM(e,t,n){const r=new xd(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Il);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new fe(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Xd,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(ee(Ur))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Xy(e,t){return Array.isArray(t)?t.reduce(Xy,e):{...e,...t}}let Il=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new R(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new R(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Gt.assertNotInAngularZone(),zd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=function bu(...e){const t=gi(e),n=function At(e,t){return"number"==typeof Ks(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?On(r[0]):Rr(n)(jt(r,t)):zn}(s,o.pipe(function Eu(e={}){const{connector:t=(()=>new ke),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,u,d=0,p=!1,_=!1;const E=()=>{a?.unsubscribe(),a=void 0},O=()=>{E(),o=u=void 0,p=_=!1},H=()=>{const K=o;O(),K?.unsubscribe()};return ht((K,Y)=>{d++,!_&&!p&&E();const oe=u=u??t();Y.add(()=>{d--,0===d&&!_&&!p&&(a=Jr(H,i))}),oe.subscribe(Y),!o&&d>0&&(o=new ue({next:be=>oe.next(be),error:be=>{_=!0,E(),a=Jr(O,n,be),oe.error(be)},complete:()=>{p=!0,E(),a=Jr(O,r),oe.complete()}}),On(K).subscribe(o))})(s)}}()))}bootstrap(n,r){const i=n instanceof Sg;if(!this._injector.get(bl).done){!i&&function $i(e){const t=Ct(e)||ln(e)||In(e);return null!==t&&t.standalone}(n);throw new fe(405,zr)}let o;o=i?n:this._injector.get(Do).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function XM(e){return e.isBoundToModule}(o)?void 0:this._injector.get(Ms),d=o.create(Ur.NULL,[],r||o.selector,a),p=d.location.nativeElement,_=d.injector.get(Uy,null);return _?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Ml(this.components,d),_?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Ml(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Vy,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ml(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new fe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(ee(Gt),ee(Lr),ee(cs))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ml(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let Jd=(()=>{class e{}return e.__NG_ELEMENT_ID__=n1,e})();function n1(e){return function r1(e,t,n){if(no(e)&&!n){const r=jn(e.index,t);return new wo(r,r)}return 47&e.type?new wo(t[cn],t):null}(sn(),J(),16==(16&e))}class n_{constructor(){}supports(t){return ul(t)}create(t){return new u1(t)}}const l1=(e,t)=>t;class u1{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||l1}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<i_(r,i,s)?n:r,a=i_(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,p=u-i;if(d!=p){for(let E=0;E<d;E++){const O=E<s.length?s[E]:s[E]=0,H=O+E;p<=H&&H<d&&(s[E]=O+1)}s[o.previousIndex]=p-d}}a!==u&&t(o,a,u)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!ul(t))throw new fe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function Nb(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new c1(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new r_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new r_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class c1{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class d1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class r_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new d1,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function i_(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function o_(){return new xl([new n_])}let xl=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||o_()),deps:[[e,new co,new uo]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new fe(901,!1)}}return e.\u0275prov=Ge({token:e,providedIn:"root",factory:o_}),e})();const m1=zy(null,"core",[]);let v1=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(ee(Il))},e.\u0275mod=ei({type:e}),e.\u0275inj=rr({}),e})(),sh=null;function Ai(){return sh}class D1{}const An=new ze("DocumentToken");let oh=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(){return function C1(){return ee(l_)}()},providedIn:"platform"}),e})();const w1=new ze("Location Initialized");let l_=(()=>{class e extends oh{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ai().getBaseHref(this._doc)}onPopState(n){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){u_()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){u_()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(ee(An))},e.\u0275prov=Ge({token:e,factory:function(){return function S1(){return new l_(ee(An))}()},providedIn:"platform"}),e})();function u_(){return!!window.history.pushState}function ah(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function c_(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Wr(e){return e&&"?"!==e[0]?"?"+e:e}let xi=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(){return ve(h_)},providedIn:"root"}),e})();const d_=new ze("appBaseHref");let h_=(()=>{class e extends xi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ve(An).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ah(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Wr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Wr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Wr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(ee(oh),ee(d_,8))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b1=(()=>{class e extends xi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=ah(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Wr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Wr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(ee(oh),ee(d_,8))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})(),lh=(()=>{class e{constructor(n){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function M1(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(c_(f_(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Wr(r))}normalize(n){return e.stripTrailingSlash(function I1(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,f_(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=Wr,e.joinWithSlash=ah,e.stripTrailingSlash=c_,e.\u0275fac=function(n){return new(n||e)(ee(xi))},e.\u0275prov=Ge({token:e,factory:function(){return function E1(){return new lh(ee(xi))}()},providedIn:"root"}),e})();function f_(e){return e.replace(/\/index.html$/,"")}class fT{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let E_=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new fT(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),I_(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{I_(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(He(cr),He($r),He(xl))},e.\u0275dir=vn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function I_(e,t){e.context.$implicit=t.item}let M_=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new gT,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){T_("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){T_("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(He(cr),He($r))},e.\u0275dir=vn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class gT{constructor(){this.$implicit=null,this.ngIf=null}}function T_(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${St(t)}'.`)}let R_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=rr({}),e})();let $T=(()=>{class e{}return e.\u0275prov=Ge({token:e,providedIn:"root",factory:()=>new GT(ee(An),window)}),e})();class GT{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function zT(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=O_(this.window.history)||O_(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function O_(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class _A extends D1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Eh extends _A{static makeCurrent(){!function _1(e){sh||(sh=e)}(new Eh)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function DA(){return Vo=Vo||document.querySelector("base"),Vo?Vo.getAttribute("href"):null}();return null==n?null:function CA(e){Vl=Vl||document.createElement("a"),Vl.setAttribute("href",e);const t=Vl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Vo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function cT(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Vl,Vo=null;const B_=new ze("TRANSITION_ID"),SA=[{provide:Sl,useFactory:function wA(e,t,n){return()=>{n.get(bl).donePromise.then(()=>{const r=Ai(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[B_,An,Ur],multi:!0}];let EA=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();const $l=new ze("EventManagerPlugins");let Gl=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(ee($l),ee(Gt))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();class j_{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=Ai().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let U_=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let s=i.get(n)??0;return s+=r,s>0?i.set(n,s):i.delete(n),s}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})(),$o=(()=>{class e extends U_{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(s=>s.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(ee(An))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();const Ih={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mh=/%COMP%/g,$_=new ze("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function G_(e,t){return t.flat(100).map(n=>n.replace(Mh,e))}function z_(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Th=(()=>{class e{constructor(n,r,i,s){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Ah(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof Z_?i.applyToHost(n):i instanceof xh&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,u=this.removeStylesOnCompDestory;switch(r.encapsulation){case pt.Emulated:s=new Z_(o,a,r,this.appId,u);break;case pt.ShadowDom:return new PA(o,a,n,r);default:s=new xh(o,a,r,u)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(ee(Gl),ee($o),ee(Lo),ee($_))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();class Ah{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Ih[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(K_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(K_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=Ih[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Ih[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Mn.DashCase|Mn.Important)?t.style.setProperty(n,r,i&Mn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Mn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,z_(r)):this.eventManager.addEventListener(t,n,z_(r))}}function K_(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class PA extends Ah{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=G_(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class xh extends Ah{constructor(t,n,r,i,s=r.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=G_(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Z_ extends xh{constructor(t,n,r,i,s){const o=i+"-"+r.id;super(t,n,r,s,o),this.contentAttr=function AA(e){return"_ngcontent-%COMP%".replace(Mh,e)}(o),this.hostAttr=function xA(e){return"_nghost-%COMP%".replace(Mh,e)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let OA=(()=>{class e extends j_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(ee(An))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();const q_=["alt","control","meta","shift"],FA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let kA=(()=>{class e extends j_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),q_.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=FA[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),q_.forEach(o=>{o!==i&&(0,NA[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(ee(An))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();const UA=zy(m1,"browser",[{provide:Fy,useValue:"browser"},{provide:Oy,useValue:function LA(){Eh.makeCurrent()},multi:!0},{provide:An,useFactory:function jA(){return function vw(e){Mc=e}(document),document},deps:[]}]),Q_=new ze(""),J_=[{provide:El,useClass:class bA{addToWindow(t){P.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},P.getAllAngularTestabilities=()=>t.getAllTestabilities(),P.getAllAngularRootElements=()=>t.getAllRootElements(),P.frameworkStabilizers||(P.frameworkStabilizers=[]),P.frameworkStabilizers.push(r=>{const i=P.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Ai().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Uy,useClass:Zd,deps:[Gt,qd,El]},{provide:Zd,useClass:Zd,deps:[Gt,qd,El]}],e0=[{provide:Lc,useValue:"root"},{provide:cs,useFactory:function BA(){return new cs},deps:[]},{provide:$l,useClass:OA,multi:!0,deps:[An,Gt,Fy]},{provide:$l,useClass:kA,multi:!0,deps:[An]},{provide:Th,useClass:Th,deps:[Gl,$o,Lo,$_]},{provide:Eg,useExisting:Th},{provide:U_,useExisting:$o},{provide:$o,useClass:$o,deps:[An]},{provide:Gl,useClass:Gl,deps:[$l,Gt]},{provide:class WT{},useClass:EA,deps:[]},[]];let HA=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Lo,useValue:n.appId},{provide:B_,useExisting:Lo},SA]}}}return e.\u0275fac=function(n){return new(n||e)(ee(Q_,12))},e.\u0275mod=ei({type:e}),e.\u0275inj=rr({providers:[...e0,...J_],imports:[R_,v1]}),e})(),t0=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(ee(An))},e.\u0275prov=Ge({token:e,factory:function(n){let r=null;return r=n?new n:function $A(){return new t0(ee(An))}(),r},providedIn:"root"}),e})();function $e(...e){return jt(e,gi(e))}typeof window<"u"&&window;class pr extends ke{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const zl=$(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:qA}=Array,{getPrototypeOf:YA,prototype:XA,keys:QA}=Object;const{isArray:tx}=Array;function s0(...e){const t=gi(e),n=function wu(e){return j(Ks(e))?e.pop():void 0}(e),{args:r,keys:i}=function JA(e){if(1===e.length){const t=e[0];if(qA(t))return{args:t,keys:null};if(function ex(e){return e&&"object"==typeof e&&YA(e)===XA}(t)){const n=QA(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return jt([],t);const s=new R(function sx(e,t,n=_t){return r=>{o0(t,()=>{const{length:i}=e,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)o0(t,()=>{const d=jt(e[u],t);let p=!1;d.subscribe(et(r,_=>{s[u]=_,p||(p=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,t,i?o=>function ix(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,o):_t));return n?s.pipe(function rx(e){return W(t=>function nx(e,t){return tx(t)?e(...t):e(t)}(e,t))}(n)):s}function o0(e,t,n){e?nr(n,e,t):t()}function Oh(...e){return function ox(){return Rr(1)}()(jt(e,gi(e)))}function a0(e){return new R(t=>{On(e()).subscribe(t)})}function Go(e,t){const n=j(e)?e:()=>e,r=i=>i.error(n());return new R(t?i=>t.schedule(r,0,i):r)}function Fh(){return ht((e,t)=>{let n=null;e._refCount++;const r=et(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class l0 extends R{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Et(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new we;const n=this.getSubject();t.add(this.source.subscribe(et(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=we.EMPTY)}return t}refCount(){return Fh()(this)}}function Er(e,t){return ht((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(et(r,u=>{i?.unsubscribe();let d=0;const p=s++;On(e(u,p)).subscribe(i=et(r,_=>r.next(t?t(u,_,p,d++):_),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function zo(e){return e<=0?()=>zn:ht((t,n)=>{let r=0;t.subscribe(et(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function oi(e,t){return ht((n,r)=>{let i=0;n.subscribe(et(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Wl(e){return ht((t,n)=>{let r=!1;t.subscribe(et(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function u0(e=lx){return ht((t,n)=>{let r=!1;t.subscribe(et(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function lx(){return new zl}function ai(e,t){const n=arguments.length>=2;return r=>r.pipe(e?oi((i,s)=>e(i,s,r)):_t,zo(1),n?Wl(t):u0(()=>new zl))}function Ri(e,t){return j(t)?Lt(e,t,1):Lt(e,1)}function fn(e,t,n){const r=j(e)||t||n?{next:e,error:t,complete:n}:e;return r?ht((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(et(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):_t}function li(e){return ht((t,n)=>{let s,r=null,i=!1;r=t.subscribe(et(n,void 0,void 0,o=>{s=On(e(o,li(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function c0(e,t){return ht(function ux(e,t,n,r,i){return(s,o)=>{let a=n,u=t,d=0;s.subscribe(et(o,p=>{const _=d++;u=a?e(u,p,_):(a=!0,p),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(e,t,arguments.length>=2,!0))}function Nh(e){return e<=0?()=>zn:ht((t,n)=>{let r=[];t.subscribe(et(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function d0(e,t){const n=arguments.length>=2;return r=>r.pipe(e?oi((i,s)=>e(i,s,r)):_t,Nh(1),n?Wl(t):u0(()=>new zl))}function kh(e){return ht((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const Qe="primary",Wo=Symbol("RouteTitle");class hx{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function xs(e){return new hx(e)}function fx(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=e[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ir(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!h0(e[i],t[i]))return!1;return!0}function h0(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}return e===t}function f0(e){return Array.prototype.concat.apply([],e)}function p0(e){return e.length>0?e[e.length-1]:null}function on(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function ui(e){return bm(e)?e:dl(e)?jt(Promise.resolve(e)):$e(e)}const Kl=!1,gx={exact:function v0(e,t,n){if(!Pi(e.segments,t.segments)||!Zl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!v0(e.children[r],t.children[r],n))return!1;return!0},subset:y0},g0={exact:function mx(e,t){return Ir(e,t)},subset:function vx(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>h0(e[n],t[n]))},ignored:()=>!0};function m0(e,t,n){return gx[n.paths](e.root,t.root,n.matrixParams)&&g0[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function y0(e,t,n){return _0(e,t,t.segments,n)}function _0(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!Pi(i,n)||t.hasChildren()||!Zl(i,n,r))}if(e.segments.length===n.length){if(!Pi(e.segments,n)||!Zl(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!y0(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(Pi(e.segments,i)&&Zl(e.segments,i,r)&&e.children[Qe])&&_0(e.children[Qe],t,s,r)}}function Zl(e,t,n){return t.every((r,i)=>g0[n](e[i].parameters,r.parameters))}class ci{constructor(t=new ot([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xs(this.queryParams)),this._queryParamMap}toString(){return Dx.serialize(this)}}class ot{constructor(t,n){this.segments=t,this.children=n,this.parent=null,on(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ql(this)}}class Ko{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=xs(this.parameters)),this._parameterMap}toString(){return w0(this)}}function Pi(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let Zo=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(){return new Lh},providedIn:"root"}),e})();class Lh{parse(t){const n=new Ax(t);return new ci(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${qo(t.root,!0)}`,r=function Sx(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Yl(n)}=${Yl(i)}`).join("&"):`${Yl(n)}=${Yl(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function Cx(e){return encodeURI(e)}(t.fragment)}`:""}`}}const Dx=new Lh;function ql(e){return e.segments.map(t=>w0(t)).join("/")}function qo(e,t){if(!e.hasChildren())return ql(e);if(t){const n=e.children[Qe]?qo(e.children[Qe],!1):"",r=[];return on(e.children,(i,s)=>{s!==Qe&&r.push(`${s}:${qo(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function _x(e,t){let n=[];return on(e.children,(r,i)=>{i===Qe&&(n=n.concat(t(r,i)))}),on(e.children,(r,i)=>{i!==Qe&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===Qe?[qo(e.children[Qe],!1)]:[`${i}:${qo(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Qe]?`${ql(e)}/${n[0]}`:`${ql(e)}/(${n.join("//")})`}}function D0(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yl(e){return D0(e).replace(/%3B/gi,";")}function Bh(e){return D0(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xl(e){return decodeURIComponent(e)}function C0(e){return Xl(e.replace(/\+/g,"%20"))}function w0(e){return`${Bh(e.path)}${function wx(e){return Object.keys(e).map(t=>`;${Bh(t)}=${Bh(e[t])}`).join("")}(e.parameters)}`}const bx=/^[^\/()?;=#]+/;function Ql(e){const t=e.match(bx);return t?t[0]:""}const Ex=/^[^=?&#]+/,Mx=/^[^&#]+/;class Ax{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Qe]=new ot(t,n)),r}parseSegment(){const t=Ql(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new fe(4009,Kl);return this.capture(t),new Ko(Xl(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Ql(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Ql(this.remaining);i&&(r=i,this.capture(r))}t[Xl(n)]=Xl(r)}parseQueryParam(t){const n=function Ix(e){const t=e.match(Ex);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function Tx(e){const t=e.match(Mx);return t?t[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=C0(n),s=C0(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ql(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new fe(4010,Kl);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Qe);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Qe]:new ot([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new fe(4011,Kl)}}function jh(e){return e.segments.length>0?new ot([],{[Qe]:e}):e}function Jl(e){const t={};for(const r of Object.keys(e.children)){const s=Jl(e.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function xx(e){if(1===e.numberOfChildren&&e.children[Qe]){const t=e.children[Qe];return new ot(e.segments.concat(t.segments),t.children)}return e}(new ot(e.segments,t))}function Oi(e){return e instanceof ci}const Uh=!1;function Rx(e,t,n,r,i){if(0===n.length)return Rs(t.root,t.root,t.root,r,i);const s=function M0(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new I0(!0,0,e);let t=0,n=!1;const r=e.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return on(s.outlets,(u,d)=>{a[d]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new I0(n,t,r)}(n);return s.toRoot()?Rs(t.root,t.root,new ot([],{}),r,i):function o(u){const d=function Ox(e,t,n,r){if(e.isAbsolute)return new Ps(t.root,!0,0);if(-1===r)return new Ps(n,n===t.root,0);return function T0(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new fe(4005,Uh&&"Invalid number of '../'");i=r.segments.length}return new Ps(r,!1,i-s)}(n,r+(Yo(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,t,e.snapshot?._urlSegment,u),p=d.processChildren?Os(d.segmentGroup,d.index,s.commands):Hh(d.segmentGroup,d.index,s.commands);return Rs(t.root,d.segmentGroup,p,r,i)}(e.snapshot?._lastPathIndex)}function Yo(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Xo(e){return"object"==typeof e&&null!=e&&e.outlets}function Rs(e,t,n,r,i){let o,s={};r&&on(r,(u,d)=>{s[d]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`}),o=e===t?n:E0(e,t,n);const a=jh(Jl(o));return new ci(a,s,i)}function E0(e,t,n){const r={};return on(e.children,(i,s)=>{r[s]=i===t?n:E0(i,t,n)}),new ot(e.segments,r)}class I0{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Yo(r[0]))throw new fe(4003,Uh&&"Root segment cannot have matrix parameters");const i=r.find(Xo);if(i&&i!==p0(r))throw new fe(4004,Uh&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ps{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function Hh(e,t,n){if(e||(e=new ot([],{})),0===e.segments.length&&e.hasChildren())return Os(e,t,n);const r=function Nx(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const o=e.segments[i],a=n[r];if(Xo(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!x0(u,d,o))return s;r+=2}else{if(!x0(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new ot(e.segments.slice(0,r.pathIndex),{});return s.children[Qe]=new ot(e.segments.slice(r.pathIndex),e.children),Os(s,0,i)}return r.match&&0===i.length?new ot(e.segments,{}):r.match&&!e.hasChildren()?Vh(e,t,n):r.match?Os(e,0,i):Vh(e,t,n)}function Os(e,t,n){if(0===n.length)return new ot(e.segments,{});{const r=function Fx(e){return Xo(e[0])?e[0].outlets:{[Qe]:e}}(n),i={};return!r[Qe]&&e.children[Qe]&&1===e.numberOfChildren&&0===e.children[Qe].segments.length?Os(e.children[Qe],t,n):(on(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Hh(e.children[o],t,s))}),on(e.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ot(e.segments,i))}}function Vh(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(Xo(s)){const u=kx(s.outlets);return new ot(r,u)}if(0===i&&Yo(n[0])){r.push(new Ko(e.segments[t].path,A0(n[0]))),i++;continue}const o=Xo(s)?s.outlets[Qe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Yo(a)?(r.push(new Ko(o,A0(a))),i+=2):(r.push(new Ko(o,{})),i++)}return new ot(r,{})}function kx(e){const t={};return on(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=Vh(new ot([],{}),0,n))}),t}function A0(e){const t={};return on(e,(n,r)=>t[r]=`${n}`),t}function x0(e,t,n){return e==n.path&&Ir(t,n.parameters)}const Qo="imperative";class Mr{constructor(t,n){this.id=t,this.url=n}}class $h extends Mr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fi extends Mr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eu extends Mr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tu extends Mr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class Gh extends Mr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lx extends Mr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bx extends Mr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jx extends Mr{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ux extends Mr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hx extends Mr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vx{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $x{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gx{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zx{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wx{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kx{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R0{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Yx=(()=>{class e{createUrlTree(n,r,i,s,o,a){return Rx(n||r.root,i,s,o,a)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})(),Qx=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(t){return Yx.\u0275fac(t)},providedIn:"root"}),e})();class P0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=zh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=zh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Wh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Wh(t,this._root).map(n=>n.value)}}function zh(e,t){if(e===t.value)return t;for(const n of t.children){const r=zh(e,n);if(r)return r}return null}function Wh(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Wh(e,n);if(r.length)return r.unshift(t),r}return[]}class Zr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Fs(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class O0 extends P0{constructor(t,n){super(t),this.snapshot=n,Kh(this,t)}toString(){return this.snapshot.toString()}}function F0(e,t){const n=function Jx(e,t){const o=new nu([],{},{},"",{},Qe,t,null,e.root,-1,{});return new k0("",new Zr(o,[]))}(e,t),r=new pr([new Ko("",{})]),i=new pr({}),s=new pr({}),o=new pr({}),a=new pr(""),u=new Ns(r,i,o,a,s,Qe,t,n.root);return u.snapshot=n.root,new O0(new Zr(u,[]),n)}class Ns{constructor(t,n,r,i,s,o,a,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(W(d=>d[Wo]))??$e(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(W(t=>xs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(W(t=>xs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function N0(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function eR(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class nu{get title(){return this.data?.[Wo]}constructor(t,n,r,i,s,o,a,u,d,p,_){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=d,this._lastPathIndex=p,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class k0 extends P0{constructor(t,n){super(n),this.url=t,Kh(this,n)}toString(){return L0(this._root)}}function Kh(e,t){t.value._routerState=e,t.children.forEach(n=>Kh(e,n))}function L0(e){const t=e.children.length>0?` { ${e.children.map(L0).join(", ")} } `:"";return`${e.value}${t}`}function Zh(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ir(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ir(t.params,n.params)||e.params.next(n.params),function px(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ir(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ir(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function qh(e,t){const n=Ir(e.params,t.params)&&function yx(e,t){return Pi(e,t)&&e.every((n,r)=>Ir(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||qh(e.parent,t.parent))}function Jo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function nR(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Jo(e,r,i);return Jo(e,r)})}(e,t,n);return new Zr(r,i)}{if(e.shouldAttach(t.value)){const s=e.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Jo(e,a)),o}}const r=function rR(e){return new Ns(new pr(e.url),new pr(e.params),new pr(e.queryParams),new pr(e.fragment),new pr(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(s=>Jo(e,s));return new Zr(r,i)}}const Yh="ngNavigationCancelingError";function B0(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=Oi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=j0(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function j0(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Yh]=!0,r.cancellationCode=t,n&&(r.url=n),r}function U0(e){return H0(e)&&Oi(e.url)}function H0(e){return e&&e[Yh]}class iR{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ea,this.attachRef=null}}let ea=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new iR,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ru=!1;let V0=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qe,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=ve(ea),this.location=ve(cr),this.changeDetector=ve(Jd),this.environmentInjector=ve(Lr)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,ru);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,ru);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,ru);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new fe(4013,ru);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new sR(n,a,i.injector);if(r&&function oR(e){return!!e.resolveComponentFactory}(r)){const d=r.resolveComponentFactory(o);this.activated=i.createComponent(d,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=vn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yi]}),e})();class sR{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ns?this.route:t===ea?this.childContexts:this.parent.get(t,n)}}let Xh=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Vi({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zv],decls:1,vars:0,template:function(n,r){1&n&&Ei(0,"router-outlet")},dependencies:[V0],encapsulation:2}),e})();function $0(e,t){return e.providers&&!e._injector&&(e._injector=yl(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Jh(e){const t=e.children&&e.children.map(Jh),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Qe&&(n.component=Xh),n}function Xn(e){return e.outlet||Qe}function G0(e,t){const n=e.filter(r=>Xn(r)===t);return n.push(...e.filter(r=>Xn(r)!==t)),n}function ta(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class dR{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Zh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Fs(n);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),on(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Fs(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Fs(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=Fs(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Kx(s.value.snapshot))}),t.children.length&&this.forwardEvent(new zx(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(Zh(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Zh(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=ta(i.snapshot),u=a?.get(Do)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,r)}}class z0{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class iu{constructor(t,n){this.component=t,this.route=n}}function hR(e,t,n){const r=e._root;return na(r,t?t._root:null,n,[r.value])}function ks(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function Pu(e){return null!==Hi(e)}(e)?t.get(e):e:r}function na(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Fs(t);return e.children.forEach(o=>{(function pR(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function gR(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Pi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Pi(e.url,t.url)||!Ir(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qh(e,t)||!Ir(e.queryParams,t.queryParams);default:return!qh(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new z0(r)):(s.data=o.data,s._resolvedData=o._resolvedData),na(e,t,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new iu(a.outlet.component,o))}else o&&ra(t,a,i),i.canActivateChecks.push(new z0(r)),na(e,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),on(s,(o,a)=>ra(o,n.getContext(a),i)),i}function ra(e,t,n){const r=Fs(e),i=e.value;on(r,(s,o)=>{ra(s,i.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new iu(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function ia(e){return"function"==typeof e}function ef(e){return e instanceof zl||"EmptyError"===e?.name}const su=Symbol("INITIAL_VALUE");function Ls(){return Er(e=>s0(e.map(t=>t.pipe(zo(1),function ax(...e){const t=gi(e);return ht((n,r)=>{(t?Oh(e,n,t):Oh(e,n)).subscribe(r)})}(su)))).pipe(W(t=>{for(const n of t)if(!0!==n){if(n===su)return su;if(!1===n||n instanceof ci)return n}return!0}),oi(t=>t!==su),zo(1)))}function W0(e){return function b(...e){return T(e)}(fn(t=>{if(Oi(t))throw B0(0,t)}),W(t=>!0===t))}const tf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function K0(e,t,n,r,i){const s=nf(e,t,n);return s.matched?function PR(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?$e(i.map(o=>{const a=ks(o,e);return ui(function CR(e){return e&&ia(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(Ls(),W0()):$e(!0)}(r=$0(t,r),t,n).pipe(W(o=>!0===o?s:{...tf})):$e(s)}function nf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...tf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||fx)(n,e,t);if(!i)return{...tf};const s={};on(i.posParams,(a,u)=>{s[u]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function ou(e,t,n,r){if(n.length>0&&function NR(e,t,n){return n.some(r=>au(e,t,r)&&Xn(r)!==Qe)}(e,n,r)){const s=new ot(t,function FR(e,t,n,r){const i={};i[Qe]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Xn(s)!==Qe){const o=new ot([],{});o._sourceSegment=e,o._segmentIndexShift=t.length,i[Xn(s)]=o}return i}(e,t,r,new ot(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function kR(e,t,n){return n.some(r=>au(e,t,r))}(e,n,r)){const s=new ot(e.segments,function OR(e,t,n,r,i){const s={};for(const o of r)if(au(e,n,o)&&!i[Xn(o)]){const a=new ot([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,s[Xn(o)]=a}return{...i,...s}}(e,t,n,r,e.children));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const i=new ot(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function au(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Z0(e,t,n,r){return!!(Xn(e)===r||r!==Qe&&au(t,n,e))&&("**"===e.path||nf(t,e,n).matched)}function q0(e,t,n){return 0===t.length&&!e.children[n]}const lu=!1;class uu{constructor(t){this.segmentGroup=t||null}}class Y0{constructor(t){this.urlTree=t}}function sa(e){return Go(new uu(e))}function X0(e){return Go(new Y0(e))}class UR{constructor(t,n,r,i,s){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const t=ou(this.urlTree.root,[],[],this.config).segmentGroup,n=new ot(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,Qe).pipe(W(s=>this.createUrlTree(Jl(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(li(s=>{if(s instanceof Y0)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof uu?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Qe).pipe(W(i=>this.createUrlTree(Jl(i),t.queryParams,t.fragment))).pipe(li(i=>{throw i instanceof uu?this.noMatchError(i):i}))}noMatchError(t){return new fe(4002,lu)}createUrlTree(t,n,r){const i=jh(t);return new ci(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(W(s=>new ot([],s))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return jt(i).pipe(Ri(s=>{const o=r.children[s],a=G0(n,s);return this.expandSegmentGroup(t,a,o,s).pipe(W(u=>({segment:u,outlet:s})))}),c0((s,o)=>(s[o.outlet]=o.segment,s),{}),d0())}expandSegment(t,n,r,i,s,o){return jt(r).pipe(Ri(a=>this.expandSegmentAgainstRoute(t,n,r,a,i,s,o).pipe(li(d=>{if(d instanceof uu)return $e(null);throw d}))),ai(a=>!!a),li((a,u)=>{if(ef(a))return q0(n,i,s)?$e(new ot([],{})):sa(n);throw a}))}expandSegmentAgainstRoute(t,n,r,i,s,o,a){return Z0(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o):sa(n):sa(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?X0(s):this.lineralizeSegments(r,s).pipe(Lt(o=>{const a=new ot(o,{});return this.expandSegment(t,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:p}=nf(n,i,s);if(!a)return sa(n);const _=this.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?X0(_):this.lineralizeSegments(i,_).pipe(Lt(E=>this.expandSegment(t,n,r,E.concat(d),o,!1)))}matchSegmentAgainstRoute(t,n,r,i,s){return"**"===r.path?(t=$0(r,t),r.loadChildren?(r._loadedRoutes?$e({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(W(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ot(i,{})))):$e(new ot(i,{}))):K0(n,r,i,t).pipe(Er(({matched:o,consumedSegments:a,remainingSegments:u})=>o?this.getChildConfig(t=r._injector??t,r,i).pipe(Lt(p=>{const _=p.injector??t,E=p.routes,{segmentGroup:O,slicedSegments:H}=ou(n,a,u,E),K=new ot(O.segments,O.children);if(0===H.length&&K.hasChildren())return this.expandChildren(_,E,K).pipe(W(X=>new ot(a,X)));if(0===E.length&&0===H.length)return $e(new ot(a,{}));const Y=Xn(r)===s;return this.expandSegment(_,K,E,H,Y?Qe:s,!0).pipe(W(be=>new ot(a.concat(be.segments),be.children)))})):sa(n)))}getChildConfig(t,n,r){return n.children?$e({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?$e({routes:n._loadedRoutes,injector:n._loadedInjector}):function RR(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?$e(!0):$e(i.map(o=>{const a=ks(o,e);return ui(function vR(e){return e&&ia(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(Ls(),W0())}(t,n,r).pipe(Lt(i=>i?this.configLoader.loadChildren(t,n).pipe(fn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function BR(e){return Go(j0(lu,3))}())):$e({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $e(r);if(i.numberOfChildren>1||!i.children[Qe])return t.redirectTo,Go(new fe(4e3,lu));i=i.children[Qe]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const s=this.createSegmentGroup(t,n.root,r,i);return new ci(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return on(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(t,n,r,i){const s=this.createSegments(t,n.segments,r,i);let o={};return on(n.children,(a,u)=>{o[u]=this.createSegmentGroup(t,a,r,i)}),new ot(s,o)}createSegments(t,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new fe(4001,lu);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class VR{}class zR{constructor(t,n,r,i,s,o,a){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=ou(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Qe).pipe(W(n=>{if(null===n)return null;const r=new nu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Zr(r,n),s=new k0(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const n=t.value,r=N0(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return jt(Object.keys(r.children)).pipe(Ri(i=>{const s=r.children[i],o=G0(n,i);return this.processSegmentGroup(t,o,s,i)}),c0((i,s)=>i&&s?(i.push(...s),i):null),function cx(e,t=!1){return ht((n,r)=>{let i=0;n.subscribe(et(r,s=>{const o=e(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),Wl(null),d0(),W(i=>{if(null===i)return null;const s=J0(i);return function WR(e){e.sort((t,n)=>t.value.outlet===Qe?-1:n.value.outlet===Qe?1:t.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(t,n,r,i,s){return jt(n).pipe(Ri(o=>this.processSegmentAgainstRoute(o._injector??t,o,r,i,s)),ai(o=>!!o),li(o=>{if(ef(o))return q0(r,i,s)?$e([]):$e(null);throw o}))}processSegmentAgainstRoute(t,n,r,i,s){if(n.redirectTo||!Z0(n,r,i,s))return $e(null);let o;if("**"===n.path){const a=i.length>0?p0(i).parameters:{},u=tD(r)+i.length;o=$e({snapshot:new nu(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nD(n),Xn(n),n.component??n._loadedComponent??null,n,eD(r),u,rD(n)),consumedSegments:[],remainingSegments:[]})}else o=K0(r,n,i,t).pipe(W(({matched:a,consumedSegments:u,remainingSegments:d,parameters:p})=>{if(!a)return null;const _=tD(r)+u.length;return{snapshot:new nu(u,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nD(n),Xn(n),n.component??n._loadedComponent??null,n,eD(r),_,rD(n)),consumedSegments:u,remainingSegments:d}}));return o.pipe(Er(a=>{if(null===a)return $e(null);const{snapshot:u,consumedSegments:d,remainingSegments:p}=a;t=n._injector??t;const _=n._loadedInjector??t,E=function KR(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:O,slicedSegments:H}=ou(r,d,p,E.filter(Y=>void 0===Y.redirectTo));if(0===H.length&&O.hasChildren())return this.processChildren(_,E,O).pipe(W(Y=>null===Y?null:[new Zr(u,Y)]));if(0===E.length&&0===H.length)return $e([new Zr(u,[])]);const K=Xn(n)===s;return this.processSegment(_,E,O,H,K?Qe:s).pipe(W(Y=>null===Y?null:[new Zr(u,Y)]))}))}}function ZR(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function J0(e){const t=[],n=new Set;for(const r of e){if(!ZR(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=J0(r.children);t.push(new Zr(r.value,i))}return t.filter(r=>!n.has(r))}function eD(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function tD(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function nD(e){return e.data||{}}function rD(e){return e.resolve||{}}function iD(e){return"string"==typeof e.title||null===e.title}function rf(e){return Er(t=>{const n=e(t);return n?jt(n).pipe(W(()=>t)):$e(t)})}const Bs=new ze("ROUTES");let sf=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ve(Ny)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $e(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ui(n.loadComponent()).pipe(W(oD),fn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),kh(()=>{this.componentLoaders.delete(n)})),i=new l0(r,()=>new ke).pipe(Fh());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $e({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(W(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,d,p=!1;Array.isArray(a)?d=a:(u=a.create(n).injector,d=f0(u.get(Bs,[],g.Self|g.Optional)));return{routes:d.map(Jh),injector:u}}),kh(()=>{this.childrenLoaders.delete(r)})),o=new l0(s,()=>new ke).pipe(Fh());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return ui(n()).pipe(W(oD),Lt(r=>r instanceof Wv||Array.isArray(r)?$e(r):jt(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function oD(e){return function nP(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let du=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ke,this.configLoader=ve(sf),this.environmentInjector=ve(Lr),this.urlSerializer=ve(Zo),this.rootContexts=ve(ea),this.navigationId=0,this.afterPreactivation=()=>$e(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new $x(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Vx(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new pr({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qo,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oi(r=>0!==r.id),W(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),Er(r=>{let i=!1,s=!1;return $e(r).pipe(fn(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Er(o=>{const a=n.browserUrlTree.toString(),u=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const p="";return this.events.next(new tu(o.id,n.serializeUrl(r.rawUrl),p,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),zn}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return aD(o.source)&&(n.browserUrlTree=o.extractedUrl),$e(o).pipe(Er(p=>{const _=this.transitions?.getValue();return this.events.next(new $h(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?zn:Promise.resolve(p)}),function HR(e,t,n,r){return Er(i=>function jR(e,t,n,r,i){return new UR(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(W(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),fn(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},r.urlAfterRedirects=p.urlAfterRedirects}),function YR(e,t,n,r,i){return Lt(s=>function GR(e,t,n,r,i,s,o="emptyOnly"){return new zR(e,t,n,r,i,o,s).recognize().pipe(Er(a=>null===a?function $R(e){return new R(t=>t.error(e))}(new VR):$e(a)))}(e,t,n,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(W(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),fn(p=>{if(r.targetSnapshot=p.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!p.extras.skipLocationChange){const E=n.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);n.setBrowserUrl(E,p)}n.browserUrlTree=p.urlAfterRedirects}const _=new Lx(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:p,extractedUrl:_,source:E,restoredState:O,extras:H}=o,K=new $h(p,this.urlSerializer.serialize(_),E,O);this.events.next(K);const Y=F0(_,this.rootComponentType).snapshot;return $e(r={...o,targetSnapshot:Y,urlAfterRedirects:_,extras:{...H,skipLocationChange:!1,replaceUrl:!1}})}{const p="";return this.events.next(new tu(o.id,n.serializeUrl(r.extractedUrl),p,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),zn}}),fn(o=>{const a=new Bx(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),W(o=>r={...o,guards:hR(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function SR(e,t){return Lt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?$e({...n,guardsResult:!0}):function bR(e,t,n,r){return jt(e).pipe(Lt(i=>function xR(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?$e(s.map(a=>{const u=ta(t)??i,d=ks(a,u);return ui(function DR(e){return e&&ia(e.canDeactivate)}(d)?d.canDeactivate(e,t,n,r):u.runInContext(()=>d(e,t,n,r))).pipe(ai())})).pipe(Ls()):$e(!0)}(i.component,i.route,n,t,r)),ai(i=>!0!==i,!0))}(o,r,i,e).pipe(Lt(a=>a&&function mR(e){return"boolean"==typeof e}(a)?function ER(e,t,n,r){return jt(t).pipe(Ri(i=>Oh(function MR(e,t){return null!==e&&t&&t(new Gx(e)),$e(!0)}(i.route.parent,r),function IR(e,t){return null!==e&&t&&t(new Wx(e)),$e(!0)}(i.route,r),function AR(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function fR(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(o)).filter(o=>null!==o).map(o=>a0(()=>$e(o.guards.map(u=>{const d=ta(o.node)??n,p=ks(u,d);return ui(function _R(e){return e&&ia(e.canActivateChild)}(p)?p.canActivateChild(r,e):d.runInContext(()=>p(r,e))).pipe(ai())})).pipe(Ls())));return $e(s).pipe(Ls())}(e,i.path,n),function TR(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return $e(!0);const i=r.map(s=>a0(()=>{const o=ta(t)??n,a=ks(s,o);return ui(function yR(e){return e&&ia(e.canActivate)}(a)?a.canActivate(t,e):o.runInContext(()=>a(t,e))).pipe(ai())}));return $e(i).pipe(Ls())}(e,i.route,n))),ai(i=>!0!==i,!0))}(r,s,e,t):$e(a)),W(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),fn(o=>{if(r.guardsResult=o.guardsResult,Oi(o.guardsResult))throw B0(0,o.guardsResult);const a=new jx(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),oi(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),rf(o=>{if(o.guards.canActivateChecks.length)return $e(o).pipe(fn(a=>{const u=new Ux(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Er(a=>{let u=!1;return $e(a).pipe(function XR(e,t){return Lt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $e(n);let s=0;return jt(i).pipe(Ri(o=>function QR(e,t,n,r){const i=e.routeConfig,s=e._resolve;return void 0!==i?.title&&!iD(i)&&(s[Wo]=i.title),function JR(e,t,n,r){const i=function eP(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return $e({});const s={};return jt(i).pipe(Lt(o=>function tP(e,t,n,r){const i=ta(t)??r,s=ks(e,i);return ui(s.resolve?s.resolve(t,n):i.runInContext(()=>s(t,n)))}(e[o],t,n,r).pipe(ai(),fn(a=>{s[o]=a}))),Nh(1),function dx(e){return W(()=>e)}(s),li(o=>ef(o)?zn:Go(o)))}(s,e,t,r).pipe(W(o=>(e._resolvedData=o,e.data=N0(e,n).resolve,i&&iD(i)&&(e.data[Wo]=i.title),null)))}(o.route,r,e,t)),fn(()=>s++),Nh(1),Lt(o=>s===i.length?$e(n):zn))})}(n.paramsInheritanceStrategy,this.environmentInjector),fn({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),fn(a=>{const u=new Hx(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),rf(o=>{const a=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(fn(p=>{u.component=p}),W(()=>{})));for(const p of u.children)d.push(...a(p));return d};return s0(a(o.targetSnapshot.root)).pipe(Wl(),zo(1))}),rf(()=>this.afterPreactivation()),W(o=>{const a=function tR(e,t,n){const r=Jo(e,t._root,n?n._root:void 0);return new O0(r,t)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),fn(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((e,t,n)=>W(r=>(new dR(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o)),fn({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Fi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),kh(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),li(o=>{if(s=!0,H0(o)){U0(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new eu(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),U0(o)){const u=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||aD(r.source)};n.scheduleNavigation(u,Qo,null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new Gh(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(u){r.reject(u)}}return zn}))}))}cancelNavigationTransition(n,r,i){const s=new eu(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function aD(e){return e!==Qo}let lD=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Qe);return r}getResolvedTitleForRoute(n){return n.data[Wo]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(){return ve(rP)},providedIn:"root"}),e})(),rP=(()=>{class e extends lD{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(ee(t0))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),iP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(){return ve(oP)},providedIn:"root"}),e})();class sP{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let oP=(()=>{class e extends sP{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function gp(e){return Ht(()=>{const t=e.prototype.constructor,n=t[Pr]||nc(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const s=i[Pr]||nc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(e)))(r||e)}}(),e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const hu=new ze("",{providedIn:"root",factory:()=>({})});let lP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:function(){return ve(uP)},providedIn:"root"}),e})(),uP=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function cP(e){throw e}function dP(e,t,n){return t.parse("/")}const hP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vn=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ve(LM),this.isNgZoneEnabled=!1,this.options=ve(hu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||cP,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||dP,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ve(lP),this.routeReuseStrategy=ve(iP),this.urlCreationStrategy=ve(Qx),this.titleStrategy=ve(lD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=f0(ve(Bs,{optional:!0})??[]),this.navigationTransitions=ve(du),this.urlSerializer=ve(Zo),this.location=ve(lh),this.isNgZoneEnabled=ve(Gt)instanceof Gt&&Gt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ci,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=F0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qo,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,p,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Oi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Qo,null,r)}navigate(n,r={skipLocationChange:!1}){return function pP(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new fe(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...hP}:!1===r?{...fP}:r,Oi(n))return m0(this.currentUrlTree,n,i);const s=this.parseUrl(n);return m0(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d,p;return o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((_,E)=>{a=_,u=E}),p="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:p,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(_=>Promise.reject(_))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class uD{}let vP=(()=>{class e{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(oi(n=>n instanceof Fi),Ri(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=yl(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return jt(i).pipe(Rr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):$e(null);const s=i.pipe(Lt(o=>null===o?$e(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?jt([s,this.loader.loadComponent(r)]).pipe(Rr()):s})}}return e.\u0275fac=function(n){return new(n||e)(ee(Vn),ee(Ny),ee(Lr),ee(uD),ee(sf))},e.\u0275prov=Ge({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const uf=new ze("");let cD=(()=>{class e{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof $h?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Fi&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof R0&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new R0(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function Gg(){throw new Error("invalid")}()},e.\u0275prov=Ge({token:e,factory:e.\u0275fac}),e})();var $n=(()=>(($n=$n||{})[$n.COMPLETE=0]="COMPLETE",$n[$n.FAILED=1]="FAILED",$n[$n.REDIRECTING=2]="REDIRECTING",$n))();const js=!1;function di(e,t){return{\u0275kind:e,\u0275providers:t}}const cf=new ze("",{providedIn:"root",factory:()=>!1});function hD(){const e=ve(Ur);return t=>{const n=e.get(Il);if(t!==n.components[0])return;const r=e.get(Vn),i=e.get(fD);1===e.get(df)&&r.initialNavigation(),e.get(pD,null,g.Optional)?.setUpPreloading(),e.get(uf,null,g.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const fD=new ze(js?"bootstrap done indicator":"",{factory:()=>new ke}),df=new ze(js?"initial navigation":"",{providedIn:"root",factory:()=>1});function wP(){let e=[];return e=js?[{provide:Xa,multi:!0,useFactory:()=>{const t=ve(Vn);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function Zx(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],di(1,e)}const pD=new ze(js?"router preloader":"");function SP(e){return di(0,[{provide:pD,useExisting:vP},{provide:uD,useExisting:e}])}const oa=!1,gD=new ze(oa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),bP=[lh,{provide:Zo,useClass:Lh},Vn,ea,{provide:Ns,useFactory:function dD(e){return e.routerState.root},deps:[Vn]},sf,oa?{provide:cf,useValue:!0}:[]];function EP(){return new $y("Router",Vn)}let mD=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[bP,oa&&r?.enableTracing?wP().\u0275providers:[],{provide:Bs,multi:!0,useValue:n},{provide:gD,useFactory:AP,deps:[[Vn,new uo,new co]]},{provide:hu,useValue:r||{}},r?.useHash?{provide:xi,useClass:b1}:{provide:xi,useClass:h_},{provide:uf,useFactory:()=>{const e=ve($T),t=ve(Gt),n=ve(hu),r=ve(du),i=ve(Zo);return n.scrollOffset&&e.setOffset(n.scrollOffset),new cD(i,r,e,t,n)}},r?.preloadingStrategy?SP(r.preloadingStrategy).\u0275providers:[],{provide:$y,multi:!0,useFactory:EP},r?.initialNavigation?xP(r):[],[{provide:vD,useFactory:hD},{provide:Vy,multi:!0,useExisting:vD}]]}}static forChild(n){return{ngModule:e,providers:[{provide:Bs,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(ee(gD,8))},e.\u0275mod=ei({type:e}),e.\u0275inj=rr({imports:[Xh]}),e})();function AP(e){if(oa&&e)throw new fe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function xP(e){return["disabled"===e.initialNavigation?di(3,[{provide:Sl,multi:!0,useFactory:()=>{const t=ve(Vn);return()=>{t.setUpLocationChangeListener()}}},{provide:df,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?di(2,[{provide:df,useValue:0},{provide:Sl,multi:!0,deps:[Ur],useFactory:t=>{const n=t.get(w1,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(Vn),s=t.get(fD);(function yP(e,t){e.events.pipe(oi(n=>n instanceof Fi||n instanceof eu||n instanceof Gh||n instanceof tu),W(n=>n instanceof Fi||n instanceof tu?$n.COMPLETE:n instanceof eu&&(0===n.code||1===n.code)?$n.REDIRECTING:$n.FAILED),oi(n=>n!==$n.REDIRECTING),zo(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(du).afterPreactivation=()=>(r(!0),s.closed?$e(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const vD=new ze(oa?"Router Initializer":""),PP=[];let OP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=rr({imports:[mD.forRoot(PP),mD]}),e})();function yD(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(d){return void n(d)}a.done?t(u):Promise.resolve(u).then(r,i)}var fu=Ce(918),NP=Ce(229);const kP=["opacityInput"];function LP(e,t){1&e&&Ei(0,"img",13),2&e&&wr("src",t.$implicit,Oc)}function BP(e,t){if(1&e){const n=pd();$t(0,"div",14)(1,"h3"),Cn(2,"Actions for selected image:"),Yt(),$t(3,"div",15)(4,"p",16),Cn(5,"Layer Priority"),Yt(),$t(6,"button",17),Vr("click",function(){qi(n);const i=Ss();return Yi(i.handlePriorityChange(i.priorityAction.Increase))}),Cn(7," Increase Priority "),Yt(),$t(8,"button",18),Vr("click",function(){qi(n);const i=Ss();return Yi(i.handlePriorityChange(i.priorityAction.Decrease))}),Cn(9," Decrease Priority "),Yt()(),$t(10,"div",19)(11,"p",16),Cn(12,"Layer Opacity (0-1)"),Yt(),$t(13,"div",20),Ei(14,"input",21,22),$t(16,"button",23),Vr("click",function(){return qi(n),Yi(Ss().setOpacity())}),Cn(17," Apply "),Yt()()(),$t(18,"div",24)(19,"button",25),Vr("click",function(){return qi(n),Yi(Ss().deleteImage())}),Cn(20," Delete selected Object "),Yt()()()}if(2&e){const n=Ss();jr(6),wr("disabled",!n.isPriorityButtonActive(n.priorityAction.Increase)),jr(2),wr("disabled",!n.isPriorityButtonActive(n.priorityAction.Decrease)),jr(6),wr("disabled",!n.isOpacityButtonActive()),jr(2),wr("disabled",!n.isOpacityButtonActive()),jr(3),wr("disabled",!n.isDeleteButtonActive())}}var pu=(()=>{return(e=pu||(pu={})).ClickTap="click tap",e.KeyDown="keydown",pu;var e})(),Ni=(()=>{return(e=Ni||(Ni={})).Increase="increase",e.Decrease="decrease",Ni;var e})();let jP=(()=>{class e{constructor(){this._imageOffset=50,this.priorityAction=Ni,this.imageUrls=[],this.resultImageName="stage.png",this.imageObjectName="image",this.defaultBackgroundColor="#FFFFFF",this.defaultNewImagePositionOffset=50,this.convertBase64=n=>new Promise((r,i)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=()=>{r(s.result)},s.onerror=o=>{i(o)}})}getBackground(){return this._backgrounLayer=new fu.default.Rect({x:0,y:0,width:this._stage?.width(),height:this._stage?.height(),fill:this.defaultBackgroundColor,draggable:!1}),this._backgrounLayer.zIndex(0),this._backgrounLayer}ngOnInit(){this._stage=new NP.H({container:"container",width:1e3,height:600}),this._layer=new fu.default.Layer,this._stage.add(this._layer),this._layer.add(this.getBackground()),this._transformer=new fu.default.Transformer({nodes:[],keepRatio:!1,boundBoxFunc:(n,r)=>r.width<10||r.height<10?n:r}),this._transformer.zIndex(0),this._layer?.add(this._transformer),this._stage.on(pu.ClickTap,n=>this.stageOnClickTap(n))}imageOnLoadWrapper(n){return()=>{const r=n.width,i=n.height,o=r>i?r/300:i/300,a=new fu.default.Image({image:n,x:this._imageOffset,y:70,width:r/o,height:i/o,name:this.imageObjectName,draggable:!0});this._imageOffset+=this.defaultNewImagePositionOffset,this._layer?.add(a);const u=this._transformer?.zIndex();u&&this._transformer?.zIndex(u+1),this._transformer?.nodes([a]),this.lastSelectedImage=a,this.opacityInput?.nativeElement.setAttribute("value","1")}}stageOnClickTap(n){if(n.target===this._backgrounLayer)return this.clearSelectedNodes(),this.lastSelectedImage=void 0,void this.opacityInput?.nativeElement.setAttribute("value","1");if(!n.target.hasName(this.imageObjectName))return;const r=this._transformer?.zIndex();r&&this._transformer?.zIndex(r+1),this._transformer?.nodes([n.target]),this.lastSelectedImage=n.target;const i=this.lastSelectedImage?.opacity();i&&this.opacityInput?.nativeElement.setAttribute("value",String(i))}clearSelectedNodes(){this._transformer?.nodes([])}exportImage(){const n=this.resultImageName;this.clearSelectedNodes();const r=this._stage?.toDataURL({pixelRatio:3});var i=document.createElement("a");i.download=n,r&&(i.href=r,document.body.appendChild(i),i.click(),document.body.removeChild(i))}deleteImage(){this.lastSelectedImage?.destroy(),this.clearSelectedNodes(),this.lastSelectedImage=void 0}isPriorityButtonActive(n){if(!this.lastSelectedImage)return!1;const r=this.lastSelectedImage.zIndex();return!(n===Ni.Decrease&&r-1==0)}isOpacityButtonActive(){return!!this.lastSelectedImage}isDeleteButtonActive(){return!!this.lastSelectedImage}setOpacity(){if(!this.lastSelectedImage)return;const n=this.opacityInput?.nativeElement.value;n&&this.lastSelectedImage.opacity(Number(n))}handlePriorityChange(n){if(!this.lastSelectedImage)return;const r=this.lastSelectedImage.zIndex();switch(n){case Ni.Increase:return void this.lastSelectedImage.zIndex(r+1);case Ni.Decrease:return void this.lastSelectedImage.zIndex(r-1)}}processFile(n){var r=this;return function FP(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(u){yD(s,r,i,o,a,"next",u)}function a(u){yD(s,r,i,o,a,"throw",u)}o(void 0)})}}(function*(){r.clearSelectedNodes();const i=n.files[0],s=yield r.convertBase64(i);r.imageUrls.push(s);const a=(window.webkitURL||window.URL).createObjectURL(i),u=new Image;u.src=a,u.onload=r.imageOnLoadWrapper(u)})()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Vi({type:e,selectors:[["app-native-image-manipulator"]],viewQuery:function(n,r){if(1&n&&dy(kP,5),2&n){let i;Fo(i=function No(){return function gM(e,t){return e[mr].queries[t].queryList}(J(),qf())}())&&(r.opacityInput=i.first)}},decls:22,vars:2,consts:[[1,"main-container"],[1,"title"],[1,"description"],[1,"file-wrapper"],["type","file","accept","image/*","id","actual-btn","onclick","this.value=null;","hidden","",3,"change"],["imageInput",""],["for","actual-btn",1,"upload-button","btn"],[1,"availableImages"],["alt","",3,"src",4,"ngFor","ngForOf"],[1,"preview"],[1,"export-btn","btn",3,"click"],["id","container"],["class","actions",4,"ngIf"],["alt","",3,"src"],[1,"actions"],[1,"action","action-priority"],[1,"action-title"],[1,"btn",3,"disabled","click"],[1,"btn","btn-second",3,"disabled","click"],[1,"action","action-opacity"],[1,"opacity-wrapper"],["type","number","max","1","min","0","name","opacity","id","opacity",1,"opacity-input",3,"disabled"],["opacityInput",""],[1,"btn","opacity-btn",3,"disabled","click"],[1,"action","action-delete"],[1,"btn","delete-btn",3,"disabled","click"]],template:function(n,r){if(1&n){const i=pd();$t(0,"div",0)(1,"div")(2,"h2",1),Cn(3,"Demo"),Yt(),$t(4,"p",2),Cn(5,"Image manipulation demo"),Yt(),$t(6,"div",3)(7,"span"),Cn(8,"Select Image"),Yt(),$t(9,"input",4,5),Vr("change",function(){qi(i);const o=function Cm(e){return function Zi(e,t){return e[t]}(function GD(){return Ye.lFrame.contextLView}(),xt+e)}(10);return Yi(r.processFile(o))}),Yt(),$t(11,"label",6),Cn(12,"Choose File"),Yt()(),$t(13,"div",7),cd(14,LP,1,1,"img",8),Yt()(),$t(15,"div")(16,"h3",9),Cn(17," Page preview "),$t(18,"button",10),Vr("click",function(){return r.exportImage()}),Cn(19," Export result image "),Yt()(),Ei(20,"div",11),cd(21,BP,21,5,"div",12),Yt()()}2&n&&(jr(14),wr("ngForOf",r.imageUrls),jr(7),wr("ngIf",!!r.lastSelectedImage))},dependencies:[E_,M_],styles:[".main-container[_ngcontent-%COMP%]{display:flex;background-color:var(--gray);min-height:100vh-20px;padding-top:20px;font-family:sans-serif;width:90%;margin:auto;gap:40px}.title[_ngcontent-%COMP%]{color:var(--primary);font-size:32px;margin-bottom:5px}.description[_ngcontent-%COMP%]{font-weight:400}.description[_ngcontent-%COMP%], .preview[_ngcontent-%COMP%]{color:var(--text-color)}.availableImages[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column;justify-content:start;align-items:center;gap:5px}.availableImages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}.image-upload-container[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.image-upload-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0}.file-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;margin-bottom:1rem}.export-btn[_ngcontent-%COMP%]{margin-left:10px}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:17px;border:0;background-color:var(--primary);color:var(--white);border-radius:4px}.action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start}.action-opacity[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%], .action-priority[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%]{margin-right:10px}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--primary-hover)}.btn[_ngcontent-%COMP%]:disabled{background-color:var(--primary-disabled);cursor:default}.export-btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--primary-hover)}.upload-button[_ngcontent-%COMP%]{margin-left:10px}.upload-button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--primary-hover)}.opacity-btn[_ngcontent-%COMP%], .btn-second[_ngcontent-%COMP%]{margin-left:10px}.opacity-input[_ngcontent-%COMP%]{width:100px;height:34px;border-radius:4px;font-size:17px;border:0;padding-left:10px}.opacity-input[_ngcontent-%COMP%]:disabled{border-bottom:1px solid}.opacity-input[_ngcontent-%COMP%]:focus-visible{outline:0}.delete-btn[_ngcontent-%COMP%]{background-color:var(--error-text);margin-top:10px}.delete-btn[_ngcontent-%COMP%]:hover{background-color:var(--error-hover)}"]}),e})(),UP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Vi({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&Ei(0,"app-native-image-manipulator")},dependencies:[jP],styles:[".root[_ngcontent-%COMP%]{background-color:var(--wo-gray);height:100vh;padding:20px}.preparedImages[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:8px;margin-bottom:20px}canvas[_ngcontent-%COMP%]{width:80%;background-color:var(--wo-white)}.tool[_ngcontent-%COMP%]{width:350px}"]}),e})();typeof window<"u"&&!window.Konva&&Ce(918);let zP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=rr({imports:[R_]}),e})(),WP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ei({type:e,bootstrap:[UP]}),e.\u0275inj=rr({imports:[HA,OP,zP]}),e})();UA().bootstrapModule(WP).catch(e=>console.error(e))},58:(pn,It,Ce)=>{Ce.d(It,{RF:()=>ie,Xz:()=>N,hh:()=>ce});var y,j=Ce(168),$=Ce(400),te=Ce(20),de=Ce(552),we=Ce(904);class N{constructor(ye){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var Je=(ye||{}).pixelRatio||te.So.pixelRatio||function q(){if(y)return y;var Te=j.Z.createCanvasElement(),ye=Te.getContext("2d");return y=(te.So._global.devicePixelRatio||1)/(ye.webkitBackingStorePixelRatio||ye.mozBackingStorePixelRatio||ye.msBackingStorePixelRatio||ye.oBackingStorePixelRatio||ye.backingStorePixelRatio||1),j.Z.releaseCanvas(Te),y}();this.pixelRatio=Je,this._canvas=j.Z.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(ye){var Pe=this.pixelRatio;this.pixelRatio=ye,this.setSize(this.getWidth()/Pe,this.getHeight()/Pe)}setWidth(ye){this.width=this._canvas.width=ye*this.pixelRatio,this._canvas.style.width=ye+"px";var Pe=this.pixelRatio;this.getContext()._context.scale(Pe,Pe)}setHeight(ye){this.height=this._canvas.height=ye*this.pixelRatio,this._canvas.style.height=ye+"px";var Pe=this.pixelRatio;this.getContext()._context.scale(Pe,Pe)}getWidth(){return this.width}getHeight(){return this.height}setSize(ye,Pe){this.setWidth(ye||0),this.setHeight(Pe||0)}toDataURL(ye,Pe){try{return this._canvas.toDataURL(ye,Pe)}catch{try{return this._canvas.toDataURL()}catch(le){return j.Z.error("Unable to get data URL. "+le.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}de.F.addGetterSetter(N,"pixelRatio",void 0,(0,we.Kg)());class ie extends N{constructor(ye={width:0,height:0}){super(ye),this.context=new $.xn(this),this.setSize(ye.width,ye.height)}}class ce extends N{constructor(ye={width:0,height:0}){super(ye),this.hitCanvas=!0,this.context=new $.jR(this),this.setSize(ye.width,ye.height)}}},716:(pn,It,Ce)=>{Ce.d(It,{W:()=>de});var j=Ce(552),$=Ce(96),te=Ce(904);class de extends $.N{constructor(){super(...arguments),this.children=[]}getChildren(y){if(!y)return this.children||[];var N=[];return(this.children||[]).forEach(function(ie){y(ie)&&N.push(ie)}),N}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(y=>{y.parent=null,y.index=0,y.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(y=>{y.parent=null,y.index=0,y.destroy()}),this.children=[],this._requestDraw(),this}add(...y){if(0===y.length)return this;if(y.length>1){for(var q=0;q<y.length;q++)this.add(y[q]);return this}const N=y[0];return N.getParent()?(N.moveTo(this),this):(this._validateAdd(N),N.index=this.getChildren().length,N.parent=this,N._clearCaches(),this.getChildren().push(N),this._fire("add",{child:N}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(y){return this._generalFind(y,!1)}findOne(y){var q=this._generalFind(y,!0);return q.length>0?q[0]:void 0}_generalFind(y,q){var N=[];return this._descendants(ie=>{const ce=ie._isMatch(y);return ce&&N.push(ie),!(!ce||!q)}),N}_descendants(y){let q=!1;const N=this.getChildren();for(const ie of N){if(q=y(ie),q)return!0;if(ie.hasChildren()&&(q=ie._descendants(y),q))return!0}return!1}toObject(){var y=$.N.prototype.toObject.call(this);return y.children=[],this.getChildren().forEach(q=>{y.children.push(q.toObject())}),y}isAncestorOf(y){for(var q=y.getParent();q;){if(q._id===this._id)return!0;q=q.getParent()}return!1}clone(y){var q=$.N.prototype.clone.call(this,y);return this.getChildren().forEach(function(N){q.add(N.clone())}),q}getAllIntersections(y){var q=[];return this.find("Shape").forEach(function(N){N.isVisible()&&N.intersects(y)&&q.push(N)}),q}_clearSelfAndDescendantCache(y){var q;super._clearSelfAndDescendantCache(y),!this.isCached()&&(null===(q=this.children)||void 0===q||q.forEach(function(N){N._clearSelfAndDescendantCache(y)}))}_setChildrenIndices(){var y;null===(y=this.children)||void 0===y||y.forEach(function(q,N){q.index=N}),this._requestDraw()}drawScene(y,q){var N=this.getLayer(),ie=y||N&&N.getCanvas(),ce=ie&&ie.getContext(),Te=this._getCanvasCache(),ye=Te&&Te.scene,Pe=ie&&ie.isCache;if(!this.isVisible()&&!Pe)return this;if(ye){ce.save();var Je=this.getAbsoluteTransform(q).getMatrix();ce.transform(Je[0],Je[1],Je[2],Je[3],Je[4],Je[5]),this._drawCachedSceneCanvas(ce),ce.restore()}else this._drawChildren("drawScene",ie,q);return this}drawHit(y,q){if(!this.shouldDrawHit(q))return this;var N=this.getLayer(),ie=y||N&&N.hitCanvas,ce=ie&&ie.getContext(),Te=this._getCanvasCache();if(Te&&Te.hit){ce.save();var Pe=this.getAbsoluteTransform(q).getMatrix();ce.transform(Pe[0],Pe[1],Pe[2],Pe[3],Pe[4],Pe[5]),this._drawCachedHitCanvas(ce),ce.restore()}else this._drawChildren("drawHit",ie,q);return this}_drawChildren(y,q,N){var ie,ce=q&&q.getContext(),Te=this.clipWidth(),ye=this.clipHeight(),Pe=this.clipFunc(),Je=Te&&ye||Pe;const le=N===this;if(Je){ce.save();var Ne=this.getAbsoluteTransform(N),Oe=Ne.getMatrix();if(ce.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]),ce.beginPath(),Pe)Pe.call(this,ce,this);else{var je=this.clipX(),x=this.clipY();ce.rect(je,x,Te,ye)}ce.clip(),Oe=Ne.copy().invert().getMatrix(),ce.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5])}var S=!le&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===y;S&&(ce.save(),ce._applyGlobalCompositeOperation(this)),null===(ie=this.children)||void 0===ie||ie.forEach(function(I){I[y](q,N)}),S&&ce.restore(),Je&&ce.restore()}getClientRect(y){var q,ce,Te,ye,Pe,Je,N=(y=y||{}).skipTransform,ie=y.relativeTo,le=this;null===(q=this.children)||void 0===q||q.forEach(function(S){if(S.visible()){var I=S.getClientRect({relativeTo:le,skipShadow:y.skipShadow,skipStroke:y.skipStroke});0===I.width&&0===I.height||(void 0===ce?(ce=I.x,Te=I.y,ye=I.x+I.width,Pe=I.y+I.height):(ce=Math.min(ce,I.x),Te=Math.min(Te,I.y),ye=Math.max(ye,I.x+I.width),Pe=Math.max(Pe,I.y+I.height)))}});for(var Ne=this.find("Shape"),Oe=!1,je=0;je<Ne.length;je++)if(Ne[je]._isVisible(this)){Oe=!0;break}return Je=Oe&&void 0!==ce?{x:ce,y:Te,width:ye-ce,height:Pe-Te}:{x:0,y:0,width:0,height:0},N?Je:this._transformedRect(Je,ie)}}j.F.addComponentsGetterSetter(de,"clip",["x","y","width","height"]),j.F.addGetterSetter(de,"clipX",void 0,(0,te.Kg)()),j.F.addGetterSetter(de,"clipY",void 0,(0,te.Kg)()),j.F.addGetterSetter(de,"clipWidth",void 0,(0,te.Kg)()),j.F.addGetterSetter(de,"clipHeight",void 0,(0,te.Kg)()),j.F.addGetterSetter(de,"clipFunc")},400:(pn,It,Ce)=>{Ce.d(It,{_y:()=>le,jR:()=>Oe,xn:()=>Ne});var j=Ce(168),$=Ce(20),ye=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class le{constructor(x){this.canvas=x,$.So.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(x){x.fillEnabled()&&this._fill(x)}_fill(x){}strokeShape(x){x.hasStroke()&&this._stroke(x)}_stroke(x){}fillStrokeShape(x){x.attrs.fillAfterStrokeEnabled?(this.strokeShape(x),this.fillShape(x)):(this.fillShape(x),this.strokeShape(x))}getTrace(x,S){var ue,pe,Me,V,I=this.traceArr,k=I.length,Z="";for(ue=0;ue<k;ue++)(Me=(pe=I[ue]).method)?(V=pe.args,Z+=Me,x?Z+="()":j.Z._isArray(V[0])?Z+="(["+V.join(",")+"])":(S&&(V=V.map(ne=>"number"==typeof ne?Math.floor(ne):ne)),Z+="("+V.join(",")+")")):(Z+=pe.property,x||(Z+="="+pe.val)),Z+=";";return Z}clearTrace(){this.traceArr=[]}_trace(x){var S=this.traceArr;S.push(x),S.length>=100&&S.shift()}reset(){var x=this.getCanvas().getPixelRatio();this.setTransform(1*x,0,0,1*x,0,0)}getCanvas(){return this.canvas}clear(x){var S=this.getCanvas();x?this.clearRect(x.x||0,x.y||0,x.width||0,x.height||0):this.clearRect(0,0,S.getWidth()/S.pixelRatio,S.getHeight()/S.pixelRatio)}_applyLineCap(x){const S=x.attrs.lineCap;S&&this.setAttr("lineCap",S)}_applyOpacity(x){var S=x.getAbsoluteOpacity();1!==S&&this.setAttr("globalAlpha",S)}_applyLineJoin(x){const S=x.attrs.lineJoin;S&&this.setAttr("lineJoin",S)}setAttr(x,S){this._context[x]=S}arc(x,S,I,k,Z,ue){this._context.arc(x,S,I,k,Z,ue)}arcTo(x,S,I,k,Z){this._context.arcTo(x,S,I,k,Z)}beginPath(){this._context.beginPath()}bezierCurveTo(x,S,I,k,Z,ue){this._context.bezierCurveTo(x,S,I,k,Z,ue)}clearRect(x,S,I,k){this._context.clearRect(x,S,I,k)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(x,S){var I=arguments;return 2===I.length?this._context.createImageData(x,S):1===I.length?this._context.createImageData(x):void 0}createLinearGradient(x,S,I,k){return this._context.createLinearGradient(x,S,I,k)}createPattern(x,S){return this._context.createPattern(x,S)}createRadialGradient(x,S,I,k,Z,ue){return this._context.createRadialGradient(x,S,I,k,Z,ue)}drawImage(x,S,I,k,Z,ue,pe,Me,V){var ne=arguments,Ae=this._context;3===ne.length?Ae.drawImage(x,S,I):5===ne.length?Ae.drawImage(x,S,I,k,Z):9===ne.length&&Ae.drawImage(x,S,I,k,Z,ue,pe,Me,V)}ellipse(x,S,I,k,Z,ue,pe,Me){this._context.ellipse(x,S,I,k,Z,ue,pe,Me)}isPointInPath(x,S,I,k){return I?this._context.isPointInPath(I,x,S,k):this._context.isPointInPath(x,S,k)}fill(x){x?this._context.fill(x):this._context.fill()}fillRect(x,S,I,k){this._context.fillRect(x,S,I,k)}strokeRect(x,S,I,k){this._context.strokeRect(x,S,I,k)}fillText(x,S,I,k){k?this._context.fillText(x,S,I,k):this._context.fillText(x,S,I)}measureText(x){return this._context.measureText(x)}getImageData(x,S,I,k){return this._context.getImageData(x,S,I,k)}lineTo(x,S){this._context.lineTo(x,S)}moveTo(x,S){this._context.moveTo(x,S)}rect(x,S,I,k){this._context.rect(x,S,I,k)}putImageData(x,S,I){this._context.putImageData(x,S,I)}quadraticCurveTo(x,S,I,k){this._context.quadraticCurveTo(x,S,I,k)}restore(){this._context.restore()}rotate(x){this._context.rotate(x)}save(){this._context.save()}scale(x,S){this._context.scale(x,S)}setLineDash(x){this._context.setLineDash?this._context.setLineDash(x):"mozDash"in this._context?this._context.mozDash=x:"webkitLineDash"in this._context&&(this._context.webkitLineDash=x)}getLineDash(){return this._context.getLineDash()}setTransform(x,S,I,k,Z,ue){this._context.setTransform(x,S,I,k,Z,ue)}stroke(x){x?this._context.stroke(x):this._context.stroke()}strokeText(x,S,I,k){this._context.strokeText(x,S,I,k)}transform(x,S,I,k,Z,ue){this._context.transform(x,S,I,k,Z,ue)}translate(x,S){this._context.translate(x,S)}_enableTrace(){var k,Z,x=this,S=ye.length,I=this.setAttr,ue=function(pe){var V,Me=x[pe];x[pe]=function(){return Z=function te(je){var k,Z,x=[],S=je.length,I=j.Z;for(k=0;k<S;k++)I._isNumber(Z=je[k])?Z=Math.round(1e3*Z)/1e3:I._isString(Z)||(Z+=""),x.push(Z);return x}(Array.prototype.slice.call(arguments,0)),V=Me.apply(x,arguments),x._trace({method:pe,args:Z}),V}};for(k=0;k<S;k++)ue(ye[k]);x.setAttr=function(){I.apply(x,arguments);var pe=arguments[0],Me=arguments[1];("shadowOffsetX"===pe||"shadowOffsetY"===pe||"shadowBlur"===pe)&&(Me/=this.canvas.getPixelRatio()),x._trace({property:pe,val:Me})}}_applyGlobalCompositeOperation(x){const S=x.attrs.globalCompositeOperation;!S||"source-over"===S||this.setAttr("globalCompositeOperation",S)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(je){Object.defineProperty(le.prototype,je,{get(){return this._context[je]},set(x){this._context[je]=x}})});class Ne extends le{constructor(x){super(x),this._context=x._canvas.getContext("2d")}_fillColor(x){var S=x.fill();this.setAttr("fillStyle",S),x._fillFunc(this)}_fillPattern(x){this.setAttr("fillStyle",x._getFillPattern()),x._fillFunc(this)}_fillLinearGradient(x){var S=x._getLinearGradient();S&&(this.setAttr("fillStyle",S),x._fillFunc(this))}_fillRadialGradient(x){const S=x._getRadialGradient();S&&(this.setAttr("fillStyle",S),x._fillFunc(this))}_fill(x){const S=x.fill(),I=x.getFillPriority();if(S&&"color"===I)return void this._fillColor(x);const k=x.getFillPatternImage();if(k&&"pattern"===I)return void this._fillPattern(x);const Z=x.getFillLinearGradientColorStops();if(Z&&"linear-gradient"===I)return void this._fillLinearGradient(x);const ue=x.getFillRadialGradientColorStops();ue&&"radial-gradient"===I?this._fillRadialGradient(x):S?this._fillColor(x):k?this._fillPattern(x):Z?this._fillLinearGradient(x):ue&&this._fillRadialGradient(x)}_strokeLinearGradient(x){const S=x.getStrokeLinearGradientStartPoint(),I=x.getStrokeLinearGradientEndPoint(),k=x.getStrokeLinearGradientColorStops(),Z=this.createLinearGradient(S.x,S.y,I.x,I.y);if(k){for(var ue=0;ue<k.length;ue+=2)Z.addColorStop(k[ue],k[ue+1]);this.setAttr("strokeStyle",Z)}}_stroke(x){var S=x.dash(),I=x.getStrokeScaleEnabled();if(x.hasStroke()){if(!I){this.save();var k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(x),S&&x.dashEnabled()&&(this.setLineDash(S),this.setAttr("lineDashOffset",x.dashOffset())),this.setAttr("lineWidth",x.strokeWidth()),x.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),x.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(x):this.setAttr("strokeStyle",x.stroke()),x._strokeFunc(this),I||this.restore()}}_applyShadow(x){var S,I,k,Z=null!==(S=x.getShadowRGBA())&&void 0!==S?S:"black",ue=null!==(I=x.getShadowBlur())&&void 0!==I?I:5,pe=null!==(k=x.getShadowOffset())&&void 0!==k?k:{x:0,y:0},Me=x.getAbsoluteScale(),V=this.canvas.getPixelRatio(),ne=Me.x*V,Ae=Me.y*V;this.setAttr("shadowColor",Z),this.setAttr("shadowBlur",ue*Math.min(Math.abs(ne),Math.abs(Ae))),this.setAttr("shadowOffsetX",pe.x*ne),this.setAttr("shadowOffsetY",pe.y*Ae)}}class Oe extends le{constructor(x){super(x),this._context=x._canvas.getContext("2d",{willReadFrequently:!0})}_fill(x){this.save(),this.setAttr("fillStyle",x.colorKey),x._fillFuncHit(this),this.restore()}strokeShape(x){x.hasHitStroke()&&this._stroke(x)}_stroke(x){if(x.hasHitStroke()){const Z=x.getStrokeScaleEnabled();if(!Z){this.save();var S=this.getCanvas().getPixelRatio();this.setTransform(S,0,0,S,0,0)}this._applyLineCap(x);var I=x.hitStrokeWidth(),k="auto"===I?x.strokeWidth():I;this.setAttr("lineWidth",k),this.setAttr("strokeStyle",x.colorKey),x._strokeFuncHit(this),Z||this.restore()}}}},584:(pn,It,Ce)=>{Ce.d(It,{DD:()=>te});var j=Ce(20),$=Ce(168);const te={get isDragging(){var de=!1;return te._dragElements.forEach(we=>{"dragging"===we.dragStatus&&(de=!0)}),de},justDragged:!1,get node(){var de;return te._dragElements.forEach(we=>{de=we.node}),de},_dragElements:new Map,_drag(de){const we=[];te._dragElements.forEach((y,q)=>{const{node:N}=y,ie=N.getStage();ie.setPointersPositions(de),void 0===y.pointerId&&(y.pointerId=$.Z._getFirstPointerId(de));const ce=ie._changedPointerPositions.find(Pe=>Pe.id===y.pointerId);if(ce){if("dragging"!==y.dragStatus){var Te=N.dragDistance();if(Math.max(Math.abs(ce.x-y.startPointerPos.x),Math.abs(ce.y-y.startPointerPos.y))<Te||(N.startDrag({evt:de}),!N.isDragging()))return}N._setDragPosition(de,y),we.push(N)}}),we.forEach(y=>{y.fire("dragmove",{type:"dragmove",target:y,evt:de},!0)})},_endDragBefore(de){const we=[];te._dragElements.forEach(y=>{const{node:q}=y,N=q.getStage();if(de&&N.setPointersPositions(de),!N._changedPointerPositions.find(Te=>Te.id===y.pointerId))return;("dragging"===y.dragStatus||"stopped"===y.dragStatus)&&(te.justDragged=!0,j.So._mouseListenClick=!1,j.So._touchListenClick=!1,j.So._pointerListenClick=!1,y.dragStatus="stopped");const ce=y.node.getLayer()||y.node instanceof j.So.Stage&&y.node;ce&&-1===we.indexOf(ce)&&we.push(ce)}),we.forEach(y=>{y.draw()})},_endDragAfter(de){te._dragElements.forEach((we,y)=>{"stopped"===we.dragStatus&&we.node.fire("dragend",{type:"dragend",target:we.node,evt:de},!0),"dragging"!==we.dragStatus&&te._dragElements.delete(y)})}};j.So.isBrowser&&(window.addEventListener("mouseup",te._endDragBefore,!0),window.addEventListener("touchend",te._endDragBefore,!0),window.addEventListener("mousemove",te._drag),window.addEventListener("touchmove",te._drag),window.addEventListener("mouseup",te._endDragAfter,!1),window.addEventListener("touchend",te._endDragAfter,!1))},552:(pn,It,Ce)=>{Ce.d(It,{F:()=>we});var j=Ce(168),$=Ce(904),te="get",de="set";const we={addGetterSetter(y,q,N,ie,ce){we.addGetter(y,q,N),we.addSetter(y,q,ie,ce),we.addOverloadedGetterSetter(y,q)},addGetter(y,q,N){var ie=te+j.Z._capitalize(q);y.prototype[ie]=y.prototype[ie]||function(){var ce=this.attrs[q];return void 0===ce?N:ce}},addSetter(y,q,N,ie){var ce=de+j.Z._capitalize(q);y.prototype[ce]||we.overWriteSetter(y,q,N,ie)},overWriteSetter(y,q,N,ie){var ce=de+j.Z._capitalize(q);y.prototype[ce]=function(Te){return N&&null!=Te&&(Te=N.call(this,Te,q)),this._setAttr(q,Te),ie&&ie.call(this),this}},addComponentsGetterSetter(y,q,N,ie,ce){var le,Ne,Te=N.length,ye=j.Z._capitalize,Pe=te+ye(q),Je=de+ye(q);y.prototype[Pe]=function(){var je={};for(le=0;le<Te;le++)je[Ne=N[le]]=this.getAttr(q+ye(Ne));return je};var Oe=(0,$.uZ)(N);y.prototype[Je]=function(je){var S,x=this.attrs[q];for(S in ie&&(je=ie.call(this,je)),Oe&&Oe.call(this,je,q),je)je.hasOwnProperty(S)&&this._setAttr(q+ye(S),je[S]);return je||N.forEach(I=>{this._setAttr(q+ye(I),void 0)}),this._fireChangeEvent(q,x,je),ce&&ce.call(this),this},we.addOverloadedGetterSetter(y,q)},addOverloadedGetterSetter(y,q){var N=j.Z._capitalize(q),ie=de+N,ce=te+N;y.prototype[q]=function(){return arguments.length?(this[ie](arguments[0]),this):this[ce]()}},addDeprecatedGetterSetter(y,q,N,ie){j.Z.error("Adding deprecated "+q);var ce=te+j.Z._capitalize(q),Te=q+" property is deprecated and will be removed soon. Look at Konva change log for more information.";y.prototype[ce]=function(){j.Z.error(Te);var ye=this.attrs[q];return void 0===ye?N:ye},we.addSetter(y,q,ie,function(){j.Z.error(Te)}),we.addOverloadedGetterSetter(y,q)},backCompat(y,q){j.Z.each(q,function(N,ie){var ce=y.prototype[ie],Te=te+j.Z._capitalize(N),ye=de+j.Z._capitalize(N);function Pe(){ce.apply(this,arguments),j.Z.error('"'+N+'" method is deprecated and will be removed soon. Use ""'+ie+'" instead.')}y.prototype[N]=Pe,y.prototype[Te]=Pe,y.prototype[ye]=Pe})},afterSetFilter(){this._filterUpToDate=!1}}},20:(pn,It,Ce)=>{Ce.d(It,{DA:()=>we,So:()=>de,zA:()=>te});var j=Math.PI/180;const te=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},de={_global:te,version:"8.4.3",isBrowser:function $(){return typeof window<"u"&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}(),isUnminified:/param/.test(function(y){}.toString()),dblClickWindow:400,getAngle:y=>de.angleDeg?y*j:y,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>de.DD.isDragging,isDragReady:()=>!!de.DD.node,releaseCanvasOnDestroy:!0,document:te.document,_injectGlobal(y){te.Konva=y}},we=y=>{de[y.prototype.getClassName()]=y};de._injectGlobal(de)},96:(pn,It,Ce)=>{Ce.d(It,{N:()=>ne});var j=Ce(168),$=Ce(552),te=Ce(58),de=Ce(20),we=Ce(584),y=Ce(904),q="absoluteOpacity",N="allEventListeners",ie="absoluteTransform",ce="absoluteScale",Te="canvas",le="listening",Ne="mouseenter",Oe="mouseleave",S="Shape",I=" ",k="stage",Z="transform",pe="visible",Me=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(I);let V=1;class ne{constructor(b){this._id=V++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(b),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(b){b!==Z&&b!==ie||!this._cache.get(b)?b?this._cache.delete(b):this._cache.clear():this._cache.get(b).dirty=!0}_getCache(b,T){var R=this._cache.get(b);return(void 0===R||(b===Z||b===ie)&&!0===R.dirty)&&(R=T.call(this),this._cache.set(b,R)),R}_calculate(b,T,R){if(!this._attachedDepsListeners.get(b)){const U=T.map(G=>G+"Change.konva").join(I);this.on(U,()=>{this._clearCache(b)}),this._attachedDepsListeners.set(b,!0)}return this._getCache(b,R)}_getCanvasCache(){return this._cache.get(Te)}_clearSelfAndDescendantCache(b){this._clearCache(b),b===ie&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Te)){const{scene:b,filter:T,hit:R}=this._cache.get(Te);j.Z.releaseCanvas(b,T,R),this._cache.delete(Te)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(b){var T=b||{},R={};(void 0===T.x||void 0===T.y||void 0===T.width||void 0===T.height)&&(R=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var U=Math.ceil(T.width||R.width),G=Math.ceil(T.height||R.height),ge=T.pixelRatio,Ie=void 0===T.x?Math.floor(R.x):T.x,ke=void 0===T.y?Math.floor(R.y):T.y,gt=T.offset||0,Et=T.drawBorder||!1,ht=T.hitCanvasPixelRatio||1;if(U&&G){Ie-=gt,ke-=gt;var et=new te.RF({pixelRatio:ge,width:U+=2*gt+1,height:G+=2*gt+1}),B=new te.RF({pixelRatio:ge,width:0,height:0}),W=new te.hh({pixelRatio:ht,width:U,height:G}),_e=et.getContext(),mt=W.getContext();return W.isCache=!0,et.isCache=!0,this._cache.delete(Te),this._filterUpToDate=!1,!1===T.imageSmoothingEnabled&&(et.getContext()._context.imageSmoothingEnabled=!1,B.getContext()._context.imageSmoothingEnabled=!1),_e.save(),mt.save(),_e.translate(-Ie,-ke),mt.translate(-Ie,-ke),this._isUnderCache=!0,this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(ce),this.drawScene(et,this),this.drawHit(W,this),this._isUnderCache=!1,_e.restore(),mt.restore(),Et&&(_e.save(),_e.beginPath(),_e.rect(0,0,U,G),_e.closePath(),_e.setAttr("strokeStyle","red"),_e.setAttr("lineWidth",5),_e.stroke(),_e.restore()),this._cache.set(Te,{scene:et,filter:B,hit:W,x:Ie,y:ke}),this._requestDraw(),this}j.Z.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(Te)}getClientRect(b){throw new Error('abstract "getClientRect" method call')}_transformedRect(b,T){var U,G,ge,Ie,R=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}],ke=this.getAbsoluteTransform(T);return R.forEach(function(gt){var Et=ke.point(gt);void 0===U&&(U=ge=Et.x,G=Ie=Et.y),U=Math.min(U,Et.x),G=Math.min(G,Et.y),ge=Math.max(ge,Et.x),Ie=Math.max(Ie,Et.y)}),{x:U,y:G,width:ge-U,height:Ie-G}}_drawCachedSceneCanvas(b){b.save(),b._applyOpacity(this),b._applyGlobalCompositeOperation(this);const T=this._getCanvasCache();b.translate(T.x,T.y);var R=this._getCachedSceneCanvas(),U=R.pixelRatio;b.drawImage(R._canvas,0,0,R.width/U,R.height/U),b.restore()}_drawCachedHitCanvas(b){var T=this._getCanvasCache(),R=T.hit;b.save(),b.translate(T.x,T.y),b.drawImage(R._canvas,0,0,R.width/R.pixelRatio,R.height/R.pixelRatio),b.restore()}_getCachedSceneCanvas(){var ge,Ie,ke,gt,b=this.filters(),T=this._getCanvasCache(),R=T.scene,U=T.filter,G=U.getContext();if(b){if(!this._filterUpToDate){var Et=R.pixelRatio;U.setSize(R.width/R.pixelRatio,R.height/R.pixelRatio);try{for(ge=b.length,G.clear(),G.drawImage(R._canvas,0,0,R.getWidth()/Et,R.getHeight()/Et),Ie=G.getImageData(0,0,U.getWidth(),U.getHeight()),ke=0;ke<ge;ke++)"function"==typeof(gt=b[ke])?(gt.call(this,Ie),G.putImageData(Ie,0,0)):j.Z.error("Filter should be type of function, but got "+typeof gt+" instead. Please check correct filters")}catch(ht){j.Z.error("Unable to apply filter. "+ht.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return U}return R}on(b,T){if(this._cache&&this._cache.delete(N),3===arguments.length)return this._delegate.apply(this,arguments);var G,Ie,ke,gt,R=b.split(I),U=R.length;for(G=0;G<U;G++)gt=(Ie=R[G].split("."))[1]||"",this.eventListeners[ke=Ie[0]]||(this.eventListeners[ke]=[]),this.eventListeners[ke].push({name:gt,handler:T});return this}off(b,T){var G,ge,ke,gt,Et,R=(b||"").split(I),U=R.length;if(this._cache&&this._cache.delete(N),!b)for(ge in this.eventListeners)this._off(ge);for(G=0;G<U;G++)if(Et=(ke=R[G].split("."))[1],gt=ke[0])this.eventListeners[gt]&&this._off(gt,Et,T);else for(ge in this.eventListeners)this._off(ge,Et,T);return this}dispatchEvent(b){return this.fire(b.type,{target:this,type:b.type,evt:b}),this}addEventListener(b,T){return this.on(b,function(R){T.call(this,R.evt)}),this}removeEventListener(b){return this.off(b),this}_delegate(b,T,R){var U=this;this.on(b,function(G){for(var ge=G.target.findAncestors(T,!0,U),Ie=0;Ie<ge.length;Ie++)(G=j.Z.cloneObject(G)).currentTarget=ge[Ie],R.call(ge[Ie],G)})}remove(){return this.isDragging()&&this.stopDrag(),we.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ie),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(ce),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(pe),this._clearSelfAndDescendantCache(le)}_remove(){this._clearCaches();var b=this.getParent();b&&b.children&&(b.children.splice(this.index,1),b._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(b){var T="get"+j.Z._capitalize(b);return j.Z._isFunction(this[T])?this[T]():this.attrs[b]}getAncestors(){for(var b=this.getParent(),T=[];b;)T.push(b),b=b.getParent();return T}getAttrs(){return this.attrs||{}}setAttrs(b){return this._batchTransformChanges(()=>{var T,R;if(!b)return this;for(T in b)"children"!==T&&(R="set"+j.Z._capitalize(T),j.Z._isFunction(this[R])?this[R](b[T]):this._setAttr(T,b[T]))}),this}isListening(){return this._getCache(le,this._isListening)}_isListening(b){if(!this.listening())return!1;const R=this.getParent();return!R||R===b||this===b||R._isListening(b)}isVisible(){return this._getCache(pe,this._isVisible)}_isVisible(b){if(!this.visible())return!1;const R=this.getParent();return!R||R===b||this===b||R._isVisible(b)}shouldDrawHit(b,T=!1){if(b)return this._isVisible(b)&&this._isListening(b);var R=this.getLayer(),U=!1;we.DD._dragElements.forEach(ge=>{"dragging"===ge.dragStatus&&("Stage"===ge.node.nodeType||ge.node.getLayer()===R)&&(U=!0)});var G=!T&&!de.So.hitOnDragEnabled&&U;return this.isListening()&&this.isVisible()&&!G}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var U,G,ge,Ie,b=this.getDepth(),T=this,R=0;return"Stage"!==T.nodeType&&function ke(gt){for(U=[],G=gt.length,ge=0;ge<G;ge++)R++,(Ie=gt[ge]).nodeType!==S&&(U=U.concat(Ie.getChildren().slice())),Ie._id===T._id&&(ge=G);U.length>0&&U[0].getDepth()<=b&&ke(U)}(T.getStage().getChildren()),R}getDepth(){for(var b=0,T=this.parent;T;)b++,T=T.parent;return b}_batchTransformChanges(b){this._batchingTransformChange=!0,b(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Z),this._clearSelfAndDescendantCache(ie)),this._needClearTransformCache=!1}setPosition(b){return this._batchTransformChanges(()=>{this.x(b.x),this.y(b.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var b=this.getStage().getPointerPosition();if(!b)return null;var T=this.getAbsoluteTransform().copy();return T.invert(),T.point(b)}getAbsolutePosition(b){let T=!1,R=this.parent;for(;R;){if(R.isCached()){T=!0;break}R=R.parent}T&&!b&&(b=!0);var U=this.getAbsoluteTransform(b).getMatrix(),G=new j.w,ge=this.offset();return G.m=U.slice(),G.translate(ge.x,ge.y),G.getTranslation()}setAbsolutePosition(b){var T=this._clearTransform();this.attrs.x=T.x,this.attrs.y=T.y,delete T.x,delete T.y,this._clearCache(Z);var R=this._getAbsoluteTransform().copy();return R.invert(),R.translate(b.x,b.y),b={x:this.attrs.x+R.getTranslation().x,y:this.attrs.y+R.getTranslation().y},this._setTransform(T),this.setPosition({x:b.x,y:b.y}),this._clearCache(Z),this._clearSelfAndDescendantCache(ie),this}_setTransform(b){var T;for(T in b)this.attrs[T]=b[T]}_clearTransform(){var b={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,b}move(b){var T=b.x,R=b.y,U=this.x(),G=this.y();return void 0!==T&&(U+=T),void 0!==R&&(G+=R),this.setPosition({x:U,y:G}),this}_eachAncestorReverse(b,T){var G,ge,R=[],U=this.getParent();if(!T||T._id!==this._id){for(R.unshift(this);U&&(!T||U._id!==T._id);)R.unshift(U),U=U.parent;for(G=R.length,ge=0;ge<G;ge++)b(R[ge])}}rotate(b){return this.rotation(this.rotation()+b),this}moveToTop(){if(!this.parent)return j.Z.warn("Node has no parent. moveToTop function is ignored."),!1;var b=this.index;return b<this.parent.getChildren().length-1&&(this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return j.Z.warn("Node has no parent. moveUp function is ignored."),!1;var b=this.index;return b<this.parent.getChildren().length-1&&(this.parent.children.splice(b,1),this.parent.children.splice(b+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return j.Z.warn("Node has no parent. moveDown function is ignored."),!1;var b=this.index;return b>0&&(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return j.Z.warn("Node has no parent. moveToBottom function is ignored."),!1;var b=this.index;return b>0&&(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(b){return this.parent?((b<0||b>=this.parent.children.length)&&j.Z.warn("Unexpected value "+b+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(b,0,this),this.parent._setChildrenIndices(),this):(j.Z.warn("Node has no parent. zIndex parameter is ignored."),this)}getAbsoluteOpacity(){return this._getCache(q,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var b=this.opacity(),T=this.getParent();return T&&!T._isUnderCache&&(b*=T.getAbsoluteOpacity()),b}moveTo(b){return this.getParent()!==b&&(this._remove(),b.add(this)),this}toObject(){var R,U,G,ge,b={},T=this.getAttrs();for(R in b.attrs={},T)(!j.Z.isObject(U=T[R])||j.Z._isPlainObject(U)||j.Z._isArray(U))&&(G="function"==typeof this[R]&&this[R],delete T[R],ge=G?G.call(this):null,T[R]=U,ge!==U&&(b.attrs[R]=U));return b.className=this.getClassName(),j.Z._prepareToStringify(b)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(b,T,R){var U=[];T&&this._isMatch(b)&&U.push(this);for(var G=this.parent;G;){if(G===R)return U;G._isMatch(b)&&U.push(G),G=G.parent}return U}isAncestorOf(b){return!1}findAncestor(b,T,R){return this.findAncestors(b,T,R)[0]}_isMatch(b){if(!b)return!1;if("function"==typeof b)return b(this);var U,G,T=b.replace(/ /g,"").split(","),R=T.length;for(U=0;U<R;U++)if(j.Z.isValidSelector(G=T[U])||(j.Z.warn('Selector "'+G+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),j.Z.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),j.Z.warn("Konva is awesome, right?")),"#"===G.charAt(0)){if(this.id()===G.slice(1))return!0}else if("."===G.charAt(0)){if(this.hasName(G.slice(1)))return!0}else if(this.className===G||this.nodeType===G)return!0;return!1}getLayer(){var b=this.getParent();return b?b.getLayer():null}getStage(){return this._getCache(k,this._getStage)}_getStage(){var b=this.getParent();if(b)return b.getStage()}fire(b,T={},R){return T.target=T.target||this,R?this._fireAndBubble(b,T):this._fire(b,T),this}getAbsoluteTransform(b){return b?this._getAbsoluteTransform(b):this._getCache(ie,this._getAbsoluteTransform)}_getAbsoluteTransform(b){var T;if(b)return T=new j.w,this._eachAncestorReverse(function(U){var G=U.transformsEnabled();"all"===G?T.multiply(U.getTransform()):"position"===G&&T.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},b),T;T=this._cache.get(ie)||new j.w,this.parent?this.parent.getAbsoluteTransform().copyInto(T):T.reset();var R=this.transformsEnabled();return"all"===R?T.multiply(this.getTransform()):"position"===R&&T.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),T.dirty=!1,T}getAbsoluteScale(b){for(var T=this;T;)T._isUnderCache&&(b=T),T=T.getParent();const U=this.getAbsoluteTransform(b).decompose();return{x:U.scaleX,y:U.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Z,this._getTransform)}_getTransform(){var b,T,R=this._cache.get(Z)||new j.w;R.reset();var U=this.x(),G=this.y(),ge=de.So.getAngle(this.rotation()),Ie=null!==(b=this.attrs.scaleX)&&void 0!==b?b:1,ke=null!==(T=this.attrs.scaleY)&&void 0!==T?T:1,gt=this.attrs.skewX||0,Et=this.attrs.skewY||0,ht=this.attrs.offsetX||0,et=this.attrs.offsetY||0;return(0!==U||0!==G)&&R.translate(U,G),0!==ge&&R.rotate(ge),(0!==gt||0!==Et)&&R.skew(gt,Et),(1!==Ie||1!==ke)&&R.scale(Ie,ke),(0!==ht||0!==et)&&R.translate(-1*ht,-1*et),R.dirty=!1,R}clone(b){var R,U,G,ge,Ie,T=j.Z.cloneObject(this.attrs);for(R in b)T[R]=b[R];var ke=new this.constructor(T);for(R in this.eventListeners)for(G=(U=this.eventListeners[R]).length,ge=0;ge<G;ge++)(Ie=U[ge]).name.indexOf("konva")<0&&(ke.eventListeners[R]||(ke.eventListeners[R]=[]),ke.eventListeners[R].push(Ie));return ke}_toKonvaCanvas(b){b=b||{};var T=this.getClientRect(),R=this.getStage(),U=void 0!==b.x?b.x:Math.floor(T.x),G=void 0!==b.y?b.y:Math.floor(T.y),ge=b.pixelRatio||1,Ie=new te.RF({width:b.width||Math.ceil(T.width)||(R?R.width():0),height:b.height||Math.ceil(T.height)||(R?R.height():0),pixelRatio:ge}),ke=Ie.getContext();return!1===b.imageSmoothingEnabled&&(ke._context.imageSmoothingEnabled=!1),ke.save(),(U||G)&&ke.translate(-1*U,-1*G),this.drawScene(Ie),ke.restore(),Ie}toCanvas(b){return this._toKonvaCanvas(b)._canvas}toDataURL(b){var T=(b=b||{}).mimeType||null,R=b.quality||null,U=this._toKonvaCanvas(b).toDataURL(T,R);return b.callback&&b.callback(U),U}toImage(b){return new Promise((T,R)=>{try{const U=b?.callback;U&&delete b.callback,j.Z._urlToImage(this.toDataURL(b),function(G){T(G),U?.(G)})}catch(U){R(U)}})}toBlob(b){return new Promise((T,R)=>{try{const U=b?.callback;U&&delete b.callback,this.toCanvas(b).toBlob(G=>{T(G),U?.(G)})}catch(U){R(U)}})}setSize(b){return this.width(b.width),this.height(b.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():de.So.dragDistance}_off(b,T,R){var G,ge,U=this.eventListeners[b];for(G=0;G<U.length;G++)if(!("konva"===(ge=U[G].name)&&"konva"!==T||T&&ge!==T||R&&R!==U[G].handler)){if(U.splice(G,1),0===U.length){delete this.eventListeners[b];break}G--}}_fireChangeEvent(b,T,R){this._fire(b+"Change",{oldVal:T,newVal:R})}addName(b){if(!this.hasName(b)){var T=this.name();this.name(T?T+" "+b:b)}return this}hasName(b){if(!b)return!1;const T=this.name();return!!T&&-1!==(T||"").split(/\s/g).indexOf(b)}removeName(b){var T=(this.name()||"").split(/\s/g),R=T.indexOf(b);return-1!==R&&(T.splice(R,1),this.name(T.join(" "))),this}setAttr(b,T){var R=this["set"+j.Z._capitalize(b)];return j.Z._isFunction(R)?R.call(this,T):this._setAttr(b,T),this}_requestDraw(){de.So.autoDrawEnabled&&(this.getLayer()||this.getStage())?.batchDraw()}_setAttr(b,T){var R=this.attrs[b];R===T&&!j.Z.isObject(T)||(null==T?delete this.attrs[b]:this.attrs[b]=T,this._shouldFireChangeEvents&&this._fireChangeEvent(b,R,T),this._requestDraw())}_setComponentAttr(b,T,R){var U;void 0!==R&&((U=this.attrs[b])||(this.attrs[b]=this.getAttr(b)),this.attrs[b][T]=R,this._fireChangeEvent(b,U,R))}_fireAndBubble(b,T,R){if(T&&this.nodeType===S&&(T.target=this),b!==Ne&&b!==Oe||!(R&&(this===R||this.isAncestorOf&&this.isAncestorOf(R))||"Stage"===this.nodeType&&!R)){this._fire(b,T);var G=(b===Ne||b===Oe)&&R&&R.isAncestorOf&&R.isAncestorOf(this)&&!R.isAncestorOf(this.parent);(T&&!T.cancelBubble||!T)&&this.parent&&this.parent.isListening()&&!G&&(R&&R.parent?this._fireAndBubble.call(this.parent,b,T,R):this._fireAndBubble.call(this.parent,b,T))}}_getProtoListeners(b){let T=this._cache.get(N);if(!T){T={};let U=Object.getPrototypeOf(this);for(;U;)if(U.eventListeners){for(var R in U.eventListeners)T[R]=U.eventListeners[R].concat(T[R]||[]);U=Object.getPrototypeOf(U)}else U=Object.getPrototypeOf(U);this._cache.set(N,T)}return T[b]}_fire(b,T){(T=T||{}).currentTarget=this,T.type=b;const R=this._getProtoListeners(b);if(R)for(var U=0;U<R.length;U++)R[U].handler.call(this,T);const G=this.eventListeners[b];if(G)for(U=0;U<G.length;U++)G[U].handler.call(this,T)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(b){var T=b?b.pointerId:void 0,R=this.getStage(),U=this.getAbsolutePosition(),G=R._getPointerById(T)||R._changedPointerPositions[0]||U;we.DD._dragElements.set(this._id,{node:this,startPointerPos:G,offset:{x:G.x-U.x,y:G.y-U.y},dragStatus:"ready",pointerId:T})}startDrag(b,T=!0){we.DD._dragElements.has(this._id)||this._createDragElement(b),we.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:b&&b.evt},T)}_setDragPosition(b,T){const R=this.getStage()._getPointerById(T.pointerId);if(R){var U={x:R.x-T.offset.x,y:R.y-T.offset.y},G=this.dragBoundFunc();if(void 0!==G){const ge=G.call(this,U,b);ge?U=ge:j.Z.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==U.x||this._lastPos.y!==U.y)&&(this.setAbsolutePosition(U),this._requestDraw()),this._lastPos=U}}stopDrag(b){const T=we.DD._dragElements.get(this._id);T&&(T.dragStatus="stopped"),we.DD._endDragBefore(b),we.DD._endDragAfter(b)}setDraggable(b){this._setAttr("draggable",b),this._dragChange()}isDragging(){const b=we.DD._dragElements.get(this._id);return!!b&&"dragging"===b.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(b){if((void 0===b.evt.button||de.So.dragButtons.indexOf(b.evt.button)>=0)&&!this.isDragging()){var U=!1;we.DD._dragElements.forEach(G=>{this.isAncestorOf(G.node)&&(U=!0)}),U||this._createDragElement(b)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const T=we.DD._dragElements.get(this._id),U=T&&"ready"===T.dragStatus;T&&"dragging"===T.dragStatus?this.stopDrag():U&&we.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(b={x:0,y:0}){const T=this.getStage();if(!T)return!1;const R={x:-b.x,y:-b.y,width:T.width()+2*b.x,height:T.height()+2*b.y};return j.Z.haveIntersection(R,this.getClientRect())}static create(b,T){return j.Z._isString(b)&&(b=JSON.parse(b)),this._createNode(b,T)}static _createNode(b,T){var G,ge,Ie,R=ne.prototype.getClassName.call(b),U=b.children;if(T&&(b.attrs.container=T),de.So[R]||(j.Z.warn('Can not find a node with class name "'+R+'". Fallback to "Shape".'),R="Shape"),G=new(0,de.So[R])(b.attrs),U)for(ge=U.length,Ie=0;Ie<ge;Ie++)G.add(ne._createNode(U[Ie]));return G}}ne.prototype.nodeType="Node",ne.prototype._attrsAffectingSize=[],ne.prototype.eventListeners={},ne.prototype.on.call(ne.prototype,Me,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(Z),this._clearSelfAndDescendantCache(ie))}),ne.prototype.on.call(ne.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(pe)}),ne.prototype.on.call(ne.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(le)}),ne.prototype.on.call(ne.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(q)});const Ae=$.F.addGetterSetter;Ae(ne,"zIndex"),Ae(ne,"absolutePosition"),Ae(ne,"position"),Ae(ne,"x",0,(0,y.Kg)()),Ae(ne,"y",0,(0,y.Kg)()),Ae(ne,"globalCompositeOperation","source-over",(0,y.sY)()),Ae(ne,"opacity",1,(0,y.Kg)()),Ae(ne,"name","",(0,y.sY)()),Ae(ne,"id","",(0,y.sY)()),Ae(ne,"rotation",0,(0,y.Kg)()),$.F.addComponentsGetterSetter(ne,"scale",["x","y"]),Ae(ne,"scaleX",1,(0,y.Kg)()),Ae(ne,"scaleY",1,(0,y.Kg)()),$.F.addComponentsGetterSetter(ne,"skew",["x","y"]),Ae(ne,"skewX",0,(0,y.Kg)()),Ae(ne,"skewY",0,(0,y.Kg)()),$.F.addComponentsGetterSetter(ne,"offset",["x","y"]),Ae(ne,"offsetX",0,(0,y.Kg)()),Ae(ne,"offsetY",0,(0,y.Kg)()),Ae(ne,"dragDistance",null,(0,y.Kg)()),Ae(ne,"width",0,(0,y.Kg)()),Ae(ne,"height",0,(0,y.Kg)()),Ae(ne,"listening",!0,(0,y.I0)()),Ae(ne,"preventDefault",!0,(0,y.I0)()),Ae(ne,"filters",null,function(_t){return this._filterUpToDate=!1,_t}),Ae(ne,"visible",!0,(0,y.I0)()),Ae(ne,"transformsEnabled","all",(0,y.sY)()),Ae(ne,"size"),Ae(ne,"dragBoundFunc"),Ae(ne,"draggable",!1,(0,y.I0)()),$.F.backCompat(ne,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},771:(pn,It,Ce)=>{Ce.d(It,{I5:()=>q,Xg:()=>N,q0:()=>y,rl:()=>de,yM:()=>we});var j=Ce(20);const $=new Map,te=void 0!==j.So._global.PointerEvent;function de(ie){return $.get(ie)}function we(ie){return{evt:ie,pointerId:ie.pointerId}}function y(ie,ce){return $.get(ie)===ce}function q(ie,ce){N(ie),ce.getStage()&&($.set(ie,ce),te&&ce._fire("gotpointercapture",we(new PointerEvent("gotpointercapture"))))}function N(ie,ce){const Te=$.get(ie);Te&&(Te.getStage(),$.delete(ie),te&&Te._fire("lostpointercapture",we(new PointerEvent("lostpointercapture"))))}},229:(pn,It,Ce)=>{Ce.d(It,{H:()=>ht,U:()=>Et});var j=Ce(168),$=Ce(552),te=Ce(716),de=Ce(20),we=Ce(58),y=Ce(584),q=Ce(771),ye="mouseleave",Pe="mouseover",Je="mouseenter",le="mousemove",Ne="mousedown",Oe="mouseup",je="pointermove",x="pointerdown",S="pointerup",I="pointercancel",Z="pointerout",ue="pointerleave",pe="pointerover",Me="pointerenter",V="contextmenu",ne="touchstart",Ae="touchend",_t="touchmove",b="touchcancel",T="wheel",U=[[Je,"_pointerenter"],[Ne,"_pointerdown"],[le,"_pointermove"],[Oe,"_pointerup"],[ye,"_pointerleave"],[ne,"_pointerdown"],[_t,"_pointermove"],[Ae,"_pointerup"],[b,"_pointercancel"],[Pe,"_pointerover"],[T,"_wheel"],[V,"_contextmenu"],[x,"_pointerdown"],[je,"_pointermove"],[S,"_pointerup"],[I,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const G={mouse:{[Z]:"mouseout",[ue]:ye,[pe]:Pe,[Me]:Je,[je]:le,[x]:Ne,[S]:Oe,[I]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Z]:"touchout",[ue]:"touchleave",[pe]:"touchover",[Me]:"touchenter",[je]:_t,[x]:ne,[S]:Ae,[I]:b,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Z]:Z,[ue]:ue,[pe]:pe,[Me]:Me,[je]:je,[x]:x,[S]:S,[I]:I,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ge=et=>et.indexOf("pointer")>=0?"pointer":et.indexOf("touch")>=0?"touch":"mouse",Ie=et=>{const B=ge(et);return"pointer"===B?de.So.pointerEventsEnabled&&G.pointer:"touch"===B?G.touch:"mouse"===B?G.mouse:void 0};function ke(et={}){return(et.clipFunc||et.clipWidth||et.clipHeight)&&j.Z.warn("Stage does not support clipping. Please use clip for Layers or Groups."),et}const Et=[];class ht extends te.W{constructor(B){super(ke(B)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Et.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ke(this.attrs)}),this._checkVisibility()}_validateAdd(B){const W="Layer"===B.getType(),_e="FastLayer"===B.getType();W||_e||j.Z.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const B=this.visible()?"":"none";this.content.style.display=B}setContainer(B){if("string"==typeof B){if("."===B.charAt(0)){var W=B.slice(1);B=document.getElementsByClassName(W)[0]}else{var _e;_e="#"!==B.charAt(0)?B:B.slice(1),B=document.getElementById(_e)}if(!B)throw"Can not find container in document with id "+_e}return this._setAttr("container",B),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),B.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var _e,B=this.children,W=B.length;for(_e=0;_e<W;_e++)B[_e].clear();return this}clone(B){return B||(B={}),B.container=typeof document<"u"&&document.createElement("div"),te.W.prototype.clone.call(this,B)}destroy(){super.destroy();var B=this.content;B&&j.Z._isInDocument(B)&&this.container().removeChild(B);var W=Et.indexOf(this);return W>-1&&Et.splice(W,1),j.Z.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const B=this._pointerPositions[0]||this._changedPointerPositions[0];return B?{x:B.x,y:B.y}:(j.Z.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(B){return this._pointerPositions.find(W=>W.id===B)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(B){(B=B||{}).x=B.x||0,B.y=B.y||0,B.width=B.width||this.width(),B.height=B.height||this.height();var W=new we.RF({width:B.width,height:B.height,pixelRatio:B.pixelRatio||1}),_e=W.getContext()._context,mt=this.children;return(B.x||B.y)&&_e.translate(-1*B.x,-1*B.y),mt.forEach(function(at){if(at.isVisible()){var Rt=at._toKonvaCanvas(B);_e.drawImage(Rt._canvas,B.x,B.y,Rt.getWidth()/Rt.getPixelRatio(),Rt.getHeight()/Rt.getPixelRatio())}}),W}getIntersection(B){if(!B)return null;var at,W=this.children;for(at=W.length-1;at>=0;at--){const Rt=W[at].getIntersection(B);if(Rt)return Rt}return null}_resizeDOM(){var B=this.width(),W=this.height();this.content&&(this.content.style.width=B+"px",this.content.style.height=W+"px"),this.bufferCanvas.setSize(B,W),this.bufferHitCanvas.setSize(B,W),this.children.forEach(_e=>{_e.setSize({width:B,height:W}),_e.draw()})}add(B,...W){if(arguments.length>1){for(var _e=0;_e<arguments.length;_e++)this.add(arguments[_e]);return this}super.add(B);var mt=this.children.length;return mt>5&&j.Z.warn("The stage has "+mt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),B.setSize({width:this.width(),height:this.height()}),B.draw(),de.So.isBrowser&&this.content.appendChild(B.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(B){return q.q0(B,this)}setPointerCapture(B){q.I5(B,this)}releaseCapture(B){q.Xg(B,this)}getLayers(){return this.children}_bindContentEvents(){de.So.isBrowser&&U.forEach(([B,W])=>{this.content.addEventListener(B,_e=>{this[W](_e)},{passive:!1})})}_pointerenter(B){this.setPointersPositions(B);const W=Ie(B.type);this._fire(W.pointerenter,{evt:B,target:this,currentTarget:this})}_pointerover(B){this.setPointersPositions(B);const W=Ie(B.type);this._fire(W.pointerover,{evt:B,target:this,currentTarget:this})}_getTargetShape(B){let W=this[B+"targetShape"];return W&&!W.getStage()&&(W=null),W}_pointerleave(B){const W=Ie(B.type),_e=ge(B.type);if(W){this.setPointersPositions(B);var mt=this._getTargetShape(_e),at=!y.DD.isDragging||de.So.hitOnDragEnabled;mt&&at?(mt._fireAndBubble(W.pointerout,{evt:B}),mt._fireAndBubble(W.pointerleave,{evt:B}),this._fire(W.pointerleave,{evt:B,target:this,currentTarget:this}),this[_e+"targetShape"]=null):at&&(this._fire(W.pointerleave,{evt:B,target:this,currentTarget:this}),this._fire(W.pointerout,{evt:B,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(B){const W=Ie(B.type),_e=ge(B.type);if(W){this.setPointersPositions(B);var mt=!1;this._changedPointerPositions.forEach(at=>{var Rt=this.getIntersection(at);if(y.DD.justDragged=!1,de.So["_"+_e+"ListenClick"]=!0,!Rt||!Rt.isListening())return;de.So.capturePointerEventsEnabled&&Rt.setPointerCapture(at.id),this[_e+"ClickStartShape"]=Rt,Rt._fireAndBubble(W.pointerdown,{evt:B,pointerId:at.id}),mt=!0;const Gn=B.type.indexOf("touch")>=0;Rt.preventDefault()&&B.cancelable&&Gn&&B.preventDefault()}),mt||this._fire(W.pointerdown,{evt:B,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(B){const W=Ie(B.type),_e=ge(B.type);if(!W)return;if(y.DD.isDragging&&y.DD.node.preventDefault()&&B.cancelable&&B.preventDefault(),this.setPointersPositions(B),y.DD.isDragging&&!de.So.hitOnDragEnabled)return;var at={};let Rt=!1;var gn=this._getTargetShape(_e);this._changedPointerPositions.forEach(Gn=>{const ut=q.rl(Gn.id)||this.getIntersection(Gn),Qn=Gn.id,Rn={evt:B,pointerId:Qn};var nn=gn!==ut;if(nn&&gn&&(gn._fireAndBubble(W.pointerout,Object.assign({},Rn),ut),gn._fireAndBubble(W.pointerleave,Object.assign({},Rn),ut)),ut){if(at[ut._id])return;at[ut._id]=!0}ut&&ut.isListening()?(Rt=!0,nn&&(ut._fireAndBubble(W.pointerover,Object.assign({},Rn),gn),ut._fireAndBubble(W.pointerenter,Object.assign({},Rn),gn),this[_e+"targetShape"]=ut),ut._fireAndBubble(W.pointermove,Object.assign({},Rn))):gn&&(this._fire(W.pointerover,{evt:B,target:this,currentTarget:this,pointerId:Qn}),this[_e+"targetShape"]=null)}),Rt||this._fire(W.pointermove,{evt:B,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(B){const W=Ie(B.type),_e=ge(B.type);if(!W)return;this.setPointersPositions(B);const mt=this[_e+"ClickStartShape"],at=this[_e+"ClickEndShape"];var Rt={};let gn=!1;this._changedPointerPositions.forEach(Gn=>{const ut=q.rl(Gn.id)||this.getIntersection(Gn);if(ut){if(ut.releaseCapture(Gn.id),Rt[ut._id])return;Rt[ut._id]=!0}const Qn=Gn.id,Rn={evt:B,pointerId:Qn};let nn=!1;de.So["_"+_e+"InDblClickWindow"]?(nn=!0,clearTimeout(this[_e+"DblTimeout"])):y.DD.justDragged||(de.So["_"+_e+"InDblClickWindow"]=!0,clearTimeout(this[_e+"DblTimeout"])),this[_e+"DblTimeout"]=setTimeout(function(){de.So["_"+_e+"InDblClickWindow"]=!1},de.So.dblClickWindow),ut&&ut.isListening()?(gn=!0,this[_e+"ClickEndShape"]=ut,ut._fireAndBubble(W.pointerup,Object.assign({},Rn)),de.So["_"+_e+"ListenClick"]&&mt&&mt===ut&&(ut._fireAndBubble(W.pointerclick,Object.assign({},Rn)),nn&&at&&at===ut&&ut._fireAndBubble(W.pointerdblclick,Object.assign({},Rn)))):(this[_e+"ClickEndShape"]=null,de.So["_"+_e+"ListenClick"]&&this._fire(W.pointerclick,{evt:B,target:this,currentTarget:this,pointerId:Qn}),nn&&this._fire(W.pointerdblclick,{evt:B,target:this,currentTarget:this,pointerId:Qn}))}),gn||this._fire(W.pointerup,{evt:B,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),de.So["_"+_e+"ListenClick"]=!1,B.cancelable&&"touch"!==_e&&B.preventDefault()}_contextmenu(B){this.setPointersPositions(B);var W=this.getIntersection(this.getPointerPosition());W&&W.isListening()?W._fireAndBubble(V,{evt:B}):this._fire(V,{evt:B,target:this,currentTarget:this})}_wheel(B){this.setPointersPositions(B);var W=this.getIntersection(this.getPointerPosition());W&&W.isListening()?W._fireAndBubble(T,{evt:B}):this._fire(T,{evt:B,target:this,currentTarget:this})}_pointercancel(B){this.setPointersPositions(B);const W=q.rl(B.pointerId)||this.getIntersection(this.getPointerPosition());W&&W._fireAndBubble(S,q.yM(B)),q.Xg(B.pointerId)}_lostpointercapture(B){q.Xg(B.pointerId)}setPointersPositions(B){var W=this._getContentPosition(),_e=null,mt=null;void 0!==(B=B||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(B.touches,at=>{this._pointerPositions.push({id:at.identifier,x:(at.clientX-W.left)/W.scaleX,y:(at.clientY-W.top)/W.scaleY})}),Array.prototype.forEach.call(B.changedTouches||B.touches,at=>{this._changedPointerPositions.push({id:at.identifier,x:(at.clientX-W.left)/W.scaleX,y:(at.clientY-W.top)/W.scaleY})})):(this.pointerPos={x:_e=(B.clientX-W.left)/W.scaleX,y:mt=(B.clientY-W.top)/W.scaleY},this._pointerPositions=[{x:_e,y:mt,id:j.Z._getFirstPointerId(B)}],this._changedPointerPositions=[{x:_e,y:mt,id:j.Z._getFirstPointerId(B)}])}_setPointerPosition(B){j.Z.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(B)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var B=this.content.getBoundingClientRect();return{top:B.top,left:B.left,scaleX:B.width/this.content.clientWidth||1,scaleY:B.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new we.RF({width:this.width(),height:this.height()}),this.bufferHitCanvas=new we.hh({pixelRatio:1,width:this.width(),height:this.height()}),de.So.isBrowser){var B=this.container();if(!B)throw"Stage has no container. A container is required.";B.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),B.appendChild(this.content),this._resizeDOM()}}cache(){return j.Z.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(B){B.batchDraw()}),this}}ht.prototype.nodeType="Stage",(0,de.DA)(ht),$.F.addGetterSetter(ht,"container")},168:(pn,It,Ce)=>{Ce.d(It,{Z:()=>x,w:()=>$});var j=Ce(20);class ${constructor(I=[1,0,0,1,0,0]){this.dirty=!1,this.m=I&&I.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new $(this.m)}copyInto(I){I.m[0]=this.m[0],I.m[1]=this.m[1],I.m[2]=this.m[2],I.m[3]=this.m[3],I.m[4]=this.m[4],I.m[5]=this.m[5]}point(I){var k=this.m;return{x:k[0]*I.x+k[2]*I.y+k[4],y:k[1]*I.x+k[3]*I.y+k[5]}}translate(I,k){return this.m[4]+=this.m[0]*I+this.m[2]*k,this.m[5]+=this.m[1]*I+this.m[3]*k,this}scale(I,k){return this.m[0]*=I,this.m[1]*=I,this.m[2]*=k,this.m[3]*=k,this}rotate(I){var k=Math.cos(I),Z=Math.sin(I),pe=this.m[1]*k+this.m[3]*Z,Me=this.m[0]*-Z+this.m[2]*k,V=this.m[1]*-Z+this.m[3]*k;return this.m[0]=this.m[0]*k+this.m[2]*Z,this.m[1]=pe,this.m[2]=Me,this.m[3]=V,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(I,k){var ue=this.m[1]+this.m[3]*k,pe=this.m[2]+this.m[0]*I,Me=this.m[3]+this.m[1]*I;return this.m[0]=this.m[0]+this.m[2]*k,this.m[1]=ue,this.m[2]=pe,this.m[3]=Me,this}multiply(I){var Z=this.m[1]*I.m[0]+this.m[3]*I.m[1],ue=this.m[0]*I.m[2]+this.m[2]*I.m[3],pe=this.m[1]*I.m[2]+this.m[3]*I.m[3],Me=this.m[0]*I.m[4]+this.m[2]*I.m[5]+this.m[4],V=this.m[1]*I.m[4]+this.m[3]*I.m[5]+this.m[5];return this.m[0]=this.m[0]*I.m[0]+this.m[2]*I.m[1],this.m[1]=Z,this.m[2]=ue,this.m[3]=pe,this.m[4]=Me,this.m[5]=V,this}invert(){var I=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),Z=-this.m[1]*I,ue=-this.m[2]*I,pe=this.m[0]*I,Me=I*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),V=I*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*I,this.m[1]=Z,this.m[2]=ue,this.m[3]=pe,this.m[4]=Me,this.m[5]=V,this}getMatrix(){return this.m}decompose(){var I=this.m[0],k=this.m[1],Z=this.m[2],ue=this.m[3],V=I*ue-k*Z;let ne={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=I||0!=k){var Ae=Math.sqrt(I*I+k*k);ne.rotation=k>0?Math.acos(I/Ae):-Math.acos(I/Ae),ne.scaleX=Ae,ne.scaleY=V/Ae,ne.skewX=(I*Z+k*ue)/V,ne.skewY=0}else if(0!=Z||0!=ue){var _t=Math.sqrt(Z*Z+ue*ue);ne.rotation=Math.PI/2-(ue>0?Math.acos(-Z/_t):-Math.acos(Z/_t)),ne.scaleX=V/_t,ne.scaleY=_t,ne.skewX=0,ne.skewY=(I*Z+k*ue)/V}return ne.rotation=x._getRotation(ne.rotation),ne}}var q=Math.PI/180,N=180/Math.PI,Pe="Konva error: ",le={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Ne=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Oe=[];const je=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(S){setTimeout(S,60)},x={_isElement:S=>!(!S||1!=S.nodeType),_isFunction:S=>!!(S&&S.constructor&&S.call&&S.apply),_isPlainObject:S=>!!S&&S.constructor===Object,_isArray:S=>"[object Array]"===Object.prototype.toString.call(S),_isNumber:S=>"[object Number]"===Object.prototype.toString.call(S)&&!isNaN(S)&&isFinite(S),_isString:S=>"[object String]"===Object.prototype.toString.call(S),_isBoolean:S=>"[object Boolean]"===Object.prototype.toString.call(S),isObject:S=>S instanceof Object,isValidSelector(S){if("string"!=typeof S)return!1;var I=S[0];return"#"===I||"."===I||I===I.toUpperCase()},_sign:S=>0===S||S>0?1:-1,requestAnimFrame(S){Oe.push(S),1===Oe.length&&je(function(){const I=Oe;Oe=[],I.forEach(function(k){k()})})},createCanvasElement(){var S=document.createElement("canvas");try{S.style=S.style||{}}catch{}return S},createImageElement:()=>document.createElement("img"),_isInDocument(S){for(;S=S.parentNode;)if(S==document)return!0;return!1},_urlToImage(S,I){var k=x.createImageElement();k.onload=function(){I(k)},k.src=S},_rgbToHex:(S,I,k)=>((1<<24)+(S<<16)+(I<<8)+k).toString(16).slice(1),_hexToRgb(S){S=S.replace("#","");var I=parseInt(S,16);return{r:I>>16&255,g:I>>8&255,b:255&I}},getRandomColor(){for(var S=(16777215*Math.random()<<0).toString(16);S.length<6;)S="0"+S;return"#"+S},getRGB(S){var I;return S in le?{r:(I=le[S])[0],g:I[1],b:I[2]}:"#"===S[0]?this._hexToRgb(S.substring(1)):"rgb("===S.substr(0,4)?(I=Ne.exec(S.replace(/ /g,"")),{r:parseInt(I[1],10),g:parseInt(I[2],10),b:parseInt(I[3],10)}):{r:0,g:0,b:0}},colorToRGBA:S=>x._namedColorToRBA(S=S||"black")||x._hex3ColorToRGBA(S)||x._hex4ColorToRGBA(S)||x._hex6ColorToRGBA(S)||x._hex8ColorToRGBA(S)||x._rgbColorToRGBA(S)||x._rgbaColorToRGBA(S)||x._hslColorToRGBA(S),_namedColorToRBA(S){var I=le[S.toLowerCase()];return I?{r:I[0],g:I[1],b:I[2],a:1}:null},_rgbColorToRGBA(S){if(0===S.indexOf("rgb(")){var I=(S=S.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:I[0],g:I[1],b:I[2],a:1}}},_rgbaColorToRGBA(S){if(0===S.indexOf("rgba(")){var I=(S=S.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((k,Z)=>"%"===k.slice(-1)?3===Z?parseInt(k)/100:parseInt(k)/100*255:Number(k));return{r:I[0],g:I[1],b:I[2],a:I[3]}}},_hex8ColorToRGBA(S){if("#"===S[0]&&9===S.length)return{r:parseInt(S.slice(1,3),16),g:parseInt(S.slice(3,5),16),b:parseInt(S.slice(5,7),16),a:parseInt(S.slice(7,9),16)/255}},_hex6ColorToRGBA(S){if("#"===S[0]&&7===S.length)return{r:parseInt(S.slice(1,3),16),g:parseInt(S.slice(3,5),16),b:parseInt(S.slice(5,7),16),a:1}},_hex4ColorToRGBA(S){if("#"===S[0]&&5===S.length)return{r:parseInt(S[1]+S[1],16),g:parseInt(S[2]+S[2],16),b:parseInt(S[3]+S[3],16),a:parseInt(S[4]+S[4],16)/255}},_hex3ColorToRGBA(S){if("#"===S[0]&&4===S.length)return{r:parseInt(S[1]+S[1],16),g:parseInt(S[2]+S[2],16),b:parseInt(S[3]+S[3],16),a:1}},_hslColorToRGBA(S){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(S)){const[I,...k]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(S),Z=Number(k[0])/360,ue=Number(k[1])/100,pe=Number(k[2])/100;let Me,V,ne;if(0===ue)return ne=255*pe,{r:Math.round(ne),g:Math.round(ne),b:Math.round(ne),a:1};Me=pe<.5?pe*(1+ue):pe+ue-pe*ue;const Ae=2*pe-Me,_t=[0,0,0];for(let b=0;b<3;b++)V=Z+1/3*-(b-1),V<0&&V++,V>1&&V--,ne=6*V<1?Ae+6*(Me-Ae)*V:2*V<1?Me:3*V<2?Ae+(Me-Ae)*(2/3-V)*6:Ae,_t[b]=255*ne;return{r:Math.round(_t[0]),g:Math.round(_t[1]),b:Math.round(_t[2]),a:1}}},haveIntersection:(S,I)=>!(I.x>S.x+S.width||I.x+I.width<S.x||I.y>S.y+S.height||I.y+I.height<S.y),cloneObject(S){var I={};for(var k in S)I[k]=this._isPlainObject(S[k])?this.cloneObject(S[k]):this._isArray(S[k])?this.cloneArray(S[k]):S[k];return I},cloneArray:S=>S.slice(0),degToRad:S=>S*q,radToDeg:S=>S*N,_degToRad:S=>(x.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),x.degToRad(S)),_radToDeg:S=>(x.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),x.radToDeg(S)),_getRotation:S=>j.So.angleDeg?x.radToDeg(S):S,_capitalize:S=>S.charAt(0).toUpperCase()+S.slice(1),throw(S){throw new Error(Pe+S)},error(S){console.error(Pe+S)},warn(S){j.So.showWarnings&&console.warn("Konva warning: "+S)},each(S,I){for(var k in S)I(k,S[k])},_inRange:(S,I,k)=>I<=S&&S<k,_getProjectionToSegment(S,I,k,Z,ue,pe){var Me,V,ne,Ae=(S-k)*(S-k)+(I-Z)*(I-Z);if(0==Ae)Me=S,V=I,ne=(ue-k)*(ue-k)+(pe-Z)*(pe-Z);else{var _t=((ue-S)*(k-S)+(pe-I)*(Z-I))/Ae;_t<0?(Me=S,V=I,ne=(S-ue)*(S-ue)+(I-pe)*(I-pe)):_t>1?(Me=k,V=Z,ne=(k-ue)*(k-ue)+(Z-pe)*(Z-pe)):ne=((Me=S+_t*(k-S))-ue)*(Me-ue)+((V=I+_t*(Z-I))-pe)*(V-pe)}return[Me,V,ne]},_getProjectionToLine(S,I,k){var Z=x.cloneObject(S),ue=Number.MAX_VALUE;return I.forEach(function(pe,Me){if(k||Me!==I.length-1){var V=I[(Me+1)%I.length],ne=x._getProjectionToSegment(pe.x,pe.y,V.x,V.y,S.x,S.y),_t=ne[1],b=ne[2];b<ue&&(Z.x=ne[0],Z.y=_t,ue=b)}}),Z},_prepareArrayForTween(S,I,k){var Z,ue=[],pe=[];if(S.length>I.length){var Me=I;I=S,S=Me}for(Z=0;Z<S.length;Z+=2)ue.push({x:S[Z],y:S[Z+1]});for(Z=0;Z<I.length;Z+=2)pe.push({x:I[Z],y:I[Z+1]});var V=[];return pe.forEach(function(ne){var Ae=x._getProjectionToLine(ne,ue,k);V.push(Ae.x),V.push(Ae.y)}),V},_prepareToStringify(S){var I;for(var k in S.visitedByCircularReferenceRemoval=!0,S)if(S.hasOwnProperty(k)&&S[k]&&"object"==typeof S[k])if(I=Object.getOwnPropertyDescriptor(S,k),S[k].visitedByCircularReferenceRemoval||x._isElement(S[k])){if(!I.configurable)return null;delete S[k]}else if(null===x._prepareToStringify(S[k])){if(!I.configurable)return null;delete S[k]}return delete S.visitedByCircularReferenceRemoval,S},_assign(S,I){for(var k in I)S[k]=I[k];return S},_getFirstPointerId:S=>S.touches?S.changedTouches[0].identifier:S.pointerId||999,releaseCanvas(...S){j.So.releaseCanvasOnDestroy&&S.forEach(I=>{I.width=0,I.height=0})},drawRoundedRectPath(S,I,k,Z){let ue=0,pe=0,Me=0,V=0;"number"==typeof Z?ue=pe=Me=V=Math.min(Z,I/2,k/2):(ue=Math.min(Z[0]||0,I/2,k/2),pe=Math.min(Z[1]||0,I/2,k/2),V=Math.min(Z[2]||0,I/2,k/2),Me=Math.min(Z[3]||0,I/2,k/2)),S.moveTo(ue,0),S.lineTo(I-pe,0),S.arc(I-pe,pe,pe,3*Math.PI/2,0,!1),S.lineTo(I,k-V),S.arc(I-V,k-V,V,0,Math.PI/2,!1),S.lineTo(Me,k),S.arc(Me,k-Me,Me,Math.PI/2,Math.PI,!1),S.lineTo(0,ue),S.arc(ue,ue,ue,Math.PI,3*Math.PI/2,!1)}}},904:(pn,It,Ce)=>{Ce.d(It,{I0:()=>Pe,Jj:()=>q,Kg:()=>y,hi:()=>N,if:()=>ce,q8:()=>ye,sY:()=>ie,uZ:()=>Je,xj:()=>de});var j=Ce(20),$=Ce(168);function te(le){return $.Z._isString(le)?'"'+le+'"':"[object Number]"===Object.prototype.toString.call(le)||$.Z._isBoolean(le)?le:Object.prototype.toString.call(le)}function de(le){return le>255?255:le<0?0:Math.round(le)}function y(){if(j.So.isUnminified)return function(le,Ne){return $.Z._isNumber(le)||$.Z.warn(te(le)+' is a not valid value for "'+Ne+'" attribute. The value should be a number.'),le}}function q(le){if(j.So.isUnminified)return function(Ne,Oe){let je=$.Z._isNumber(Ne),x=$.Z._isArray(Ne)&&Ne.length==le;return!je&&!x&&$.Z.warn(te(Ne)+' is a not valid value for "'+Oe+'" attribute. The value should be a number or Array<number>('+le+")"),Ne}}function N(){if(j.So.isUnminified)return function(le,Ne){return $.Z._isNumber(le)||"auto"===le||$.Z.warn(te(le)+' is a not valid value for "'+Ne+'" attribute. The value should be a number or "auto".'),le}}function ie(){if(j.So.isUnminified)return function(le,Ne){return $.Z._isString(le)||$.Z.warn(te(le)+' is a not valid value for "'+Ne+'" attribute. The value should be a string.'),le}}function ce(){if(j.So.isUnminified)return function(le,Ne){const Oe=$.Z._isString(le),je="[object CanvasGradient]"===Object.prototype.toString.call(le)||le&&le.addColorStop;return Oe||je||$.Z.warn(te(le)+' is a not valid value for "'+Ne+'" attribute. The value should be a string or a native gradient.'),le}}function ye(){if(j.So.isUnminified)return function(le,Ne){const Oe=Int8Array?Object.getPrototypeOf(Int8Array):null;return Oe&&le instanceof Oe||($.Z._isArray(le)?le.forEach(function(je){$.Z._isNumber(je)||$.Z.warn('"'+Ne+'" attribute has non numeric element '+je+". Make sure that all elements are numbers.")}):$.Z.warn(te(le)+' is a not valid value for "'+Ne+'" attribute. The value should be a array of numbers.')),le}}function Pe(){if(j.So.isUnminified)return function(le,Ne){return!0===le||!1===le||$.Z.warn(te(le)+' is a not valid value for "'+Ne+'" attribute. The value should be a boolean.'),le}}function Je(le){if(j.So.isUnminified)return function(Ne,Oe){return null==Ne||$.Z.isObject(Ne)||$.Z.warn(te(Ne)+' is a not valid value for "'+Oe+'" attribute. The value should be an object with properties '+le),Ne}}},918:(pn,It,Ce)=>{Ce.r(It),Ce.d(It,{default:()=>Fu});var j=Ce(20),$=Ce(168),te=Ce(96),de=Ce(716),we=Ce(229),y=Ce(552),q=Ce(58),N=Ce(904),ie=Ce(771),ce="hasShadow",Te="shadowRGBA",ye="patternImage",Pe="linearGradient",Je="radialGradient";let le;function Ne(){return le||(le=$.Z.createCanvasElement().getContext("2d"),le)}const Oe={};class V extends te.N{constructor(l){let c;for(super(l);c=$.Z.getRandomColor(),!c||c in Oe;);this.colorKey=c,Oe[c]=this}getContext(){return $.Z.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return $.Z.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ce,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(ye,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const c=Ne().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(c&&c.setTransform){const h=new $.w;h.translate(this.fillPatternX(),this.fillPatternY()),h.rotate(j.So.getAngle(this.fillPatternRotation())),h.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),h.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const f=h.getMatrix(),m=typeof DOMMatrix>"u"?{a:f[0],b:f[1],c:f[2],d:f[3],e:f[4],f:f[5]}:new DOMMatrix(f);c.setTransform(m)}return c}}_getLinearGradient(){return this._getCache(Pe,this.__getLinearGradient)}__getLinearGradient(){var l=this.fillLinearGradientColorStops();if(l){for(var c=Ne(),h=this.fillLinearGradientStartPoint(),f=this.fillLinearGradientEndPoint(),m=c.createLinearGradient(h.x,h.y,f.x,f.y),g=0;g<l.length;g+=2)m.addColorStop(l[g],l[g+1]);return m}}_getRadialGradient(){return this._getCache(Je,this.__getRadialGradient)}__getRadialGradient(){var l=this.fillRadialGradientColorStops();if(l){for(var c=Ne(),h=this.fillRadialGradientStartPoint(),f=this.fillRadialGradientEndPoint(),m=c.createRadialGradient(h.x,h.y,this.fillRadialGradientStartRadius(),f.x,f.y,this.fillRadialGradientEndRadius()),g=0;g<l.length;g+=2)m.addColorStop(l[g],l[g+1]);return m}}getShadowRGBA(){return this._getCache(Te,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var l=$.Z.colorToRGBA(this.shadowColor());if(l)return"rgba("+l.r+","+l.g+","+l.b+","+l.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const l=this.hitStrokeWidth();return"auto"===l?this.hasStroke():this.strokeEnabled()&&!!l}intersects(l){var h=this.getStage().bufferHitCanvas;return h.getContext().clear(),this.drawHit(h,null,!0),h.context.getImageData(Math.round(l.x),Math.round(l.y),1,1).data[3]>0}destroy(){return te.N.prototype.destroy.call(this),delete Oe[this.colorKey],delete this.colorKey,this}_useBufferCanvas(l){var c;if(!this.getStage()||null!==(c=this.attrs.perfectDrawEnabled)&&void 0!==c&&!c)return!1;const f=l||this.hasFill(),m=this.hasStroke(),g=1!==this.getAbsoluteOpacity();if(f&&m&&g)return!0;const v=this.hasShadow(),D=this.shadowForStrokeEnabled();return!!(f&&m&&v&&D)}setStrokeHitEnabled(l){$.Z.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(l?"auto":0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var l=this.size();return{x:this._centroid?-l.width/2:0,y:this._centroid?-l.height/2:0,width:l.width,height:l.height}}getClientRect(l={}){const c=l.skipTransform,h=l.relativeTo,f=this.getSelfRect(),g=!l.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,v=f.width+g,D=f.height+g,C=!l.skipShadow&&this.hasShadow(),M=C?this.shadowOffsetX():0,F=C?this.shadowOffsetY():0,P=v+Math.abs(M),L=D+Math.abs(F),A=C&&this.shadowBlur()||0,ae={width:P+2*A,height:L+2*A,x:-(g/2+A)+Math.min(M,0)+f.x,y:-(g/2+A)+Math.min(F,0)+f.y};return c?ae:this._transformedRect(ae,h)}drawScene(l,c){var M,F,h=this.getLayer(),f=l||h.getCanvas(),m=f.getContext(),g=this._getCanvasCache(),v=this.getSceneFunc(),D=this.hasShadow(),P=f.isCache,L=c===this;if(!this.isVisible()&&!L)return this;if(g){m.save();var A=this.getAbsoluteTransform(c).getMatrix();return m.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._drawCachedSceneCanvas(m),m.restore(),this}if(!v)return this;if(m.save(),this._useBufferCanvas()&&!P){(F=(M=this.getStage().bufferCanvas).getContext()).clear(),F.save(),F._applyLineJoin(this);var Q=this.getAbsoluteTransform(c).getMatrix();F.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),v.call(this,F,this),F.restore();var z=M.pixelRatio;D&&m._applyShadow(this),m._applyOpacity(this),m._applyGlobalCompositeOperation(this),m.drawImage(M._canvas,0,0,M.width/z,M.height/z)}else m._applyLineJoin(this),L||(Q=this.getAbsoluteTransform(c).getMatrix(),m.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),m._applyOpacity(this),m._applyGlobalCompositeOperation(this)),D&&m._applyShadow(this),v.call(this,m,this);return m.restore(),this}drawHit(l,c,h=!1){if(!this.shouldDrawHit(c,h))return this;var f=this.getLayer(),m=l||f.hitCanvas,g=m&&m.getContext(),v=this.hitFunc()||this.sceneFunc(),D=this._getCanvasCache(),C=D&&D.hit;if(this.colorKey||$.Z.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),C){g.save();var M=this.getAbsoluteTransform(c).getMatrix();return g.transform(M[0],M[1],M[2],M[3],M[4],M[5]),this._drawCachedHitCanvas(g),g.restore(),this}if(!v)return this;if(g.save(),g._applyLineJoin(this),this!==c){var P=this.getAbsoluteTransform(c).getMatrix();g.transform(P[0],P[1],P[2],P[3],P[4],P[5])}return v.call(this,g,this),g.restore(),this}drawHitFromCache(l=0){var D,C,M,F,P,c=this._getCanvasCache(),h=this._getCachedSceneCanvas(),f=c.hit,m=f.getContext(),g=f.getWidth(),v=f.getHeight();m.clear(),m.drawImage(h._canvas,0,0,g,v);try{for(M=(C=(D=m.getImageData(0,0,g,v)).data).length,F=$.Z._hexToRgb(this.colorKey),P=0;P<M;P+=4)C[P+3]>l?(C[P]=F.r,C[P+1]=F.g,C[P+2]=F.b,C[P+3]=255):C[P+3]=0;m.putImageData(D,0,0)}catch(A){$.Z.error("Unable to draw hit graph from cached scene canvas. "+A.message)}return this}hasPointerCapture(l){return ie.q0(l,this)}setPointerCapture(l){ie.I5(l,this)}releaseCapture(l){ie.Xg(l,this)}}V.prototype._fillFunc=function je(w){w.fill()},V.prototype._strokeFunc=function x(w){w.stroke()},V.prototype._fillFuncHit=function S(w){w.fill()},V.prototype._strokeFuncHit=function I(w){w.stroke()},V.prototype._centroid=!1,V.prototype.nodeType="Shape",(0,j.DA)(V),V.prototype.eventListeners={},V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function k(){this._clearCache(ce)}),V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function Z(){this._clearCache(Te)}),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function ue(){this._clearCache(ye)}),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function pe(){this._clearCache(Pe)}),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function Me(){this._clearCache(Je)}),y.F.addGetterSetter(V,"stroke",void 0,(0,N.if)()),y.F.addGetterSetter(V,"strokeWidth",2,(0,N.Kg)()),y.F.addGetterSetter(V,"fillAfterStrokeEnabled",!1),y.F.addGetterSetter(V,"hitStrokeWidth","auto",(0,N.hi)()),y.F.addGetterSetter(V,"strokeHitEnabled",!0,(0,N.I0)()),y.F.addGetterSetter(V,"perfectDrawEnabled",!0,(0,N.I0)()),y.F.addGetterSetter(V,"shadowForStrokeEnabled",!0,(0,N.I0)()),y.F.addGetterSetter(V,"lineJoin"),y.F.addGetterSetter(V,"lineCap"),y.F.addGetterSetter(V,"sceneFunc"),y.F.addGetterSetter(V,"hitFunc"),y.F.addGetterSetter(V,"dash"),y.F.addGetterSetter(V,"dashOffset",0,(0,N.Kg)()),y.F.addGetterSetter(V,"shadowColor",void 0,(0,N.sY)()),y.F.addGetterSetter(V,"shadowBlur",0,(0,N.Kg)()),y.F.addGetterSetter(V,"shadowOpacity",1,(0,N.Kg)()),y.F.addComponentsGetterSetter(V,"shadowOffset",["x","y"]),y.F.addGetterSetter(V,"shadowOffsetX",0,(0,N.Kg)()),y.F.addGetterSetter(V,"shadowOffsetY",0,(0,N.Kg)()),y.F.addGetterSetter(V,"fillPatternImage"),y.F.addGetterSetter(V,"fill",void 0,(0,N.if)()),y.F.addGetterSetter(V,"fillPatternX",0,(0,N.Kg)()),y.F.addGetterSetter(V,"fillPatternY",0,(0,N.Kg)()),y.F.addGetterSetter(V,"fillLinearGradientColorStops"),y.F.addGetterSetter(V,"strokeLinearGradientColorStops"),y.F.addGetterSetter(V,"fillRadialGradientStartRadius",0),y.F.addGetterSetter(V,"fillRadialGradientEndRadius",0),y.F.addGetterSetter(V,"fillRadialGradientColorStops"),y.F.addGetterSetter(V,"fillPatternRepeat","repeat"),y.F.addGetterSetter(V,"fillEnabled",!0),y.F.addGetterSetter(V,"strokeEnabled",!0),y.F.addGetterSetter(V,"shadowEnabled",!0),y.F.addGetterSetter(V,"dashEnabled",!0),y.F.addGetterSetter(V,"strokeScaleEnabled",!0),y.F.addGetterSetter(V,"fillPriority","color"),y.F.addComponentsGetterSetter(V,"fillPatternOffset",["x","y"]),y.F.addGetterSetter(V,"fillPatternOffsetX",0,(0,N.Kg)()),y.F.addGetterSetter(V,"fillPatternOffsetY",0,(0,N.Kg)()),y.F.addComponentsGetterSetter(V,"fillPatternScale",["x","y"]),y.F.addGetterSetter(V,"fillPatternScaleX",1,(0,N.Kg)()),y.F.addGetterSetter(V,"fillPatternScaleY",1,(0,N.Kg)()),y.F.addComponentsGetterSetter(V,"fillLinearGradientStartPoint",["x","y"]),y.F.addComponentsGetterSetter(V,"strokeLinearGradientStartPoint",["x","y"]),y.F.addGetterSetter(V,"fillLinearGradientStartPointX",0),y.F.addGetterSetter(V,"strokeLinearGradientStartPointX",0),y.F.addGetterSetter(V,"fillLinearGradientStartPointY",0),y.F.addGetterSetter(V,"strokeLinearGradientStartPointY",0),y.F.addComponentsGetterSetter(V,"fillLinearGradientEndPoint",["x","y"]),y.F.addComponentsGetterSetter(V,"strokeLinearGradientEndPoint",["x","y"]),y.F.addGetterSetter(V,"fillLinearGradientEndPointX",0),y.F.addGetterSetter(V,"strokeLinearGradientEndPointX",0),y.F.addGetterSetter(V,"fillLinearGradientEndPointY",0),y.F.addGetterSetter(V,"strokeLinearGradientEndPointY",0),y.F.addComponentsGetterSetter(V,"fillRadialGradientStartPoint",["x","y"]),y.F.addGetterSetter(V,"fillRadialGradientStartPointX",0),y.F.addGetterSetter(V,"fillRadialGradientStartPointY",0),y.F.addComponentsGetterSetter(V,"fillRadialGradientEndPoint",["x","y"]),y.F.addGetterSetter(V,"fillRadialGradientEndPointX",0),y.F.addGetterSetter(V,"fillRadialGradientEndPointY",0),y.F.addGetterSetter(V,"fillPatternRotation",0),y.F.backCompat(V,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var b=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],T=b.length;class R extends de.W{constructor(l){super(l),this.canvas=new q.RF,this.hitCanvas=new q.hh({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(l){return this.getContext().clear(l),this.getHitCanvas().getContext().clear(l),this}setZIndex(l){super.setZIndex(l);var c=this.getStage();return c&&c.content&&(c.content.removeChild(this.getNativeCanvasElement()),l<c.children.length-1?c.content.insertBefore(this.getNativeCanvasElement(),c.children[l+1].getCanvas()._canvas):c.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){te.N.prototype.moveToTop.call(this);var l=this.getStage();return l&&l.content&&(l.content.removeChild(this.getNativeCanvasElement()),l.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!te.N.prototype.moveUp.call(this))return!1;var c=this.getStage();return!(!c||!c.content||(c.content.removeChild(this.getNativeCanvasElement()),this.index<c.children.length-1?c.content.insertBefore(this.getNativeCanvasElement(),c.children[this.index+1].getCanvas()._canvas):c.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(te.N.prototype.moveDown.call(this)){var l=this.getStage();if(l){var c=l.children;l.content&&(l.content.removeChild(this.getNativeCanvasElement()),l.content.insertBefore(this.getNativeCanvasElement(),c[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(te.N.prototype.moveToBottom.call(this)){var l=this.getStage();if(l){var c=l.children;l.content&&(l.content.removeChild(this.getNativeCanvasElement()),l.content.insertBefore(this.getNativeCanvasElement(),c[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var l=this.getNativeCanvasElement();return te.N.prototype.remove.call(this),l&&l.parentNode&&$.Z._isInDocument(l)&&l.parentNode.removeChild(l),this}getStage(){return this.parent}setSize({width:l,height:c}){return this.canvas.setSize(l,c),this.hitCanvas.setSize(l,c),this._setSmoothEnabled(),this}_validateAdd(l){var c=l.getType();"Group"!==c&&"Shape"!==c&&$.Z.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(l){return(l=l||{}).width=l.width||this.getWidth(),l.height=l.height||this.getHeight(),l.x=void 0!==l.x?l.x:this.x(),l.y=void 0!==l.y?l.y:this.y(),te.N.prototype._toKonvaCanvas.call(this,l)}_checkVisibility(){this.canvas._canvas.style.display=this.visible()?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){$.Z.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){$.Z.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,$.Z.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(l){if(!this.isListening()||!this.isVisible())return null;for(var c=1,h=!1;;){for(let f=0;f<T;f++){const m=b[f],g=this._getIntersection({x:l.x+m.x*c,y:l.y+m.y*c}),v=g.shape;if(v)return v;if(h=!!g.antialiased,!g.antialiased)break}if(!h)return null;c+=1}}_getIntersection(l){const c=this.hitCanvas.pixelRatio,h=this.hitCanvas.context.getImageData(Math.round(l.x*c),Math.round(l.y*c),1,1).data,f=h[3];if(255===f){const m=$.Z._rgbToHex(h[0],h[1],h[2]),g=Oe["#"+m];return g?{shape:g}:{antialiased:!0}}return f>0?{antialiased:!0}:{}}drawScene(l,c){var h=this.getLayer(),f=l||h&&h.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&f.getContext().clear(),de.W.prototype.drawScene.call(this,f,c),this._fire("draw",{node:this}),this}drawHit(l,c){var h=this.getLayer(),f=l||h&&h.hitCanvas;return h&&h.clearBeforeDraw()&&h.getHitCanvas().getContext().clear(),de.W.prototype.drawHit.call(this,f,c),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(l){$.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(l)}getHitGraphEnabled(l){return $.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var l=this.parent;this.hitCanvas._canvas.parentNode?l.content.removeChild(this.hitCanvas._canvas):l.content.appendChild(this.hitCanvas._canvas)}}destroy(){return $.Z.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}R.prototype.nodeType="Layer",(0,j.DA)(R),y.F.addGetterSetter(R,"imageSmoothingEnabled",!0),y.F.addGetterSetter(R,"clearBeforeDraw",!0),y.F.addGetterSetter(R,"hitGraphEnabled",!0,(0,N.I0)());class U extends R{constructor(l){super(l),this.listening(!1),$.Z.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}U.prototype.nodeType="FastLayer",(0,j.DA)(U);class G extends de.W{_validateAdd(l){var c=l.getType();"Group"!==c&&"Shape"!==c&&$.Z.throw("You may only add groups and shapes to groups.")}}G.prototype.nodeType="Group",(0,j.DA)(G);var ge=Ce(584),Ie=j.zA.performance&&j.zA.performance.now?function(){return j.zA.performance.now()}:function(){return(new Date).getTime()};let ke=(()=>{class w{constructor(c,h){this.id=w.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Ie(),frameRate:0},this.func=c,this.setLayers(h)}setLayers(c){return this.layers=c?c.length>0?c:[c]:[],this}getLayers(){return this.layers}addLayer(c){var m,h=this.layers,f=h.length;for(m=0;m<f;m++)if(h[m]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){var m,h=w.animations,f=h.length;for(m=0;m<f;m++)if(h[m].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Ie(),w._addAnimation(this),this}stop(){return w._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){var g,h=c.id,f=this.animations,m=f.length;for(g=0;g<m;g++)if(f[g].id===h){this.animations.splice(g,1);break}}static _runFrames(){var f,m,g,v,D,C,M,F,c={},h=this.animations;for(v=0;v<h.length;v++)if(m=(f=h[v]).layers,g=f.func,f._updateFrameObject(Ie()),C=m.length,!g||!1!==g.call(f,f.frame))for(D=0;D<C;D++)void 0!==(M=m[D])._id&&(c[M._id]=M);for(F in c)c.hasOwnProperty(F)&&c[F].batchDraw()}static _animationLoop(){var c=w;c.animations.length?(c._runFrames(),$.Z.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,$.Z.requestAnimFrame(this._animationLoop))}}return w.animations=[],w.animIdCounter=0,w.animRunning=!1,w})();var gt={node:1,duration:1,easing:1,onFinish:1,yoyo:1},B=0,W=["fill","stroke","shadowColor"];class _e{constructor(l,c,h,f,m,g,v){this.prop=l,this.propFunc=c,this.begin=f,this._pos=f,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=h,this._change=m-this.begin,this.pause()}fire(l){var c=this[l];c&&c()}setTime(l){l>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():l<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=l,this.update())}getTime(){return this._time}setPosition(l){this.prevPos=this._pos,this.propFunc(l),this._pos=l}getPosition(l){return void 0===l&&(l=this._time),this.func(l,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(l){this.pause(),this._time=l,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var l=this.getTimer()-this._startTime;2===this.state?this.setTime(l):3===this.state&&this.setTime(this.duration-l)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}let mt=(()=>{class w{constructor(c){var g,C,h=this,f=c.node,m=f._id,v=c.easing||at.Linear,D=!!c.yoyo;g=typeof c.duration>"u"?.3:0===c.duration?.001:c.duration,this.node=f,this._id=B++;var M=f.getLayer()||(f instanceof j.So.Stage?f.getLayers():null);for(C in M||$.Z.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ke(function(){h.tween.onEnterFrame()},M),this.tween=new _e(C,function(F){h._tweenFunc(F)},v,0,1,1e3*g,D),this._addListeners(),w.attrs[m]||(w.attrs[m]={}),w.attrs[m][this._id]||(w.attrs[m][this._id]={}),w.tweens[m]||(w.tweens[m]={}),c)void 0===gt[C]&&this._addAttr(C,c[C]);this.reset(),this.onFinish=c.onFinish,this.onReset=c.onReset,this.onUpdate=c.onUpdate}_addAttr(c,h){var g,v,D,C,M,F,P,L,f=this.node,m=f._id;if((D=w.tweens[m][c])&&delete w.attrs[m][D][c],g=f.getAttr(c),$.Z._isArray(h))if(v=[],M=Math.max(h.length,g.length),"points"===c&&h.length!==g.length&&(h.length>g.length?(P=g,g=$.Z._prepareArrayForTween(g,h,f.closed())):(F=h,h=$.Z._prepareArrayForTween(h,g,f.closed()))),0===c.indexOf("fill"))for(C=0;C<M;C++)if(C%2==0)v.push(h[C]-g[C]);else{var A=$.Z.colorToRGBA(g[C]);L=$.Z.colorToRGBA(h[C]),g[C]=A,v.push({r:L.r-A.r,g:L.g-A.g,b:L.b-A.b,a:L.a-A.a})}else for(C=0;C<M;C++)v.push(h[C]-g[C]);else-1!==W.indexOf(c)?(g=$.Z.colorToRGBA(g),v={r:(L=$.Z.colorToRGBA(h)).r-g.r,g:L.g-g.g,b:L.b-g.b,a:L.a-g.a}):v=h-g;w.attrs[m][this._id][c]={start:g,diff:v,end:h,trueEnd:F,trueStart:P},w.tweens[m][c]=this._id}_tweenFunc(c){var m,g,v,D,C,M,F,P,h=this.node,f=w.attrs[h._id][this._id];for(m in f){if(D=(g=f[m]).diff,P=g.end,$.Z._isArray(v=g.start))if(C=[],F=Math.max(v.length,P.length),0===m.indexOf("fill"))for(M=0;M<F;M++)C.push(M%2==0?(v[M]||0)+D[M]*c:"rgba("+Math.round(v[M].r+D[M].r*c)+","+Math.round(v[M].g+D[M].g*c)+","+Math.round(v[M].b+D[M].b*c)+","+(v[M].a+D[M].a*c)+")");else for(M=0;M<F;M++)C.push((v[M]||0)+D[M]*c);else C=-1!==W.indexOf(m)?"rgba("+Math.round(v.r+D.r*c)+","+Math.round(v.g+D.g*c)+","+Math.round(v.b+D.b*c)+","+(v.a+D.a*c)+")":v+D*c;h.setAttr(m,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var c=this.node,h=w.attrs[c._id][this._id];h.points&&h.points.trueEnd&&c.setAttr("points",h.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var c=this.node,h=w.attrs[c._id][this._id];h.points&&h.points.trueStart&&c.points(h.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(c){return this.tween.seek(1e3*c),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var m,c=this.node._id,h=this._id,f=w.tweens[c];for(m in this.pause(),f)delete w.tweens[c][m];delete w.attrs[c][h]}}return w.attrs={},w.tweens={},w})();te.N.prototype.to=function(w){var l=w.onFinish;w.node=this,w.onFinish=function(){this.destroy(),l&&l()},new mt(w).play()};const at={BackEaseIn(w,l,c,h){var f=1.70158;return c*(w/=h)*w*((f+1)*w-f)+l},BackEaseOut(w,l,c,h){var f=1.70158;return c*((w=w/h-1)*w*((f+1)*w+f)+1)+l},BackEaseInOut(w,l,c,h){var f=1.70158;return(w/=h/2)<1?c/2*(w*w*((1+(f*=1.525))*w-f))+l:c/2*((w-=2)*w*((1+(f*=1.525))*w+f)+2)+l},ElasticEaseIn(w,l,c,h,f,m){var g=0;return 0===w?l:1==(w/=h)?l+c:(m||(m=.3*h),!f||f<Math.abs(c)?(f=c,g=m/4):g=m/(2*Math.PI)*Math.asin(c/f),-f*Math.pow(2,10*(w-=1))*Math.sin((w*h-g)*(2*Math.PI)/m)+l)},ElasticEaseOut(w,l,c,h,f,m){var g=0;return 0===w?l:1==(w/=h)?l+c:(m||(m=.3*h),!f||f<Math.abs(c)?(f=c,g=m/4):g=m/(2*Math.PI)*Math.asin(c/f),f*Math.pow(2,-10*w)*Math.sin((w*h-g)*(2*Math.PI)/m)+c+l)},ElasticEaseInOut(w,l,c,h,f,m){var g=0;return 0===w?l:2==(w/=h/2)?l+c:(m||(m=h*(.3*1.5)),!f||f<Math.abs(c)?(f=c,g=m/4):g=m/(2*Math.PI)*Math.asin(c/f),w<1?f*Math.pow(2,10*(w-=1))*Math.sin((w*h-g)*(2*Math.PI)/m)*-.5+l:f*Math.pow(2,-10*(w-=1))*Math.sin((w*h-g)*(2*Math.PI)/m)*.5+c+l)},BounceEaseOut:(w,l,c,h)=>(w/=h)<1/2.75?c*(7.5625*w*w)+l:w<2/2.75?c*(7.5625*(w-=1.5/2.75)*w+.75)+l:w<2.5/2.75?c*(7.5625*(w-=2.25/2.75)*w+.9375)+l:c*(7.5625*(w-=2.625/2.75)*w+.984375)+l,BounceEaseIn:(w,l,c,h)=>c-at.BounceEaseOut(h-w,0,c,h)+l,BounceEaseInOut:(w,l,c,h)=>w<h/2?.5*at.BounceEaseIn(2*w,0,c,h)+l:.5*at.BounceEaseOut(2*w-h,0,c,h)+.5*c+l,EaseIn:(w,l,c,h)=>c*(w/=h)*w+l,EaseOut:(w,l,c,h)=>-c*(w/=h)*(w-2)+l,EaseInOut:(w,l,c,h)=>(w/=h/2)<1?c/2*w*w+l:-c/2*(--w*(w-2)-1)+l,StrongEaseIn:(w,l,c,h)=>c*(w/=h)*w*w*w*w+l,StrongEaseOut:(w,l,c,h)=>c*((w=w/h-1)*w*w*w*w+1)+l,StrongEaseInOut:(w,l,c,h)=>(w/=h/2)<1?c/2*w*w*w*w*w+l:c/2*((w-=2)*w*w*w*w+2)+l,Linear:(w,l,c,h)=>c*w/h+l};var Rt=Ce(400);const gn=$.Z._assign(j.So,{Util:$.Z,Transform:$.w,Node:te.N,Container:de.W,Stage:we.H,stages:we.U,Layer:R,FastLayer:U,Group:G,DD:ge.DD,Shape:V,shapes:Oe,Animation:ke,Tween:mt,Easings:at,Context:Rt._y,Canvas:q.Xz});class ut extends V{_sceneFunc(l){var c=j.So.getAngle(this.angle()),h=this.clockwise();l.beginPath(),l.arc(0,0,this.outerRadius(),0,c,h),l.arc(0,0,this.innerRadius(),c,0,!h),l.closePath(),l.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}getSelfRect(){const l=this.innerRadius(),c=this.outerRadius(),h=this.clockwise(),f=j.So.getAngle(h?360-this.angle():this.angle()),m=Math.cos(Math.min(f,Math.PI)),v=Math.sin(Math.min(Math.max(Math.PI,f),3*Math.PI/2)),D=Math.sin(Math.min(f,Math.PI/2)),C=m*(m>0?l:c),F=v*(v>0?l:c),P=D*(D>0?c:l);return{x:C,y:h?-1*P:F,width:1*c-C,height:P-F}}}function Qn(w,l,c,h,f,m,g){var v=Math.sqrt(Math.pow(c-w,2)+Math.pow(h-l,2)),D=Math.sqrt(Math.pow(f-c,2)+Math.pow(m-h,2)),C=g*v/(v+D),M=g*D/(v+D);return[c-C*(f-w),h-C*(m-l),c+M*(f-w),h+M*(m-l)]}function Rn(w,l){var f,m,c=w.length,h=[];for(f=2;f<c-2;f+=2)m=Qn(w[f-2],w[f-1],w[f],w[f+1],w[f+2],w[f+3],l),!isNaN(m[0])&&(h.push(m[0]),h.push(m[1]),h.push(w[f]),h.push(w[f+1]),h.push(m[2]),h.push(m[3]));return h}ut.prototype._centroid=!0,ut.prototype.className="Arc",ut.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,j.DA)(ut),y.F.addGetterSetter(ut,"innerRadius",0,(0,N.Kg)()),y.F.addGetterSetter(ut,"outerRadius",0,(0,N.Kg)()),y.F.addGetterSetter(ut,"angle",0,(0,N.Kg)()),y.F.addGetterSetter(ut,"clockwise",!1,(0,N.I0)());class nn extends V{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){var v,D,C,c=this.points(),h=c.length,f=this.tension(),m=this.closed(),g=this.bezier();if(h){if(l.beginPath(),l.moveTo(c[0],c[1]),0!==f&&h>4){for(D=(v=this.getTensionPoints()).length,C=m?0:4,m||l.quadraticCurveTo(v[0],v[1],v[2],v[3]);C<D-2;)l.bezierCurveTo(v[C++],v[C++],v[C++],v[C++],v[C++],v[C++]);m||l.quadraticCurveTo(v[D-2],v[D-1],c[h-2],c[h-1])}else if(g)for(C=2;C<h;)l.bezierCurveTo(c[C++],c[C++],c[C++],c[C++],c[C++],c[C++]);else for(C=2;C<h;C+=2)l.lineTo(c[C],c[C+1]);m?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Rn(this.points(),this.tension())}_getTensionPointsClosed(){var l=this.points(),c=l.length,h=this.tension(),f=Qn(l[c-2],l[c-1],l[0],l[1],l[2],l[3],h),m=Qn(l[c-4],l[c-3],l[c-2],l[c-1],l[0],l[1],h),g=Rn(l,h);return[f[2],f[3]].concat(g).concat([m[0],m[1],l[c-2],l[c-1],m[2],m[3],f[0],f[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};for(var g,v,c=(l=0!==this.tension()?[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:this.points())[0],h=l[0],f=l[1],m=l[1],D=0;D<l.length/2;D++)g=l[2*D],v=l[2*D+1],c=Math.min(c,g),h=Math.max(h,g),f=Math.min(f,v),m=Math.max(m,v);return{x:c,y:f,width:h-c,height:m-f}}}nn.prototype.className="Line",nn.prototype._attrsAffectingSize=["points","bezier","tension"],(0,j.DA)(nn),y.F.addGetterSetter(nn,"closed",!1),y.F.addGetterSetter(nn,"bezier",!1),y.F.addGetterSetter(nn,"tension",0,(0,N.Kg)()),y.F.addGetterSetter(nn,"points",[],(0,N.q8)());class wt extends V{constructor(l){super(l),this.dataArray=[],this.pathLength=0,this.dataArray=wt.parsePathData(this.data()),this.pathLength=0;for(var c=0;c<this.dataArray.length;++c)this.pathLength+=this.dataArray[c].pathLength;this.on("dataChange.konva",function(){this.dataArray=wt.parsePathData(this.data()),this.pathLength=0;for(var h=0;h<this.dataArray.length;++h)this.pathLength+=this.dataArray[h].pathLength})}_sceneFunc(l){var c=this.dataArray;l.beginPath();for(var h=!1,f=0;f<c.length;f++){var g=c[f].points;switch(c[f].command){case"L":l.lineTo(g[0],g[1]);break;case"M":l.moveTo(g[0],g[1]);break;case"C":l.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5]);break;case"Q":l.quadraticCurveTo(g[0],g[1],g[2],g[3]);break;case"A":var v=g[0],D=g[1],C=g[2],M=g[3],F=g[4],P=g[5],L=g[6],A=g[7],Q=C>M?C:M,z=C>M?1:C/M,ae=C>M?M/C:1;l.translate(v,D),l.rotate(L),l.scale(z,ae),l.arc(0,0,Q,F,F+P,1-A),l.scale(1/z,1/ae),l.rotate(-L),l.translate(-v,-D);break;case"z":h=!0,l.closePath()}}h||this.hasFill()?l.fillStrokeShape(this):l.strokeShape(this)}getSelfRect(){var l=[];this.dataArray.forEach(function(C){if("A"===C.command){var M=C.points[4],F=C.points[5],P=C.points[4]+F,L=Math.PI/180;if(Math.abs(M-P)<L&&(L=Math.abs(M-P)),F<0)for(let A=M-L;A>P;A-=L){const Q=wt.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],A,0);l.push(Q.x,Q.y)}else for(let A=M+L;A<P;A+=L){const Q=wt.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],A,0);l.push(Q.x,Q.y)}}else if("C"===C.command)for(let A=0;A<=1;A+=.01){const Q=wt.getPointOnCubicBezier(A,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);l.push(Q.x,Q.y)}else l=l.concat(C.points)});for(var g,v,c=l[0],h=l[0],f=l[1],m=l[1],D=0;D<l.length/2;D++)g=l[2*D],v=l[2*D+1],isNaN(g)||(c=Math.min(c,g),h=Math.max(h,g)),isNaN(v)||(f=Math.min(f,v),m=Math.max(m,v));return{x:c,y:f,width:h-c,height:m-f}}getLength(){return this.pathLength}getPointAtLength(l){var c,h=0,f=this.dataArray.length;if(!f)return null;for(;h<f&&l>this.dataArray[h].pathLength;)l-=this.dataArray[h].pathLength,++h;if(h===f)return{x:(c=this.dataArray[h-1].points.slice(-2))[0],y:c[1]};if(l<.01)return{x:(c=this.dataArray[h].points.slice(0,2))[0],y:c[1]};var m=this.dataArray[h],g=m.points;switch(m.command){case"L":return wt.getPointOnLine(l,m.start.x,m.start.y,g[0],g[1]);case"C":return wt.getPointOnCubicBezier(l/m.pathLength,m.start.x,m.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return wt.getPointOnQuadraticBezier(l/m.pathLength,m.start.x,m.start.y,g[0],g[1],g[2],g[3]);case"A":var F=g[4];return wt.getPointOnEllipticalArc(g[0],g[1],g[2],g[3],F+=g[5]*l/m.pathLength,g[6])}return null}static getLineLength(l,c,h,f){return Math.sqrt((h-l)*(h-l)+(f-c)*(f-c))}static getPointOnLine(l,c,h,f,m,g,v){void 0===g&&(g=c),void 0===v&&(v=h);var D=(m-h)/(f-c+1e-8),C=Math.sqrt(l*l/(1+D*D));f<c&&(C*=-1);var F,M=D*C;if(f===c)F={x:g,y:v+M};else if((v-h)/(g-c+1e-8)===D)F={x:g+C,y:v+M};else{var P,L,A=this.getLineLength(c,h,f,m),Q=(g-c)*(f-c)+(v-h)*(m-h),z=this.getLineLength(g,v,P=c+(Q/=A*A)*(f-c),L=h+Q*(m-h)),ae=Math.sqrt(l*l-z*z);C=Math.sqrt(ae*ae/(1+D*D)),f<c&&(C*=-1),F={x:P+C,y:L+(M=D*C)}}return F}static getPointOnCubicBezier(l,c,h,f,m,g,v,D,C){function M(z){return z*z*z}function F(z){return 3*z*z*(1-z)}function P(z){return 3*z*(1-z)*(1-z)}function L(z){return(1-z)*(1-z)*(1-z)}return{x:D*M(l)+g*F(l)+f*P(l)+c*L(l),y:C*M(l)+v*F(l)+m*P(l)+h*L(l)}}static getPointOnQuadraticBezier(l,c,h,f,m,g,v){function D(L){return L*L}function C(L){return 2*L*(1-L)}function M(L){return(1-L)*(1-L)}return{x:g*D(l)+f*C(l)+c*M(l),y:v*D(l)+m*C(l)+h*M(l)}}static getPointOnEllipticalArc(l,c,h,f,m,g){var v=Math.cos(g),D=Math.sin(g),C_x=h*Math.cos(m),C_y=f*Math.sin(m);return{x:l+(C_x*v-C_y*D),y:c+(C_x*D+C_y*v)}}static parsePathData(l){if(!l)return[];var c=l,h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];c=c.replace(new RegExp(" ","g"),",");for(var f=0;f<h.length;f++)c=c.replace(new RegExp(h[f],"g"),"|"+h[f]);var F,m=c.split("|"),g=[],v=[],D=0,C=0,M=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(f=1;f<m.length;f++){var P=m[f],L=P.charAt(0);for(P=P.slice(1),v.length=0;F=M.exec(P);)v.push(F[0]);for(var A=[],Q=0,z=v.length;Q<z;Q++)if("00"!==v[Q]){var ae=parseFloat(v[Q]);isNaN(ae)?A.push(0):A.push(ae)}else A.push(0,0);for(;A.length>0&&!isNaN(A[0]);){var me,Re,Se,Le,ee,Fe,ve,Be,bt,Zt,re=null,se=[],he=D,xe=C;switch(L){case"l":D+=A.shift(),C+=A.shift(),re="L",se.push(D,C);break;case"L":D=A.shift(),C=A.shift(),se.push(D,C);break;case"m":var ft=A.shift(),Ut=A.shift();if(D+=ft,C+=Ut,re="M",g.length>2&&"z"===g[g.length-1].command)for(var an=g.length-2;an>=0;an--)if("M"===g[an].command){D=g[an].points[0]+ft,C=g[an].points[1]+Ut;break}se.push(D,C),L="l";break;case"M":D=A.shift(),C=A.shift(),re="M",se.push(D,C),L="L";break;case"h":D+=A.shift(),re="L",se.push(D,C);break;case"H":D=A.shift(),re="L",se.push(D,C);break;case"v":C+=A.shift(),re="L",se.push(D,C);break;case"V":C=A.shift(),re="L",se.push(D,C);break;case"C":se.push(A.shift(),A.shift(),A.shift(),A.shift()),D=A.shift(),C=A.shift(),se.push(D,C);break;case"c":se.push(D+A.shift(),C+A.shift(),D+A.shift(),C+A.shift()),D+=A.shift(),C+=A.shift(),re="C",se.push(D,C);break;case"S":Re=D,Se=C,"C"===(me=g[g.length-1]).command&&(Re=D+(D-me.points[2]),Se=C+(C-me.points[3])),se.push(Re,Se,A.shift(),A.shift()),D=A.shift(),C=A.shift(),re="C",se.push(D,C);break;case"s":Re=D,Se=C,"C"===(me=g[g.length-1]).command&&(Re=D+(D-me.points[2]),Se=C+(C-me.points[3])),se.push(Re,Se,D+A.shift(),C+A.shift()),D+=A.shift(),C+=A.shift(),re="C",se.push(D,C);break;case"Q":se.push(A.shift(),A.shift()),D=A.shift(),C=A.shift(),se.push(D,C);break;case"q":se.push(D+A.shift(),C+A.shift()),D+=A.shift(),C+=A.shift(),re="Q",se.push(D,C);break;case"T":Re=D,Se=C,"Q"===(me=g[g.length-1]).command&&(Re=D+(D-me.points[0]),Se=C+(C-me.points[1])),D=A.shift(),C=A.shift(),re="Q",se.push(Re,Se,D,C);break;case"t":Re=D,Se=C,"Q"===(me=g[g.length-1]).command&&(Re=D+(D-me.points[0]),Se=C+(C-me.points[1])),D+=A.shift(),C+=A.shift(),re="Q",se.push(Re,Se,D,C);break;case"A":Le=A.shift(),ee=A.shift(),Fe=A.shift(),ve=A.shift(),Be=A.shift(),bt=D,Zt=C,D=A.shift(),C=A.shift(),re="A",se=this.convertEndpointToCenterParameterization(bt,Zt,D,C,ve,Be,Le,ee,Fe);break;case"a":Le=A.shift(),ee=A.shift(),Fe=A.shift(),ve=A.shift(),Be=A.shift(),bt=D,Zt=C,D+=A.shift(),C+=A.shift(),re="A",se=this.convertEndpointToCenterParameterization(bt,Zt,D,C,ve,Be,Le,ee,Fe)}g.push({command:re||L,points:se,start:{x:he,y:xe},pathLength:this.calcLength(he,xe,re||L,se)})}("z"===L||"Z"===L)&&g.push({command:"z",points:[],start:void 0,pathLength:0})}return g}static calcLength(l,c,h,f){var m,g,v,D,C=wt;switch(h){case"L":return C.getLineLength(l,c,f[0],f[1]);case"C":for(m=0,g=C.getPointOnCubicBezier(0,l,c,f[0],f[1],f[2],f[3],f[4],f[5]),D=.01;D<=1;D+=.01)v=C.getPointOnCubicBezier(D,l,c,f[0],f[1],f[2],f[3],f[4],f[5]),m+=C.getLineLength(g.x,g.y,v.x,v.y),g=v;return m;case"Q":for(m=0,g=C.getPointOnQuadraticBezier(0,l,c,f[0],f[1],f[2],f[3]),D=.01;D<=1;D+=.01)v=C.getPointOnQuadraticBezier(D,l,c,f[0],f[1],f[2],f[3]),m+=C.getLineLength(g.x,g.y,v.x,v.y),g=v;return m;case"A":m=0;var M=f[4],F=f[5],P=f[4]+F,L=Math.PI/180;if(Math.abs(M-P)<L&&(L=Math.abs(M-P)),g=C.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],M,0),F<0)for(D=M-L;D>P;D-=L)v=C.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],D,0),m+=C.getLineLength(g.x,g.y,v.x,v.y),g=v;else for(D=M+L;D<P;D+=L)v=C.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],D,0),m+=C.getLineLength(g.x,g.y,v.x,v.y),g=v;return v=C.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],P,0),m+C.getLineLength(g.x,g.y,v.x,v.y)}return 0}static convertEndpointToCenterParameterization(l,c,h,f,m,g,v,D,C){var M=C*(Math.PI/180),F=Math.cos(M)*(l-h)/2+Math.sin(M)*(c-f)/2,P=-1*Math.sin(M)*(l-h)/2+Math.cos(M)*(c-f)/2,L=F*F/(v*v)+P*P/(D*D);L>1&&(v*=Math.sqrt(L),D*=Math.sqrt(L));var A=Math.sqrt((v*v*(D*D)-v*v*(P*P)-D*D*(F*F))/(v*v*(P*P)+D*D*(F*F)));m===g&&(A*=-1),isNaN(A)&&(A=0);var Q=A*v*P/D,z=A*-D*F/v,ae=(l+h)/2+Math.cos(M)*Q-Math.sin(M)*z,re=(c+f)/2+Math.sin(M)*Q+Math.cos(M)*z,se=function(ee){return Math.sqrt(ee[0]*ee[0]+ee[1]*ee[1])},he=function(ee,Fe){return(ee[0]*Fe[0]+ee[1]*Fe[1])/(se(ee)*se(Fe))},xe=function(ee,Fe){return(ee[0]*Fe[1]<ee[1]*Fe[0]?-1:1)*Math.acos(he(ee,Fe))},me=xe([1,0],[(F-Q)/v,(P-z)/D]),Re=[(F-Q)/v,(P-z)/D],Se=[(-1*F-Q)/v,(-1*P-z)/D],Le=xe(Re,Se);return he(Re,Se)<=-1&&(Le=Math.PI),he(Re,Se)>=1&&(Le=0),0===g&&Le>0&&(Le-=2*Math.PI),1===g&&Le<0&&(Le+=2*Math.PI),[ae,re,v,D,me,Le,M,g]}}wt.prototype.className="Path",wt.prototype._attrsAffectingSize=["data"],(0,j.DA)(wt),y.F.addGetterSetter(wt,"data");class Tr extends nn{_sceneFunc(l){super._sceneFunc(l);var c=2*Math.PI,h=this.points(),f=h,m=0!==this.tension()&&h.length>4;m&&(f=this.getTensionPoints());var D,C,g=this.pointerLength(),v=h.length;if(m){const P=[f[f.length-4],f[f.length-3],f[f.length-2],f[f.length-1],h[v-2],h[v-1]],L=wt.calcLength(f[f.length-4],f[f.length-3],"C",P),A=wt.getPointOnQuadraticBezier(Math.min(1,1-g/L),P[0],P[1],P[2],P[3],P[4],P[5]);D=h[v-2]-A.x,C=h[v-1]-A.y}else D=h[v-2]-h[v-4],C=h[v-1]-h[v-3];var M=(Math.atan2(C,D)+c)%c,F=this.pointerWidth();this.pointerAtEnding()&&(l.save(),l.beginPath(),l.translate(h[v-2],h[v-1]),l.rotate(M),l.moveTo(0,0),l.lineTo(-g,F/2),l.lineTo(-g,-F/2),l.closePath(),l.restore(),this.__fillStroke(l)),this.pointerAtBeginning()&&(l.save(),l.beginPath(),l.translate(h[0],h[1]),m?(D=(f[0]+f[2])/2-h[0],C=(f[1]+f[3])/2-h[1]):(D=h[2]-h[0],C=h[3]-h[1]),l.rotate((Math.atan2(-C,-D)+c)%c),l.moveTo(0,0),l.lineTo(-g,F/2),l.lineTo(-g,-F/2),l.closePath(),l.restore(),this.__fillStroke(l))}__fillStroke(l){var c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,l.setLineDash([])),l.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const l=super.getSelfRect(),c=this.pointerWidth()/2;return{x:l.x-c,y:l.y-c,width:l.width+2*c,height:l.height+2*c}}}Tr.prototype.className="Arrow",(0,j.DA)(Tr),y.F.addGetterSetter(Tr,"pointerLength",10,(0,N.Kg)()),y.F.addGetterSetter(Tr,"pointerWidth",10,(0,N.Kg)()),y.F.addGetterSetter(Tr,"pointerAtBeginning",!1),y.F.addGetterSetter(Tr,"pointerAtEnding",!0);class hi extends V{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),l.closePath(),l.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(l){this.radius()!==l/2&&this.radius(l/2)}setHeight(l){this.radius()!==l/2&&this.radius(l/2)}}hi.prototype._centroid=!0,hi.prototype.className="Circle",hi.prototype._attrsAffectingSize=["radius"],(0,j.DA)(hi),y.F.addGetterSetter(hi,"radius",0,(0,N.Kg)());class Jn extends V{_sceneFunc(l){var c=this.radiusX(),h=this.radiusY();l.beginPath(),l.save(),c!==h&&l.scale(1,h/c),l.arc(0,0,c,0,2*Math.PI,!1),l.restore(),l.closePath(),l.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(l){this.radiusX(l/2)}setHeight(l){this.radiusY(l/2)}}Jn.prototype.className="Ellipse",Jn.prototype._centroid=!0,Jn.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,j.DA)(Jn),y.F.addComponentsGetterSetter(Jn,"radius",["x","y"]),y.F.addGetterSetter(Jn,"radiusX",0,(0,N.Kg)()),y.F.addGetterSetter(Jn,"radiusY",0,(0,N.Kg)());class Pn extends V{constructor(l){super(l),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const l=this.image();l&&l.complete||l&&4===l.readyState||l&&l.addEventListener&&l.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(l){const c=this.getWidth(),h=this.getHeight(),f=this.cornerRadius(),m=this.attrs.image;let g;if(m){const v=this.attrs.cropWidth,D=this.attrs.cropHeight;g=v&&D?[m,this.cropX(),this.cropY(),v,D,0,0,c,h]:[m,0,0,c,h]}(this.hasFill()||this.hasStroke()||f)&&(l.beginPath(),f?$.Z.drawRoundedRectPath(l,c,h,f):l.rect(0,0,c,h),l.closePath(),l.fillStrokeShape(this)),m&&(f&&l.clip(),l.drawImage.apply(l,g))}_hitFunc(l){var c=this.width(),h=this.height(),f=this.cornerRadius();l.beginPath(),f?$.Z.drawRoundedRectPath(l,c,h,f):l.rect(0,0,c,h),l.closePath(),l.fillStrokeShape(this)}getWidth(){var l,c;return null!==(l=this.attrs.width)&&void 0!==l?l:null===(c=this.image())||void 0===c?void 0:c.width}getHeight(){var l,c;return null!==(l=this.attrs.height)&&void 0!==l?l:null===(c=this.image())||void 0===c?void 0:c.height}static fromURL(l,c,h=null){var f=$.Z.createImageElement();f.onload=function(){var m=new Pn({image:f});c(m)},f.onerror=h,f.crossOrigin="Anonymous",f.src=l}}Pn.prototype.className="Image",(0,j.DA)(Pn),y.F.addGetterSetter(Pn,"cornerRadius",0,(0,N.Jj)(4)),y.F.addGetterSetter(Pn,"image"),y.F.addComponentsGetterSetter(Pn,"crop",["x","y","width","height"]),y.F.addGetterSetter(Pn,"cropX",0,(0,N.Kg)()),y.F.addGetterSetter(Pn,"cropY",0,(0,N.Kg)()),y.F.addGetterSetter(Pn,"cropWidth",0,(0,N.Kg)()),y.F.addGetterSetter(Pn,"cropHeight",0,(0,N.Kg)());var Us=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],la="right",er="down",Hs="left",pf=Us.length;class Vs extends G{constructor(l){super(l),this.on("add.konva",function(c){this._addListeners(c.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(l){var h,c=this,f=function(){c._sync()};for(h=0;h<pf;h++)l.on(Us[h]+"Change.konva",f)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var h,f,m,g,v,D,C,l=this.getText(),c=this.getTag();if(l&&c){switch(h=l.width(),f=l.height(),m=c.pointerDirection(),g=c.pointerWidth(),C=c.pointerHeight(),v=0,D=0,m){case"up":v=h/2,D=-1*C;break;case la:v=h+g,D=f/2;break;case er:v=h/2,D=f+C;break;case Hs:v=-1*g,D=f/2}c.setAttrs({x:-1*v,y:-1*D,width:h,height:f}),l.setAttrs({x:-1*v,y:-1*D})}}}Vs.prototype.className="Label",(0,j.DA)(Vs);class qr extends V{_sceneFunc(l){var c=this.width(),h=this.height(),f=this.pointerDirection(),m=this.pointerWidth(),g=this.pointerHeight(),v=this.cornerRadius();let D=0,C=0,M=0,F=0;"number"==typeof v?D=C=M=F=Math.min(v,c/2,h/2):(D=Math.min(v[0]||0,c/2,h/2),C=Math.min(v[1]||0,c/2,h/2),F=Math.min(v[2]||0,c/2,h/2),M=Math.min(v[3]||0,c/2,h/2)),l.beginPath(),l.moveTo(D,0),"up"===f&&(l.lineTo((c-m)/2,0),l.lineTo(c/2,-1*g),l.lineTo((c+m)/2,0)),l.lineTo(c-C,0),l.arc(c-C,C,C,3*Math.PI/2,0,!1),f===la&&(l.lineTo(c,(h-g)/2),l.lineTo(c+m,h/2),l.lineTo(c,(h+g)/2)),l.lineTo(c,h-F),l.arc(c-F,h-F,F,0,Math.PI/2,!1),f===er&&(l.lineTo((c+m)/2,h),l.lineTo(c/2,h+g),l.lineTo((c-m)/2,h)),l.lineTo(M,h),l.arc(M,h-M,M,Math.PI/2,Math.PI,!1),f===Hs&&(l.lineTo(0,(h+g)/2),l.lineTo(-1*m,h/2),l.lineTo(0,(h-g)/2)),l.lineTo(0,D),l.arc(D,D,D,Math.PI,3*Math.PI/2,!1),l.closePath(),l.fillStrokeShape(this)}getSelfRect(){var l=0,c=0,h=this.pointerWidth(),f=this.pointerHeight(),m=this.pointerDirection(),g=this.width(),v=this.height();return"up"===m?(c-=f,v+=f):m===er?v+=f:m===Hs?(l-=1.5*h,g+=h):m===la&&(g+=1.5*h),{x:l,y:c,width:g,height:v}}}qr.prototype.className="Tag",(0,j.DA)(qr),y.F.addGetterSetter(qr,"pointerDirection","none"),y.F.addGetterSetter(qr,"pointerWidth",0,(0,N.Kg)()),y.F.addGetterSetter(qr,"pointerHeight",0,(0,N.Kg)()),y.F.addGetterSetter(qr,"cornerRadius",0,(0,N.Jj)(4));class fi extends V{_sceneFunc(l){var c=this.cornerRadius(),h=this.width(),f=this.height();l.beginPath(),c?$.Z.drawRoundedRectPath(l,h,f,c):l.rect(0,0,h,f),l.closePath(),l.fillStrokeShape(this)}}fi.prototype.className="Rect",(0,j.DA)(fi),y.F.addGetterSetter(fi,"cornerRadius",0,(0,N.Jj)(4));class Yr extends V{_sceneFunc(l){const c=this._getPoints();l.beginPath(),l.moveTo(c[0].x,c[0].y);for(var h=1;h<c.length;h++)l.lineTo(c[h].x,c[h].y);l.closePath(),l.fillStrokeShape(this)}_getPoints(){const l=this.attrs.sides,c=this.attrs.radius||0,h=[];for(var f=0;f<l;f++)h.push({x:c*Math.sin(2*f*Math.PI/l),y:-1*c*Math.cos(2*f*Math.PI/l)});return h}getSelfRect(){const l=this._getPoints();var c=l[0].x,h=l[0].y,f=l[0].x,m=l[0].y;return l.forEach(g=>{c=Math.min(c,g.x),h=Math.max(h,g.x),f=Math.min(f,g.y),m=Math.max(m,g.y)}),{x:c,y:f,width:h-c,height:m-f}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}}Yr.prototype.className="RegularPolygon",Yr.prototype._centroid=!0,Yr.prototype._attrsAffectingSize=["radius"],(0,j.DA)(Yr),y.F.addGetterSetter(Yr,"radius",0,(0,N.Kg)()),y.F.addGetterSetter(Yr,"sides",0,(0,N.Kg)());var mu=2*Math.PI;class Xr extends V{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.innerRadius(),0,mu,!1),l.moveTo(this.outerRadius(),0),l.arc(0,0,this.outerRadius(),mu,0,!0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}}Xr.prototype.className="Ring",Xr.prototype._centroid=!0,Xr.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,j.DA)(Xr),y.F.addGetterSetter(Xr,"innerRadius",0,(0,N.Kg)()),y.F.addGetterSetter(Xr,"outerRadius",0,(0,N.Kg)());class tr extends V{constructor(l){super(l),this._updated=!0,this.anim=new ke(()=>{var c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(l){var c=this.animation(),h=this.frameIndex(),f=4*h,m=this.animations()[c],g=this.frameOffsets(),v=m[f+0],D=m[f+1],C=m[f+2],M=m[f+3],F=this.image();if((this.hasFill()||this.hasStroke())&&(l.beginPath(),l.rect(0,0,C,M),l.closePath(),l.fillStrokeShape(this)),F)if(g){var P=g[c],L=2*h;l.drawImage(F,v,D,C,M,P[L+0],P[L+1],C,M)}else l.drawImage(F,v,D,C,M,0,0,C,M)}_hitFunc(l){var c=this.animation(),h=this.frameIndex(),f=4*h,m=this.animations()[c],g=this.frameOffsets(),v=m[f+2],D=m[f+3];if(l.beginPath(),g){var C=g[c],M=2*h;l.rect(C[M+0],C[M+1],v,D)}else l.rect(0,0,v,D);l.closePath(),l.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var l=this;this.interval=setInterval(function(){l._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var l=this.getLayer();this.anim.setLayers(l),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var l=this.frameIndex(),c=this.animation(),h=this.animations();this.frameIndex(l<h[c].length/4-1?l+1:0)}}tr.prototype.className="Sprite",(0,j.DA)(tr),y.F.addGetterSetter(tr,"animation"),y.F.addGetterSetter(tr,"animations"),y.F.addGetterSetter(tr,"frameOffsets"),y.F.addGetterSetter(tr,"image"),y.F.addGetterSetter(tr,"frameIndex",0,(0,N.Kg)()),y.F.addGetterSetter(tr,"frameRate",17,(0,N.Kg)()),y.F.backCompat(tr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Ar extends V{_sceneFunc(l){var c=this.innerRadius(),h=this.outerRadius(),f=this.numPoints();l.beginPath(),l.moveTo(0,0-h);for(var m=1;m<2*f;m++){var g=m%2==0?h:c,v=g*Math.sin(m*Math.PI/f),D=-1*g*Math.cos(m*Math.PI/f);l.lineTo(v,D)}l.closePath(),l.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(l){this.outerRadius(l/2)}setHeight(l){this.outerRadius(l/2)}}function $s(w){return Array.from(w)}Ar.prototype.className="Star",Ar.prototype._centroid=!0,Ar.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,j.DA)(Ar),y.F.addGetterSetter(Ar,"numPoints",5,(0,N.Kg)()),y.F.addGetterSetter(Ar,"innerRadius",0,(0,N.Kg)()),y.F.addGetterSetter(Ar,"outerRadius",0,(0,N.Kg)());var ki,xr="auto",Qr="justify",vu="2d",Rr=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],zn=Rr.length;function Ws(){return ki||(ki=$.Z.createCanvasElement().getContext(vu))}class At extends V{constructor(l){super(function gi(w){return!(w=w||{}).fillLinearGradientColorStops&&!w.fillRadialGradientColorStops&&!w.fillPatternImage&&(w.fill=w.fill||"black"),w}(l)),this._partialTextX=0,this._partialTextY=0;for(var c=0;c<zn;c++)this.on(Rr[c]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(l){var c=this.textArr,h=c.length;if(this.text()){var z,f=this.padding(),m=this.fontSize(),g=this.lineHeight()*m,v=this.verticalAlign(),D=0,C=this.align(),M=this.getWidth(),F=this.letterSpacing(),P=this.fill(),L=this.textDecoration(),A=-1!==L.indexOf("underline"),Q=-1!==L.indexOf("line-through"),ae=0,re=(ae=g/2,0),se=0;for(l.setAttr("font",this._getContextFont()),l.setAttr("textBaseline","middle"),l.setAttr("textAlign","left"),"middle"===v?D=(this.getHeight()-h*g-2*f)/2:"bottom"===v&&(D=this.getHeight()-h*g-2*f),l.translate(f,D+f),z=0;z<h;z++){re=0,se=0;var Se,Le,ee,he=c[z],xe=he.text,me=he.width,Re=he.lastInParagraph;if(l.save(),"right"===C?re+=M-me-2*f:"center"===C&&(re+=(M-me-2*f)/2),A){l.save(),l.beginPath(),l.moveTo(re,ae+se+Math.round(m/2)),Le=0==(Se=xe.split(" ").length-1),ee=C!==Qr||Re?me:M-2*f,l.lineTo(re+Math.round(ee),ae+se+Math.round(m/2)),l.lineWidth=m/15;const ft=this._getLinearGradient();l.strokeStyle=ft||P,l.stroke(),l.restore()}if(Q){l.save(),l.beginPath(),l.moveTo(re,ae+se),Le=0==(Se=xe.split(" ").length-1),ee=C===Qr&&Re&&!Le?M-2*f:me,l.lineTo(re+Math.round(ee),ae+se),l.lineWidth=m/15;const ft=this._getLinearGradient();l.strokeStyle=ft||P,l.stroke(),l.restore()}if(0!==F||C===Qr){Se=xe.split(" ").length-1;for(var Fe=$s(xe),ve=0;ve<Fe.length;ve++){var Be=Fe[ve];" "===Be&&!Re&&C===Qr&&(re+=(M-2*f-me)/Se),this._partialTextX=re,this._partialTextY=ae+se,this._partialText=Be,l.fillStrokeShape(this),re+=this.measureSize(Be).width+F}}else this._partialTextX=re,this._partialTextY=ae+se,this._partialText=xe,l.fillStrokeShape(this);l.restore(),h>1&&(ae+=g)}}}_hitFunc(l){var c=this.getWidth(),h=this.getHeight();l.beginPath(),l.rect(0,0,c,h),l.closePath(),l.fillStrokeShape(this)}setText(l){var c=$.Z._isString(l)?l:null==l?"":l+"";return this._setAttr("text",c),this}getWidth(){return this.attrs.width===xr||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===xr||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return $.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(l){var f,c=Ws(),h=this.fontSize();return c.save(),c.font=this._getContextFont(),f=c.measureText(l),c.restore(),{width:f.width,height:h}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+function gf(w){return w.split(",").map(l=>{const c=(l=l.trim()).indexOf(" ")>=0,h=l.indexOf('"')>=0||l.indexOf("'")>=0;return c&&!h&&(l=`"${l}"`),l}).join(", ")}(this.fontFamily())}_addTextLine(l){this.align()===Qr&&(l=l.trim());var h=this._getTextWidth(l);return this.textArr.push({text:l,width:h,lastInParagraph:!1})}_getTextWidth(l){var c=this.letterSpacing(),h=l.length;return Ws().measureText(l).width+(h?c*(h-1):0)}_setTextData(){var l=this.text().split("\n"),c=+this.fontSize(),h=0,f=this.lineHeight()*c,m=this.attrs.width,g=this.attrs.height,v=m!==xr&&void 0!==m,D=g!==xr&&void 0!==g,C=this.padding(),M=m-2*C,F=g-2*C,P=0,L=this.wrap(),Q="char"!==L&&"none"!==L,z=this.ellipsis();this.textArr=[],Ws().font=this._getContextFont();for(var ae=z?this._getTextWidth("\u2026"):0,re=0,se=l.length;re<se;++re){var he=l[re],xe=this._getTextWidth(he);if(v&&xe>M)for(;he.length>0;){for(var me=0,Re=he.length,Se="",Le=0;me<Re;){var ee=me+Re>>>1,Fe=he.slice(0,ee+1),ve=this._getTextWidth(Fe)+ae;ve<=M?(me=ee+1,Se=Fe,Le=ve):Re=ee}if(!Se)break;if(Q){var Be,bt=he[Se.length];(Be=(" "===bt||"-"===bt)&&Le<=M?Se.length:Math.max(Se.lastIndexOf(" "),Se.lastIndexOf("-"))+1)>0&&(Se=Se.slice(0,me=Be),Le=this._getTextWidth(Se))}if(Se=Se.trimRight(),this._addTextLine(Se),h=Math.max(h,Le),this._shouldHandleEllipsis(P+=f)){this._tryToAddEllipsisToLastLine();break}if((he=(he=he.slice(me)).trimLeft()).length>0&&(xe=this._getTextWidth(he))<=M){this._addTextLine(he),P+=f,h=Math.max(h,xe);break}}else this._addTextLine(he),P+=f,h=Math.max(h,xe),this._shouldHandleEllipsis(P)&&re<se-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),D&&P+f>F)break}this.textHeight=c,this.textWidth=h}_shouldHandleEllipsis(l){var c=+this.fontSize(),h=this.lineHeight()*c,f=this.attrs.height,m=f!==xr&&void 0!==f,v=f-2*this.padding();return!("none"!==this.wrap())||m&&l+h>v}_tryToAddEllipsisToLastLine(){var l=this.attrs.width,c=l!==xr&&void 0!==l,f=l-2*this.padding(),m=this.ellipsis(),g=this.textArr[this.textArr.length-1];g&&m&&(c&&(this._getTextWidth(g.text+"\u2026")<f||(g.text=g.text.slice(0,g.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(g.text+"\u2026"))}getStrokeScaleEnabled(){return!0}}function va(w){w.fillText(this.partialText,0,0)}function ya(w){w.strokeText(this.partialText,0,0)}At.prototype._fillFunc=function Ks(w){w.fillText(this._partialText,this._partialTextX,this._partialTextY)},At.prototype._strokeFunc=function wu(w){w.strokeText(this._partialText,this._partialTextX,this._partialTextY)},At.prototype.className="Text",At.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,j.DA)(At),y.F.overWriteSetter(At,"width",(0,N.hi)()),y.F.overWriteSetter(At,"height",(0,N.hi)()),y.F.addGetterSetter(At,"fontFamily","Arial"),y.F.addGetterSetter(At,"fontSize",12,(0,N.Kg)()),y.F.addGetterSetter(At,"fontStyle","normal"),y.F.addGetterSetter(At,"fontVariant","normal"),y.F.addGetterSetter(At,"padding",0,(0,N.Kg)()),y.F.addGetterSetter(At,"align","left"),y.F.addGetterSetter(At,"verticalAlign","top"),y.F.addGetterSetter(At,"lineHeight",1,(0,N.Kg)()),y.F.addGetterSetter(At,"wrap","word"),y.F.addGetterSetter(At,"ellipsis",!1,(0,N.I0)()),y.F.addGetterSetter(At,"letterSpacing",0,(0,N.Kg)()),y.F.addGetterSetter(At,"text","",(0,N.sY)()),y.F.addGetterSetter(At,"textDecoration","");class Bt extends V{constructor(l){super(l),this.dummyCanvas=$.Z.createCanvasElement(),this.dataArray=[],this.dataArray=wt.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=wt.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(l){l.setAttr("font",this._getContextFont()),l.setAttr("textBaseline",this.textBaseline()),l.setAttr("textAlign","left"),l.save();var c=this.textDecoration(),h=this.fill(),f=this.fontSize(),m=this.glyphInfo;"underline"===c&&l.beginPath();for(var g=0;g<m.length;g++){l.save();var v=m[g].p0;l.translate(v.x,v.y),l.rotate(m[g].rotation),this.partialText=m[g].text,l.fillStrokeShape(this),"underline"===c&&(0===g&&l.moveTo(0,f/2+1),l.lineTo(f,f/2+1)),l.restore()}"underline"===c&&(l.strokeStyle=h,l.lineWidth=f/20,l.stroke()),l.restore()}_hitFunc(l){l.beginPath();var c=this.glyphInfo;if(c.length>=1){var h=c[0].p0;l.moveTo(h.x,h.y)}for(var f=0;f<c.length;f++){var m=c[f].p1;l.lineTo(m.x,m.y)}l.setAttr("lineWidth",this.fontSize()),l.setAttr("strokeStyle",this.colorKey),l.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return $.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(l){return At.prototype.setText.call(this,l)}_getContextFont(){return At.prototype._getContextFont.call(this)}_getTextSize(l){var h=this.dummyCanvas.getContext("2d");h.save(),h.font=this._getContextFont();var f=h.measureText(l);return h.restore(),{width:f.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var l=this,c=this._getTextSize(this.attrs.text),h=this.letterSpacing(),f=this.align(),m=this.kerningFunc();this.textWidth=c.width,this.textHeight=c.height;var g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*h,0);this.glyphInfo=[];for(var v=0,D=0;D<l.dataArray.length;D++)l.dataArray[D].pathLength>0&&(v+=l.dataArray[D].pathLength);var C=0;"center"===f&&(C=Math.max(0,v/2-g/2)),"right"===f&&(C=Math.max(0,v-g));for(var P,L,A,M=$s(this.text()),F=this.text().split(" ").length-1,Q=-1,z=0,ae=function(){z=0;for(var ve=l.dataArray,Be=Q+1;Be<ve.length;Be++){if(ve[Be].pathLength>0)return Q=Be,ve[Be];"M"===ve[Be].command&&(P={x:ve[Be].points[0],y:ve[Be].points[1]})}return{}},re=function(ve){var Be=l._getTextSize(ve).width+h;" "===ve&&"justify"===f&&(Be+=(v-g)/F);var bt=0,Zt=0;for(L=void 0;Math.abs(Be-bt)/Be>.01&&Zt<20;){Zt++;for(var ft=bt;void 0===A;)(A=ae())&&ft+A.pathLength<Be&&(ft+=A.pathLength,A=void 0);if(0===Object.keys(A).length||void 0===P)return;var Ut=!1;switch(A.command){case"L":wt.getLineLength(P.x,P.y,A.points[0],A.points[1])>Be?L=wt.getPointOnLine(Be,P.x,P.y,A.points[0],A.points[1],P.x,P.y):A=void 0;break;case"A":var Ht=A.points[5],qe=A.points[4]+Ht;0===z?z=A.points[4]+1e-8:Be>bt?z+=Math.PI/180*Ht/Math.abs(Ht):z-=Math.PI/360*Ht/Math.abs(Ht),(Ht<0&&z<qe||Ht>=0&&z>qe)&&(z=qe,Ut=!0),L=wt.getPointOnEllipticalArc(A.points[0],A.points[1],A.points[2],A.points[3],z,A.points[6]);break;case"C":0===z?z=Be>A.pathLength?1e-8:Be/A.pathLength:Be>bt?z+=(Be-bt)/A.pathLength/2:z=Math.max(z-(bt-Be)/A.pathLength/2,0),z>1&&(z=1,Ut=!0),L=wt.getPointOnCubicBezier(z,A.start.x,A.start.y,A.points[0],A.points[1],A.points[2],A.points[3],A.points[4],A.points[5]);break;case"Q":0===z?z=Be/A.pathLength:Be>bt?z+=(Be-bt)/A.pathLength:z-=(bt-Be)/A.pathLength,z>1&&(z=1,Ut=!0),L=wt.getPointOnQuadraticBezier(z,A.start.x,A.start.y,A.points[0],A.points[1],A.points[2],A.points[3])}void 0!==L&&(bt=wt.getLineLength(P.x,P.y,L.x,L.y)),Ut&&(Ut=!1,A=void 0)}},xe=C/(l._getTextSize("C").width+h)-1,me=0;me<xe&&(re("C"),void 0!==P&&void 0!==L);me++)P=L;for(var Re=0;Re<M.length&&(re(M[Re]),void 0!==P&&void 0!==L);Re++){var Se=wt.getLineLength(P.x,P.y,L.x,L.y),Le=0;if(m)try{Le=m(M[Re-1],M[Re])*this.fontSize()}catch{Le=0}P.x+=Le,L.x+=Le,this.textWidth+=Le;var ee=wt.getPointOnLine(Le+Se/2,P.x,P.y,L.x,L.y),Fe=Math.atan2(L.y-P.y,L.x-P.x);this.glyphInfo.push({transposeX:ee.x,transposeY:ee.y,text:M[Re],rotation:Fe,p0:P,p1:L}),P=L}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var l=[];this.glyphInfo.forEach(function(M){l.push(M.p0.x),l.push(M.p0.y),l.push(M.p1.x),l.push(M.p1.y)});for(var g,v,c=l[0]||0,h=l[0]||0,f=l[1]||0,m=l[1]||0,D=0;D<l.length/2;D++)g=l[2*D],v=l[2*D+1],c=Math.min(c,g),h=Math.max(h,g),f=Math.min(f,v),m=Math.max(m,v);var C=this.fontSize();return{x:c-C/2,y:f-C/2,width:h-c+C,height:m-f+C}}destroy(){return $.Z.releaseCanvas(this.dummyCanvas),super.destroy()}}Bt.prototype._fillFunc=va,Bt.prototype._strokeFunc=ya,Bt.prototype._fillFuncHit=va,Bt.prototype._strokeFuncHit=ya,Bt.prototype.className="TextPath",Bt.prototype._attrsAffectingSize=["text","fontSize","data"],(0,j.DA)(Bt),y.F.addGetterSetter(Bt,"data"),y.F.addGetterSetter(Bt,"fontFamily","Arial"),y.F.addGetterSetter(Bt,"fontSize",12,(0,N.Kg)()),y.F.addGetterSetter(Bt,"fontStyle","normal"),y.F.addGetterSetter(Bt,"align","left"),y.F.addGetterSetter(Bt,"letterSpacing",0,(0,N.Kg)()),y.F.addGetterSetter(Bt,"textBaseline","middle"),y.F.addGetterSetter(Bt,"fontVariant","normal"),y.F.addGetterSetter(Bt,"text",""),y.F.addGetterSetter(Bt,"textDecoration",null),y.F.addGetterSetter(Bt,"kerningFunc",null);var _a="tr-konva",Da=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(w=>w+`.${_a}`).join(" "),Ca="nodesRect",Su=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],jt={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const bu="ontouchstart"in j.So._global;var Jr=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Dt=1e8;function St(w,l,c){const h=c.x+(w.x-c.x)*Math.cos(l)-(w.y-c.y)*Math.sin(l),f=c.y+(w.x-c.x)*Math.sin(l)+(w.y-c.y)*Math.cos(l);return Object.assign(Object.assign({},w),{rotation:w.rotation+l,x:h,y:f})}class ct extends G{constructor(l){super(l),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Da,this.update),this.getNode()&&this.update()}attachTo(l){return this.setNode(l),this}setNode(l){return $.Z.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([l])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return _a+this._id}setNodes(l=[]){this._nodes&&this._nodes.length&&this.detach();const c=l.filter(f=>!f.isAncestorOf(this)||($.Z.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=l=c,1===l.length&&this.useSingleNodeRotation()?this.rotation(l[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(f=>{const m=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},g=f._attrsAffectingSize.map(v=>v+"Change."+this._getEventNamespace()).join(" ");f.on(g,m),f.on(Su.map(v=>v+`.${this._getEventNamespace()}`).join(" "),m),f.on(`absoluteTransformChange.${this._getEventNamespace()}`,m),this._proxyDrag(f)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(l){let c;l.on(`dragstart.${this._getEventNamespace()}`,h=>{c=l.getAbsolutePosition(),!this.isDragging()&&l!==this.findOne(".back")&&this.startDrag(h,!1)}),l.on(`dragmove.${this._getEventNamespace()}`,h=>{if(!c)return;const f=l.getAbsolutePosition(),m=f.x-c.x,g=f.y-c.y;this.nodes().forEach(v=>{if(v===l||v.isDragging())return;const D=v.getAbsolutePosition();v.setAbsolutePosition({x:D.x+m,y:D.y+g}),v.startDrag(h)}),c=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(l=>{l.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Ca),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Ca,this.__getNodeRect)}__getNodeShape(l,c=this.rotation(),h){var f=l.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=l.getAbsoluteScale(h),g=l.getAbsolutePosition(h),v=f.x*m.x-l.offsetX()*m.x,D=f.y*m.y-l.offsetY()*m.y;const C=(j.So.getAngle(l.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return St({x:g.x+v*Math.cos(C)+D*Math.sin(-C),y:g.y+D*Math.cos(C)+v*Math.sin(C),width:f.width*m.x,height:f.height*m.y,rotation:C},-j.So.getAngle(c),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-Dt,y:-Dt,width:0,height:0,rotation:0};const c=[];this.nodes().map(C=>{const M=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var F=[{x:M.x,y:M.y},{x:M.x+M.width,y:M.y},{x:M.x+M.width,y:M.y+M.height},{x:M.x,y:M.y+M.height}],P=C.getAbsoluteTransform();F.forEach(function(L){var A=P.point(L);c.push(A)})});const h=new $.w;var f,m,g,v;h.rotate(-j.So.getAngle(this.rotation())),c.forEach(function(C){var M=h.point(C);void 0===f&&(f=g=M.x,m=v=M.y),f=Math.min(f,M.x),m=Math.min(m,M.y),g=Math.max(g,M.x),v=Math.max(v,M.y)}),h.invert();const D=h.point({x:f,y:m});return{x:D.x,y:D.y,width:g-f,height:v-m,rotation:j.So.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Jr.forEach(function(l){this._createAnchor(l)}.bind(this)),this._createAnchor("rotater")}_createAnchor(l){var c=new fi({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:l+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:bu?10:"auto"}),h=this;c.on("mousedown touchstart",function(f){h._handleMouseDown(f)}),c.on("dragstart",f=>{c.stopDrag(),f.cancelBubble=!0}),c.on("dragend",f=>{f.cancelBubble=!0}),c.on("mouseenter",()=>{var f=j.So.getAngle(this.rotation()),m=function Eu(w,l){if("rotater"===w)return"crosshair";l+=$.Z.degToRad(jt[w]||0);var c=($.Z.radToDeg(l)%360+360)%360;return $.Z._inRange(c,337.5,360)||$.Z._inRange(c,0,22.5)?"ns-resize":$.Z._inRange(c,22.5,67.5)?"nesw-resize":$.Z._inRange(c,67.5,112.5)?"ew-resize":$.Z._inRange(c,112.5,157.5)?"nwse-resize":$.Z._inRange(c,157.5,202.5)?"ns-resize":$.Z._inRange(c,202.5,247.5)?"nesw-resize":$.Z._inRange(c,247.5,292.5)?"ew-resize":$.Z._inRange(c,292.5,337.5)?"nwse-resize":($.Z.error("Transformer has unknown angle for cursor detection: "+c),"pointer")}(l,f);c.getStage().content&&(c.getStage().content.style.cursor=m),this._cursorChange=!0}),c.on("mouseout",()=>{c.getStage().content&&(c.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(c)}_createBack(){var l=new V({name:"back",width:0,height:0,draggable:!0,sceneFunc(c){var h=this.getParent(),f=h.padding();c.beginPath(),c.rect(-f,-f,this.width()+2*f,this.height()+2*f),c.moveTo(this.width()/2,-f),h.rotateEnabled()&&c.lineTo(this.width()/2,-h.rotateAnchorOffset()*$.Z._sign(this.height())-f),c.fillStrokeShape(this)},hitFunc:(c,h)=>{if(this.shouldOverdrawWholeArea()){var f=this.padding();c.beginPath(),c.rect(-f,-f,h.width()+2*f,h.height()+2*f),c.fillStrokeShape(h)}}});this.add(l),this._proxyDrag(l),l.on("dragstart",c=>{c.cancelBubble=!0}),l.on("dragmove",c=>{c.cancelBubble=!0}),l.on("dragend",c=>{c.cancelBubble=!0}),this.on("dragmove",c=>{this.update()})}_handleMouseDown(l){this._movingAnchorName=l.target.name().split(" ")[0];var c=this._getNodeRect(),h=c.width,f=c.height,m=Math.sqrt(Math.pow(h,2)+Math.pow(f,2));this.sin=Math.abs(f/m),this.cos=Math.abs(h/m),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var g=l.target.getAbsolutePosition(),v=l.target.getStage().getPointerPosition();this._anchorDragOffset={x:v.x-g.x,y:v.y-g.y},this._fire("transformstart",{evt:l.evt,target:this.getNode()}),this._nodes.forEach(D=>{D._fire("transformstart",{evt:l.evt,target:D})})}_handleMouseMove(l){var c,h,f,m=this.findOne("."+this._movingAnchorName),g=m.getStage();g.setPointersPositions(l);const v=g.getPointerPosition();let D={x:v.x-this._anchorDragOffset.x,y:v.y-this._anchorDragOffset.y};const C=m.getAbsolutePosition();this.anchorDragBoundFunc()&&(D=this.anchorDragBoundFunc()(C,D,l)),m.setAbsolutePosition(D);const M=m.getAbsolutePosition();if(C.x!==M.x||C.y!==M.y){if("rotater"===this._movingAnchorName){var F=this._getNodeRect();c=m.x()-F.width/2,h=-m.y()+F.height/2;let ve=Math.atan2(-h,c)+Math.PI/2;F.height<0&&(ve-=Math.PI);const Be=j.So.getAngle(this.rotation())+ve,bt=j.So.getAngle(this.rotationSnapTolerance()),ft=function Iu(w,l,c){let h=l;for(let f=0;f<w.length;f++){const m=j.So.getAngle(w[f]),g=Math.abs(m-l)%(2*Math.PI);Math.min(g,2*Math.PI-g)<c&&(h=m)}return h}(this.rotationSnaps(),Be,bt)-F.rotation,Ut=function Ys(w,l){const c=function qs(w){return{x:w.x+w.width/2*Math.cos(w.rotation)+w.height/2*Math.sin(-w.rotation),y:w.y+w.height/2*Math.cos(w.rotation)+w.width/2*Math.sin(w.rotation)}}(w);return St(w,l,c)}(F,ft);return void this._fitNodesInto(Ut,l)}var L=this.keepRatio()||l.shiftKey,re=this.centeredScaling()||l.altKey;if("top-left"===this._movingAnchorName){if(L){var A=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};f=Math.sqrt(Math.pow(A.x-m.x(),2)+Math.pow(A.y-m.y(),2));var Q=this.findOne(".top-left").x()>A.x?-1:1,z=this.findOne(".top-left").y()>A.y?-1:1;c=f*this.cos*Q,h=f*this.sin*z,this.findOne(".top-left").x(A.x-c),this.findOne(".top-left").y(A.y-h)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(m.y());else if("top-right"===this._movingAnchorName){L&&(A=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},f=Math.sqrt(Math.pow(m.x()-A.x,2)+Math.pow(A.y-m.y(),2)),Q=this.findOne(".top-right").x()<A.x?-1:1,z=this.findOne(".top-right").y()>A.y?-1:1,c=f*this.cos*Q,h=f*this.sin*z,this.findOne(".top-right").x(A.x+c),this.findOne(".top-right").y(A.y-h));var ae=m.position();this.findOne(".top-left").y(ae.y),this.findOne(".bottom-right").x(ae.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(m.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(m.x()):"bottom-left"===this._movingAnchorName?(L&&(A=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},f=Math.sqrt(Math.pow(A.x-m.x(),2)+Math.pow(m.y()-A.y,2)),Q=A.x<m.x()?-1:1,z=m.y()<A.y?-1:1,h=f*this.sin*z,m.x(A.x-(c=f*this.cos*Q)),m.y(A.y+h)),ae=m.position(),this.findOne(".top-left").x(ae.x),this.findOne(".bottom-right").y(ae.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(m.y()):"bottom-right"===this._movingAnchorName?L&&(A=re?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},f=Math.sqrt(Math.pow(m.x()-A.x,2)+Math.pow(m.y()-A.y,2)),Q=this.findOne(".bottom-right").x()<A.x?-1:1,z=this.findOne(".bottom-right").y()<A.y?-1:1,c=f*this.cos*Q,h=f*this.sin*z,this.findOne(".bottom-right").x(A.x+c),this.findOne(".bottom-right").y(A.y+h)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(re=this.centeredScaling()||l.altKey){var se=this.findOne(".top-left"),he=this.findOne(".bottom-right"),xe=se.x(),me=se.y(),Re=this.getWidth()-he.x(),Se=this.getHeight()-he.y();he.move({x:-xe,y:-me}),se.move({x:Re,y:Se})}var Le=this.findOne(".top-left").getAbsolutePosition();c=Le.x,h=Le.y;var ee=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Fe=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:c,y:h,width:ee,height:Fe,rotation:j.So.getAngle(this.rotation())},l)}}_handleMouseUp(l){this._removeEvents(l)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(l){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var c=this.getNode();this._fire("transformend",{evt:l,target:c}),c&&this._nodes.forEach(h=>{h._fire("transformend",{evt:l,target:h})}),this._movingAnchorName=null}}_fitNodesInto(l,c){var h=this._getNodeRect();if($.Z._inRange(l.width,2*-this.padding()-1,1))return void this.update();if($.Z._inRange(l.height,2*-this.padding()-1,1))return void this.update();const m=this.flipEnabled();var g=new $.w;if(g.rotate(j.So.getAngle(this.rotation())),this._movingAnchorName&&l.width<0&&this._movingAnchorName.indexOf("left")>=0){const F=g.point({x:2*-this.padding(),y:0});if(l.x+=F.x,l.y+=F.y,l.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,!m)return void this.update()}else if(this._movingAnchorName&&l.width<0&&this._movingAnchorName.indexOf("right")>=0){const F=g.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,l.width+=2*this.padding(),!m)return void this.update()}if(this._movingAnchorName&&l.height<0&&this._movingAnchorName.indexOf("top")>=0){const F=g.point({x:0,y:2*-this.padding()});if(l.x+=F.x,l.y+=F.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,l.height+=2*this.padding(),!m)return void this.update()}else if(this._movingAnchorName&&l.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const F=g.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=F.x,this._anchorDragOffset.y-=F.y,l.height+=2*this.padding(),!m)return void this.update()}if(this.boundBoxFunc()){const F=this.boundBoxFunc()(h,l);F?l=F:$.Z.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const v=1e7,D=new $.w;D.translate(h.x,h.y),D.rotate(h.rotation),D.scale(h.width/v,h.height/v);const C=new $.w;C.translate(l.x,l.y),C.rotate(l.rotation),C.scale(l.width/v,l.height/v);const M=C.multiply(D.invert());this._nodes.forEach(F=>{var P;const L=F.getParent().getAbsoluteTransform(),A=F.getTransform().copy();A.translate(F.offsetX(),F.offsetY());const Q=new $.w;Q.multiply(L.copy().invert()).multiply(M).multiply(L).multiply(A);const z=Q.decompose();F.setAttrs(z),this._fire("transform",{evt:c,target:F}),F._fire("transform",{evt:c,target:F}),null===(P=F.getLayer())||void 0===P||P.batchDraw()}),this.rotation($.Z._getRotation(l.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(l,c){this.findOne(l).setAttrs(c)}update(){var l,c=this._getNodeRect();this.rotation($.Z._getRotation(c.rotation));var h=c.width,f=c.height,m=this.enabledAnchors(),g=this.resizeEnabled(),v=this.padding(),D=this.anchorSize();this.find("._anchor").forEach(C=>{C.setAttrs({width:D,height:D,offsetX:D/2,offsetY:D/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:D/2+v,offsetY:D/2+v,visible:g&&m.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:h/2,y:0,offsetY:D/2+v,visible:g&&m.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:h,y:0,offsetX:D/2-v,offsetY:D/2+v,visible:g&&m.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:f/2,offsetX:D/2+v,visible:g&&m.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:h,y:f/2,offsetX:D/2-v,visible:g&&m.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:f,offsetX:D/2+v,offsetY:D/2-v,visible:g&&m.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:h/2,y:f,offsetY:D/2-v,visible:g&&m.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:h,y:f,offsetX:D/2-v,offsetY:D/2-v,visible:g&&m.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:h/2,y:-this.rotateAnchorOffset()*$.Z._sign(f)-v,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:h,height:f,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(l=this.getLayer())||void 0===l||l.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var l=this.findOne("."+this._movingAnchorName);l&&l.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),G.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return te.N.prototype.toObject.call(this)}clone(l){return te.N.prototype.clone.call(this,l)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ct.prototype.className="Transformer",(0,j.DA)(ct),y.F.addGetterSetter(ct,"enabledAnchors",Jr,function Ue(w){return w instanceof Array||$.Z.warn("enabledAnchors value should be an array"),w instanceof Array&&w.forEach(function(l){-1===Jr.indexOf(l)&&$.Z.warn("Unknown anchor name: "+l+". Available names are: "+Jr.join(", "))}),w||[]}),y.F.addGetterSetter(ct,"flipEnabled",!0,(0,N.I0)()),y.F.addGetterSetter(ct,"resizeEnabled",!0),y.F.addGetterSetter(ct,"anchorSize",10,(0,N.Kg)()),y.F.addGetterSetter(ct,"rotateEnabled",!0),y.F.addGetterSetter(ct,"rotationSnaps",[]),y.F.addGetterSetter(ct,"rotateAnchorOffset",50,(0,N.Kg)()),y.F.addGetterSetter(ct,"rotationSnapTolerance",5,(0,N.Kg)()),y.F.addGetterSetter(ct,"borderEnabled",!0),y.F.addGetterSetter(ct,"anchorStroke","rgb(0, 161, 255)"),y.F.addGetterSetter(ct,"anchorStrokeWidth",1,(0,N.Kg)()),y.F.addGetterSetter(ct,"anchorFill","white"),y.F.addGetterSetter(ct,"anchorCornerRadius",0,(0,N.Kg)()),y.F.addGetterSetter(ct,"borderStroke","rgb(0, 161, 255)"),y.F.addGetterSetter(ct,"borderStrokeWidth",1,(0,N.Kg)()),y.F.addGetterSetter(ct,"borderDash"),y.F.addGetterSetter(ct,"keepRatio",!0),y.F.addGetterSetter(ct,"centeredScaling",!1),y.F.addGetterSetter(ct,"ignoreStroke",!1),y.F.addGetterSetter(ct,"padding",0,(0,N.Kg)()),y.F.addGetterSetter(ct,"node"),y.F.addGetterSetter(ct,"nodes"),y.F.addGetterSetter(ct,"boundBoxFunc"),y.F.addGetterSetter(ct,"anchorDragBoundFunc"),y.F.addGetterSetter(ct,"shouldOverdrawWholeArea",!1),y.F.addGetterSetter(ct,"useSingleNodeRotation",!0),y.F.backCompat(ct,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Fn extends V{_sceneFunc(l){l.beginPath(),l.arc(0,0,this.radius(),0,j.So.getAngle(this.angle()),this.clockwise()),l.lineTo(0,0),l.closePath(),l.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(l){this.radius(l/2)}setHeight(l){this.radius(l/2)}}function Li(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Fn.prototype.className="Wedge",Fn.prototype._centroid=!0,Fn.prototype._attrsAffectingSize=["radius"],(0,j.DA)(Fn),y.F.addGetterSetter(Fn,"radius",0,(0,N.Kg)()),y.F.addGetterSetter(Fn,"angle",0,(0,N.Kg)()),y.F.addGetterSetter(Fn,"clockwise",!1),y.F.backCompat(Fn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var mf=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],wa=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Sa(w,l,c,h,f){var m=c-l,g=f-h;return 0===m?h+g/2:0===g?h:g*((w-l)/m)+h}function Xs(w,l,c){var h=4*(c*w.width+l),f=[];return f.push(w.data[h++],w.data[h++],w.data[h++],w.data[h++]),f}function Ui(w,l){return Math.sqrt(Math.pow(w[0]-l[0],2)+Math.pow(w[1]-l[1],2)+Math.pow(w[2]-l[2],2))}y.F.addGetterSetter(te.N,"blurRadius",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"brightness",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"contrast",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"embossStrength",.5,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"embossWhiteLevel",.5,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"embossDirection","top-left",null,y.F.afterSetFilter),y.F.addGetterSetter(te.N,"embossBlend",!1,null,y.F.afterSetFilter),y.F.addGetterSetter(te.N,"enhance",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"hue",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"saturation",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"luminance",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"hue",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"saturation",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"value",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"kaleidoscopePower",2,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"kaleidoscopeAngle",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"threshold",0,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"noise",.2,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"pixelSize",8,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"levels",.5,(0,N.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(te.N,"red",0,function(w){return this._filterUpToDate=!1,w>255?255:w<0?0:Math.round(w)}),y.F.addGetterSetter(te.N,"green",0,function(w){return this._filterUpToDate=!1,w>255?255:w<0?0:Math.round(w)}),y.F.addGetterSetter(te.N,"blue",0,N.xj,y.F.afterSetFilter),y.F.addGetterSetter(te.N,"red",0,function(w){return this._filterUpToDate=!1,w>255?255:w<0?0:Math.round(w)}),y.F.addGetterSetter(te.N,"green",0,function(w){return this._filterUpToDate=!1,w>255?255:w<0?0:Math.round(w)}),y.F.addGetterSetter(te.N,"blue",0,N.xj,y.F.afterSetFilter),y.F.addGetterSetter(te.N,"alpha",1,function(w){return this._filterUpToDate=!1,w>1?1:w<0?0:w}),y.F.addGetterSetter(te.N,"threshold",.5,(0,N.Kg)(),y.F.afterSetFilter);const Fu=gn.Util._assign(gn,{Arc:ut,Arrow:Tr,Circle:hi,Ellipse:Jn,Image:Pn,Label:Vs,Tag:qr,Line:nn,Path:wt,Rect:fi,RegularPolygon:Yr,Ring:Xr,Sprite:tr,Star:Ar,Text:At,TextPath:Bt,Transformer:ct,Wedge:Fn,Filters:{Blur:function(l){var c=Math.round(this.blurRadius());c>0&&function fe(w,l){var m,g,v,D,C,M,F,P,L,A,Q,z,ae,re,se,he,xe,me,Re,Se,Le,ee,Fe,ve,c=w.data,h=w.width,f=w.height,Be=l+l+1,bt=h-1,Zt=f-1,ft=l+1,Ut=ft*(ft+1)/2,an=new Li,Ht=null,qe=an,pt=null,Pt=null,it=mf[l],Nn=wa[l];for(v=1;v<Be;v++)qe=qe.next=new Li,v===ft&&(Ht=qe);for(qe.next=an,F=M=0,g=0;g<f;g++){for(he=xe=me=Re=P=L=A=Q=0,z=ft*(Se=c[M]),ae=ft*(Le=c[M+1]),re=ft*(ee=c[M+2]),se=ft*(Fe=c[M+3]),P+=Ut*Se,L+=Ut*Le,A+=Ut*ee,Q+=Ut*Fe,qe=an,v=0;v<ft;v++)qe.r=Se,qe.g=Le,qe.b=ee,qe.a=Fe,qe=qe.next;for(v=1;v<ft;v++)P+=(qe.r=Se=c[D=M+((bt<v?bt:v)<<2)])*(ve=ft-v),L+=(qe.g=Le=c[D+1])*ve,A+=(qe.b=ee=c[D+2])*ve,Q+=(qe.a=Fe=c[D+3])*ve,he+=Se,xe+=Le,me+=ee,Re+=Fe,qe=qe.next;for(pt=an,Pt=Ht,m=0;m<h;m++)c[M+3]=Fe=Q*it>>Nn,0!==Fe?(c[M]=(P*it>>Nn)*(Fe=255/Fe),c[M+1]=(L*it>>Nn)*Fe,c[M+2]=(A*it>>Nn)*Fe):c[M]=c[M+1]=c[M+2]=0,P-=z,L-=ae,A-=re,Q-=se,z-=pt.r,ae-=pt.g,re-=pt.b,se-=pt.a,D=F+((D=m+l+1)<bt?D:bt)<<2,P+=he+=pt.r=c[D],L+=xe+=pt.g=c[D+1],A+=me+=pt.b=c[D+2],Q+=Re+=pt.a=c[D+3],pt=pt.next,z+=Se=Pt.r,ae+=Le=Pt.g,re+=ee=Pt.b,se+=Fe=Pt.a,he-=Se,xe-=Le,me-=ee,Re-=Fe,Pt=Pt.next,M+=4;F+=h}for(m=0;m<h;m++){for(xe=me=Re=he=L=A=Q=P=0,z=ft*(Se=c[M=m<<2]),ae=ft*(Le=c[M+1]),re=ft*(ee=c[M+2]),se=ft*(Fe=c[M+3]),P+=Ut*Se,L+=Ut*Le,A+=Ut*ee,Q+=Ut*Fe,qe=an,v=0;v<ft;v++)qe.r=Se,qe.g=Le,qe.b=ee,qe.a=Fe,qe=qe.next;for(C=h,v=1;v<=l;v++)P+=(qe.r=Se=c[M=C+m<<2])*(ve=ft-v),L+=(qe.g=Le=c[M+1])*ve,A+=(qe.b=ee=c[M+2])*ve,Q+=(qe.a=Fe=c[M+3])*ve,he+=Se,xe+=Le,me+=ee,Re+=Fe,qe=qe.next,v<Zt&&(C+=h);for(M=m,pt=an,Pt=Ht,g=0;g<f;g++)c[3+(D=M<<2)]=Fe=Q*it>>Nn,Fe>0?(c[D]=(P*it>>Nn)*(Fe=255/Fe),c[D+1]=(L*it>>Nn)*Fe,c[D+2]=(A*it>>Nn)*Fe):c[D]=c[D+1]=c[D+2]=0,P-=z,L-=ae,A-=re,Q-=se,z-=pt.r,ae-=pt.g,re-=pt.b,se-=pt.a,D=m+((D=g+ft)<Zt?D:Zt)*h<<2,P+=he+=pt.r=c[D],L+=xe+=pt.g=c[D+1],A+=me+=pt.b=c[D+2],Q+=Re+=pt.a=c[D+3],pt=pt.next,z+=Se=Pt.r,ae+=Le=Pt.g,re+=ee=Pt.b,se+=Fe=Pt.a,he-=Se,xe-=Le,me-=ee,Re-=Fe,Pt=Pt.next,M+=h}}(l,c)},Brighten:function(w){var f,l=255*this.brightness(),c=w.data,h=c.length;for(f=0;f<h;f+=4)c[f]+=l,c[f+1]+=l,c[f+2]+=l},Contrast:function(w){var v,l=Math.pow((this.contrast()+100)/100,2),c=w.data,h=c.length,f=150,m=150,g=150;for(v=0;v<h;v+=4)f=c[v],m=c[v+1],g=c[v+2],f/=255,f-=.5,f*=l,f+=.5,m/=255,m-=.5,m*=l,m+=.5,g/=255,g-=.5,g*=l,g+=.5,m=(m*=255)<0?0:m>255?255:m,g=(g*=255)<0?0:g>255?255:g,c[v]=f=(f*=255)<0?0:f>255?255:f,c[v+1]=m,c[v+2]=g},Emboss:function(w){var l=10*this.embossStrength(),c=255*this.embossWhiteLevel(),h=this.embossDirection(),f=this.embossBlend(),m=0,g=0,v=w.data,D=w.width,C=w.height,M=4*D,F=C;switch(h){case"top-left":m=-1,g=-1;break;case"top":m=-1,g=0;break;case"top-right":m=-1,g=1;break;case"right":m=0,g=1;break;case"bottom-right":m=1,g=1;break;case"bottom":m=1,g=0;break;case"bottom-left":m=1,g=-1;break;case"left":m=0,g=-1;break;default:$.Z.error("Unknown emboss direction: "+h)}do{var P=(F-1)*M,L=m;F+L<1&&(L=0),F+L>C&&(L=0);var A=(F-1+L)*D*4,Q=D;do{var z=P+4*(Q-1),ae=g;Q+ae<1&&(ae=0),Q+ae>D&&(ae=0);var re=A+4*(Q-1+ae),he=v[z+1]-v[re+1],xe=v[z+2]-v[re+2],me=v[z]-v[re],Re=me>0?me:-me;if((he>0?he:-he)>Re&&(me=he),(xe>0?xe:-xe)>Re&&(me=xe),me*=l,f){var ee=v[z]+me,Fe=v[z+1]+me,ve=v[z+2]+me;v[z]=ee>255?255:ee<0?0:ee,v[z+1]=Fe>255?255:Fe<0?0:Fe,v[z+2]=ve>255?255:ve<0?0:ve}else{var Be=c-me;Be<0?Be=0:Be>255&&(Be=255),v[z]=v[z+1]=v[z+2]=Be}}while(--Q)}while(--F)},Enhance:function(w){var m,D,F,P,l=w.data,c=l.length,h=l[0],f=h,g=l[1],v=g,C=l[2],M=C,L=this.enhance();if(0!==L){for(P=0;P<c;P+=4)(m=l[P+0])<h?h=m:m>f&&(f=m),(D=l[P+1])<g?g=D:D>v&&(v=D),(F=l[P+2])<C?C=F:F>M&&(M=F);var A,Q,z,ae,re,se,he,xe,me;for(f===h&&(f=255,h=0),v===g&&(v=255,g=0),M===C&&(M=255,C=0),L>0?(Q=f+L*(255-f),z=h-L*(h-0),re=v+L*(255-v),se=g-L*(g-0),xe=M+L*(255-M),me=C-L*(C-0)):(Q=f+L*(f-(A=.5*(f+h))),z=h+L*(h-A),re=v+L*(v-(ae=.5*(v+g))),se=g+L*(g-ae),xe=M+L*(M-(he=.5*(M+C))),me=C+L*(C-he)),P=0;P<c;P+=4)l[P+0]=Sa(l[P+0],h,f,z,Q),l[P+1]=Sa(l[P+1],g,v,se,re),l[P+2]=Sa(l[P+2],C,M,me,xe)}},Grayscale:function(w){var h,f,l=w.data,c=l.length;for(h=0;h<c;h+=4)l[h]=f=.34*l[h]+.5*l[h+1]+.16*l[h+2],l[h+1]=f,l[h+2]=f},HSL:function(w){var v,se,he,xe,me,l=w.data,c=l.length,f=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,g=127*this.luminance(),D=1*f*Math.cos(m*Math.PI/180),C=1*f*Math.sin(m*Math.PI/180),M=.299+.701*D+.167*C,F=.587-.587*D+.33*C,P=.114-.114*D-.497*C,L=.299-.299*D-.328*C,A=.587+.413*D+.035*C,Q=.114-.114*D+.293*C,z=.299-.3*D+1.25*C,ae=.587-.586*D-1.05*C,re=.114+.886*D-.2*C;for(v=0;v<c;v+=4)me=l[v+3],l[v+0]=M*(se=l[v+0])+F*(he=l[v+1])+P*(xe=l[v+2])+g,l[v+1]=L*se+A*he+Q*xe+g,l[v+2]=z*se+ae*he+re*xe+g,l[v+3]=me},HSV:function(w){var g,re,se,he,xe,l=w.data,c=l.length,h=Math.pow(2,this.value()),f=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,v=h*f*Math.cos(m*Math.PI/180),D=h*f*Math.sin(m*Math.PI/180),C=.299*h+.701*v+.167*D,M=.587*h-.587*v+.33*D,F=.114*h-.114*v-.497*D,P=.299*h-.299*v-.328*D,L=.587*h+.413*v+.035*D,A=.114*h-.114*v+.293*D,Q=.299*h-.3*v+1.25*D,z=.587*h-.586*v-1.05*D,ae=.114*h+.886*v-.2*D;for(g=0;g<c;g+=4)xe=l[g+3],l[g+0]=C*(re=l[g+0])+M*(se=l[g+1])+F*(he=l[g+2]),l[g+1]=P*re+L*se+A*he,l[g+2]=Q*re+z*se+ae*he,l[g+3]=xe},Invert:function(w){var h,l=w.data,c=l.length;for(h=0;h<c;h+=4)l[h]=255-l[h],l[h+1]=255-l[h+1],l[h+2]=255-l[h+2]},Kaleidoscope:function(w){var h,f,m,g,D,C,M,F,P,l=w.width,c=w.height,L=Math.round(this.kaleidoscopePower()),A=Math.round(this.kaleidoscopeAngle()),Q=Math.floor(l*(A%360)/360);if(!(L<1)){var z=$.Z.createCanvasElement();z.width=l,z.height=c;var ae=z.getContext("2d").getImageData(0,0,l,c);$.Z.releaseCanvas(z),function(w,l,c){var C,M,F,z,h=w.data,f=l.data,m=w.width,g=w.height,v=c.polarCenterX||m/2,D=c.polarCenterY||g/2,P=0,L=0,A=0,Q=0,ae=Math.sqrt(v*v+D*D);M=m-v,F=g-D,ae=(z=Math.sqrt(M*M+F*F))>ae?z:ae;var he,xe,Re,Se,re=g,se=m,me=360/se*Math.PI/180;for(xe=0;xe<se;xe+=1)for(Re=Math.sin(xe*me),Se=Math.cos(xe*me),he=0;he<re;he+=1)M=Math.floor(v+ae*he/re*Se),P=h[0+(C=4*((F=Math.floor(D+ae*he/re*Re))*m+M))],L=h[C+1],A=h[C+2],Q=h[C+3],f[0+(C=4*(xe+he*m))]=P,f[C+1]=L,f[C+2]=A,f[C+3]=Q}(w,ae,{polarCenterX:l/2,polarCenterY:c/2});for(var re=l/Math.pow(2,L);re<=8;)re*=2,L-=1;var se=re=Math.ceil(re),he=0,xe=se,me=1;for(Q+re>l&&(he=se,xe=0,me=-1),f=0;f<c;f+=1)for(h=he;h!==xe;h+=me)m=Math.round(h+Q)%l,D=ae.data[1+(F=4*(l*f+m))],C=ae.data[F+2],M=ae.data[F+3],ae.data[0+(P=4*(l*f+h))]=ae.data[F+0],ae.data[P+1]=D,ae.data[P+2]=C,ae.data[P+3]=M;for(f=0;f<c;f+=1)for(se=Math.floor(re),g=0;g<L;g+=1){for(h=0;h<se+1;h+=1)D=ae.data[1+(F=4*(l*f+h))],C=ae.data[F+2],M=ae.data[F+3],ae.data[0+(P=4*(l*f+2*se-h-1))]=ae.data[F+0],ae.data[P+1]=D,ae.data[P+2]=C,ae.data[P+3]=M;se*=2}!function(w,l,c){var C,M,F,P,L,re,h=w.data,f=l.data,m=w.width,g=w.height,v=c.polarCenterX||m/2,D=c.polarCenterY||g/2,A=0,Q=0,z=0,ae=0,se=Math.sqrt(v*v+D*D);M=m-v,F=g-D,se=(re=Math.sqrt(M*M+F*F))>se?re:se;var me,Re,Le,he=g,xe=m,Se=c.polarRotation||0;for(M=0;M<m;M+=1)for(F=0;F<g;F+=1)P=M-v,L=F-D,me=Math.sqrt(P*P+L*L)*he/se,Re=(Re=(180*Math.atan2(L,P)/Math.PI+360+Se)%360)*xe/360,Le=Math.floor(Re),A=h[0+(C=4*(Math.floor(me)*m+Le))],Q=h[C+1],z=h[C+2],ae=h[C+3],f[0+(C=4*(F*m+M))]=A,f[C+1]=Q,f[C+2]=z,f[C+3]=ae}(ae,w,{polarRotation:0})}},Mask:function(w){var c=function xu(w,l){var c=Xs(w,0,0),h=Xs(w,w.width-1,0),f=Xs(w,0,w.height-1),m=Xs(w,w.width-1,w.height-1),g=l||10;if(Ui(c,h)<g&&Ui(h,m)<g&&Ui(m,f)<g&&Ui(f,c)<g){for(var v=function Df(w){for(var l=[0,0,0],c=0;c<w.length;c++)l[0]+=w[c][0],l[1]+=w[c][1],l[2]+=w[c][2];return l[0]/=w.length,l[1]/=w.length,l[2]/=w.length,l}([h,c,m,f]),D=[],C=0;C<w.width*w.height;C++){var M=Ui(v,[w.data[4*C],w.data[4*C+1],w.data[4*C+2]]);D[C]=M<g?0:255}return D}}(w,this.threshold());return c&&(c=function Ru(w,l,c){for(var h=[1,1,1,1,0,1,1,1,1],f=Math.round(Math.sqrt(h.length)),m=Math.floor(f/2),g=[],v=0;v<c;v++)for(var D=0;D<l;D++){for(var C=v*l+D,M=0,F=0;F<f;F++)for(var P=0;P<f;P++){var L=v+F-m,A=D+P-m;L>=0&&L<c&&A>=0&&A<l&&(M+=w[L*l+A]*h[F*f+P])}g[C]=2040===M?255:0}return g}(c,w.width,w.height),c=function wf(w,l,c){for(var h=[1,1,1,1,1,1,1,1,1],f=Math.round(Math.sqrt(h.length)),m=Math.floor(f/2),g=[],v=0;v<c;v++)for(var D=0;D<l;D++){for(var C=v*l+D,M=0,F=0;F<f;F++)for(var P=0;P<f;P++){var L=v+F-m,A=D+P-m;L>=0&&L<c&&A>=0&&A<l&&(M+=w[L*l+A]*h[F*f+P])}g[C]=M>=1020?255:0}return g}(c,w.width,w.height),c=function bn(w,l,c){for(var h=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],f=Math.round(Math.sqrt(h.length)),m=Math.floor(f/2),g=[],v=0;v<c;v++)for(var D=0;D<l;D++){for(var C=v*l+D,M=0,F=0;F<f;F++)for(var P=0;P<f;P++){var L=v+F-m,A=D+P-m;L>=0&&L<c&&A>=0&&A<l&&(M+=w[L*l+A]*h[F*f+P])}g[C]=M}return g}(c,w.width,w.height),function Cf(w,l){for(var c=0;c<w.width*w.height;c++)w.data[4*c+3]=l[c]}(w,c)),w},Noise:function(w){var m,l=255*this.noise(),c=w.data,h=c.length,f=l/2;for(m=0;m<h;m+=4)c[m+0]+=f-2*f*Math.random(),c[m+1]+=f-2*f*Math.random(),c[m+2]+=f-2*f*Math.random()},Pixelate:function(w){var f,m,g,v,D,C,M,L,A,Q,z,ae,re,se,l=Math.ceil(this.pixelSize()),c=w.width,h=w.height,F=Math.ceil(c/l),P=Math.ceil(h/l),he=w.data;if(l<=0)$.Z.error("pixelSize value can not be <= 0");else for(ae=0;ae<F;ae+=1)for(re=0;re<P;re+=1){for(v=0,D=0,C=0,M=0,A=(L=ae*l)+l,z=(Q=re*l)+l,se=0,f=L;f<A;f+=1)if(!(f>=c))for(m=Q;m<z;m+=1)m>=h||(v+=he[0+(g=4*(c*m+f))],D+=he[g+1],C+=he[g+2],M+=he[g+3],se+=1);for(v/=se,D/=se,C/=se,M/=se,f=L;f<A;f+=1)if(!(f>=c))for(m=Q;m<z;m+=1)m>=h||(he[0+(g=4*(c*m+f))]=v,he[g+1]=D,he[g+2]=C,he[g+3]=M)}},Posterize:function(w){var m,l=Math.round(254*this.levels())+1,c=w.data,h=c.length,f=255/l;for(m=0;m<h;m+=1)c[m]=Math.floor(c[m]/f)*f},RGB:function(w){var g,v,l=w.data,c=l.length,h=this.red(),f=this.green(),m=this.blue();for(g=0;g<c;g+=4)l[g]=(v=(.34*l[g]+.5*l[g+1]+.16*l[g+2])/255)*h,l[g+1]=v*f,l[g+2]=v*m,l[g+3]=l[g+3]},RGBA:function(w){var v,D,l=w.data,c=l.length,h=this.red(),f=this.green(),m=this.blue(),g=this.alpha();for(v=0;v<c;v+=4)l[v]=h*g+l[v]*(D=1-g),l[v+1]=f*g+l[v+1]*D,l[v+2]=m*g+l[v+2]*D},Sepia:function(w){var h,f,m,g,l=w.data,c=l.length;for(h=0;h<c;h+=4)f=l[h+0],m=l[h+1],g=l[h+2],l[h+0]=Math.min(255,.393*f+.769*m+.189*g),l[h+1]=Math.min(255,.349*f+.686*m+.168*g),l[h+2]=Math.min(255,.272*f+.534*m+.131*g)},Solarize:function(w){var l=w.data,c=w.width,f=4*c,m=w.height;do{var g=(m-1)*f,v=c;do{var D=g+4*(v-1),C=l[D],M=l[D+1],F=l[D+2];C>127&&(C=255-C),M>127&&(M=255-M),F>127&&(F=255-F),l[D]=C,l[D+1]=M,l[D+2]=F}while(--v)}while(--m)},Threshold:function(w){var f,l=255*this.threshold(),c=w.data,h=c.length;for(f=0;f<h;f+=1)c[f]=c[f]<l?0:255}}})}},pn=>{pn(pn.s=467)}]);