"use strict";(self.webpackChunkimage_manipulation=self.webpackChunkimage_manipulation||[]).push([[179],{183:(Aa,Ws,qs)=>{function ze(e){return"function"==typeof e}function Ys(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Bn=Ys(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Q(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Re{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ze(r))try{r()}catch(s){t=s instanceof Bn?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Ra(s)}catch(a){t=t??[],a instanceof Bn?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Bn(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Ra(t);else{if(t instanceof Re){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Q(n,t)}remove(t){const{_finalizers:n}=this;n&&Q(n,t),t instanceof Re&&t._removeParent(this)}}Re.EMPTY=(()=>{const e=new Re;return e.closed=!0,e})();const xt=Re.EMPTY;function xa(e){return e instanceof Re||e&&"closed"in e&&ze(e.remove)&&ze(e.add)&&ze(e.unsubscribe)}function Ra(e){ze(e)?e():e.unsubscribe()}const rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ki={setTimeout(e,t,...n){const{delegate:r}=ki;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=ki;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Pa(e){ki.setTimeout(()=>{const{onUnhandledError:t}=rr;if(!t)throw e;t(e)})}function Oa(){}const Ks=Xs("C",void 0,void 0);function Xs(e,t,n){return{kind:e,value:t,error:n}}let jn=null;function Fi(e){if(rr.useDeprecatedSynchronousErrorHandling){const t=!jn;if(t&&(jn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=jn;if(jn=null,n)throw r}}else e()}class Zs extends Re{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,xa(t)&&t.add(this)):this.destination=eo}static create(t,n,r){return new Bt(t,n,r)}next(t){this.isStopped?V(function zu(e){return Xs("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?V(function Gu(e){return Xs("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?V(Ks,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Li=Function.prototype.bind;function Js(e,t){return Li.call(e,t)}class x{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ti(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ti(r)}else ti(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ti(n)}}}class Bt extends Zs{constructor(t,n,r){let i;if(super(),ze(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&rr.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Js(t.next,s),error:t.error&&Js(t.error,s),complete:t.complete&&Js(t.complete,s)}):i=t}this.destination=new x(i)}}function ti(e){rr.useDeprecatedSynchronousErrorHandling?function Qs(e){rr.useDeprecatedSynchronousErrorHandling&&jn&&(jn.errorThrown=!0,jn.error=e)}(e):Pa(e)}function V(e,t){const{onStoppedNotification:n}=rr;n&&ki.setTimeout(()=>n(e,t))}const eo={closed:!0,next:Oa,error:function Gf(e){throw e},complete:Oa},ni="function"==typeof Symbol&&Symbol.observable||"@@observable";function zt(e){return e}function Wu(e){return 0===e.length?zt:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let st=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function ri(e){return e&&e instanceof Zs||function qu(e){return e&&ze(e.next)&&ze(e.error)&&ze(e.complete)}(e)&&xa(e)}(n)?n:new Bt(n,r,i);return Fi(()=>{const{operator:a,source:u}=this;s.add(a?a.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Wt(r))((i,s)=>{const a=new Bt({next:u=>{try{n(u)}catch(h){s(h),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ni](){return this}pipe(...n){return Wu(n)(this)}toPromise(n){return new(n=Wt(n))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return e.create=t=>new e(t),e})();function Wt(e){var t;return null!==(t=e??rr.Promise)&&void 0!==t?t:Promise}const ii=Ys(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let M=(()=>{class e extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ka(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ii}next(n){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?xt:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,Q(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return e.create=(t,n)=>new ka(t,n),e})();class ka extends M{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:xt}}function to(e){return ze(e?.lift)}function ct(e){return t=>{if(to(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function dt(e,t,n,r,i){return new Yu(e,t,n,r,i)}class Yu extends Zs{constructor(t,n,r,i,s,a){super(t),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=n?function(u){try{n(u)}catch(h){t.error(h)}}:super._next,this._error=i?function(u){try{i(u)}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Te(e,t){return ct((n,r)=>{let i=0;n.subscribe(dt(r,s=>{r.next(e.call(t,s,i++))}))})}function ir(e){return this instanceof ir?(this.v=e,this):new ir(e)}function so(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function oi(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(u,h){!function i(s,a,u,h){Promise.resolve(h).then(function(g){s({value:g,done:u})},a)}(u,h,(a=e[s](a)).done,a.value)})}}}const Sn=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ba(e){return ze(e?.then)}function Ui(e){return ze(e[ni])}function ja(e){return Symbol.asyncIterator&&ze(e?.[Symbol.asyncIterator])}function Ha(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $e=function G(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rt(e){return ze(e?.[$e])}function xr(e){return function Qu(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(S){r[S]&&(i[S]=function(T){return new Promise(function(R,N){s.push([S,T,R,N])>1||u(S,T)})})}function u(S,T){try{!function h(S){S.value instanceof ir?Promise.resolve(S.value.v).then(g,y):D(s[0][2],S)}(r[S](T))}catch(R){D(s[0][3],R)}}function g(S){u("next",S)}function y(S){u("throw",S)}function D(S,T){S(T),s.shift(),s.length&&u(s[0][0],s[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield ir(n.read());if(i)return yield ir(void 0);yield yield ir(r)}}finally{n.releaseLock()}})}function ao(e){return ze(e?.getReader)}function jt(e){if(e instanceof st)return e;if(null!=e){if(Ui(e))return function lo(e){return new st(t=>{const n=e[ni]();if(ze(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Sn(e))return function Ua(e){return new st(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Ba(e))return function $a(e){return new st(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Pa)})}(e);if(ja(e))return Va(e);if(Rt(e))return function ai(e){return new st(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(ao(e))return function nc(e){return Va(xr(e))}(e)}throw Ha(e)}function Va(e){return new st(t=>{(function Ga(e,t){var n,r,i,s;return function Bi(e,t,n,r){return new(n||(n=Promise))(function(s,a){function u(y){try{g(r.next(y))}catch(D){a(D)}}function h(y){try{g(r.throw(y))}catch(D){a(D)}}function g(y){y.done?s(y.value):function i(s){return s instanceof n?s:new n(function(a){a(s)})}(y.value).then(u,h)}g((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=so(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function bn(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function ht(e,t,n=1/0){return ze(t)?ht((r,i)=>Te((s,a)=>t(r,s,i,a))(jt(e(r,i))),n):("number"==typeof t&&(n=t),ct((r,i)=>function za(e,t,n,r,i,s,a,u){const h=[];let g=0,y=0,D=!1;const S=()=>{D&&!h.length&&!g&&t.complete()},T=N=>g<r?R(N):h.push(N),R=N=>{s&&t.next(N),g++;let k=!1;jt(n(N,y++)).subscribe(dt(t,U=>{i?.(U),s?T(U):t.next(U)},()=>{k=!0},void 0,()=>{if(k)try{for(g--;h.length&&g<r;){const U=h.shift();a?bn(t,a,()=>R(U)):R(U)}S()}catch(U){t.error(U)}}))};return e.subscribe(dt(t,T,()=>{D=!0,S()})),()=>{u?.()}}(r,i,e,n)))}function sr(e=1/0){return ht(zt,e)}const Jt=new st(e=>e.complete());function or(e){return e[e.length-1]}function En(e){return function li(e){return e&&ze(e.schedule)}(or(e))?e.pop():void 0}function ui(e,t=0){return ct((n,r)=>{n.subscribe(dt(r,i=>bn(r,e,()=>r.next(i),t),()=>bn(r,e,()=>r.complete(),t),i=>bn(r,e,()=>r.error(i),t)))})}function ci(e,t=0){return ct((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function co(e,t){if(!e)throw new Error("Iterable cannot be null");return new st(n=>{bn(n,t,()=>{const r=e[Symbol.asyncIterator]();bn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ze(e,t){return t?function Ka(e,t){if(null!=e){if(Ui(e))return function $i(e,t){return jt(e).pipe(ci(t),ui(t))}(e,t);if(Sn(e))return function uo(e,t){return new st(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Ba(e))return function Vi(e,t){return jt(e).pipe(ci(t),ui(t))}(e,t);if(ja(e))return co(e,t);if(Rt(e))return function qa(e,t){return new st(n=>{let r;return bn(n,t,()=>{r=e[$e](),bn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void n.error(a)}s?n.complete():n.next(i)},0,!0)}),()=>ze(r?.return)&&r.return()})}(e,t);if(ao(e))return function Ya(e,t){return co(xr(e),t)}(e,t)}throw Ha(e)}(e,t):jt(e)}function di(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Bt({next:()=>{r.unsubscribe(),e()}});return jt(t(...n)).subscribe(r)}function Be(e){for(let t in e)if(e[t]===Be)return t;throw Error("Could not find renamed property on target object.")}function Ge(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ho(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Gi=Be({__forward_ref__:Be});function Pr(e){return e.__forward_ref__=Pr,e.toString=function(){return Ge(this())},e}function ae(e){return zi(e)?e():e}function zi(e){return"function"==typeof e&&e.hasOwnProperty(Gi)&&e.__forward_ref__===Pr}function Wi(e){return e&&!!e.\u0275providers}const fo="https://g.co/ng/security#xss";class W extends Error{constructor(t,n){super(Or(t,n)),this.code=t}}function Or(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function fe(e){return"string"==typeof e?e:null==e?"":String(e)}function qi(e,t){throw new W(-201,!1)}function Pt(e,t){null==e&&function Ne(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function cn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Yi(e){return kr(e,Fr)||kr(e,hn)}function kr(e,t){return e.hasOwnProperty(t)?e[t]:null}function dn(e){return e&&(e.hasOwnProperty(Ki)||e.hasOwnProperty(Ve))?e[Ki]:null}const Fr=Be({\u0275prov:Be}),Ki=Be({\u0275inj:Be}),hn=Be({ngInjectableDef:Be}),Ve=Be({ngInjectorDef:Be});var re=(()=>((re=re||{})[re.Default=0]="Default",re[re.Host=1]="Host",re[re.Self=2]="Self",re[re.SkipSelf=4]="SkipSelf",re[re.Optional=8]="Optional",re))();let $n;function Xe(e){const t=$n;return $n=e,t}function go(e,t,n){const r=Yi(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&re.Optional?null:void 0!==t?t:void qi(Ge(e))}const We=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ar={},mo="__NG_DI_FLAG__",Lr="ngTempTokenPath",lr="ngTokenPath",fi=/\n/gm,ur="\u0275",vo="__source";let en;function St(e){const t=en;return en=e,t}function Gn(e,t=re.Default){if(void 0===en)throw new W(-203,!1);return null===en?go(e,void 0,t):en.get(e,t&re.Optional?null:void 0,t)}function le(e,t=re.Default){return(function Vn(){return $n}()||Gn)(ae(e),t)}function Ae(e,t=re.Default){return le(e,zn(t))}function zn(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function yo(e){const t=[];for(let n=0;n<e.length;n++){const r=ae(e[n]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,s=re.Default;for(let a=0;a<r.length;a++){const u=r[a],h=tl(u);"number"==typeof h?-1===h?i=u.token:s|=h:i=u}t.push(le(i,s))}else t.push(le(r))}return t}function pi(e,t){return e[mo]=t,e.prototype[mo]=t,e}function tl(e){return e[mo]}function In(e){return{toString:e}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),pn=(()=>{return(e=pn||(pn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",pn;var e})();const gn={},ke=[],Xi=Be({\u0275cmp:Be}),Br=Be({\u0275dir:Be}),_o=Be({\u0275pipe:Be}),rl=Be({\u0275mod:Be}),Mn=Be({\u0275fac:Be}),jr=Be({__NG_ELEMENT_ID__:Be});let Co=0;function dr(e){return In(()=>{const t=Do(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||pn.Emulated,id:"c"+Co++,styles:e.styles||ke,_:null,schemas:e.schemas||null,tView:null};sl(n);const r=e.dependencies;return n.directiveDefs=gi(r,!1),n.pipeDefs=gi(r,!0),n})}function mc(e){return Ue(e)||mt(e)}function Qi(e){return null!==e}function mn(e){return In(()=>({type:e.type,bootstrap:e.bootstrap||ke,declarations:e.declarations||ke,imports:e.imports||ke,exports:e.exports||ke,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function il(e,t){if(null==e)return gn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function bt(e){return In(()=>{const t=Do(e);return sl(t),t})}function Ue(e){return e[Xi]||null}function mt(e){return e[Br]||null}function Et(e){return e[_o]||null}function je(e,t){const n=e[rl]||null;if(!n&&!0===t)throw new Error(`Type ${Ge(e)} does not have '\u0275mod' property.`);return n}function Do(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||ke,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:il(e.inputs,t),outputs:il(e.outputs)}}function sl(e){e.features?.forEach(t=>t(e))}function gi(e,t){if(!e)return null;const n=t?Et:mc;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Qi)}const Tn=0,X=1,ye=2,Qe=3,Ot=4,Wn=5,Dt=6,fr=7,Je=8,Zi=9,Oe=10,De=11,tn=12,Hr=13,ol=14,Ur=15,wt=16,mi=17,$r=18,vn=19,vi=20,Ji=21,qe=22,wo=1,al=2,es=7,ts=8,Vr=9,It=10;function vt(e){return Array.isArray(e)&&"object"==typeof e[wo]}function nn(e){return Array.isArray(e)&&!0===e[wo]}function bo(e){return 0!=(4&e.flags)}function yi(e){return e.componentOffset>-1}function ns(e){return 1==(1&e.flags)}function rn(e){return!!e.template}function yc(e){return 0!=(256&e[ye])}function C(e,t){return e.hasOwnProperty(Mn)?e[Mn]:null}class w{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function E(){return I}function I(e){return e.type.prototype.ngOnChanges&&(e.setInput=b),A}function A(){const e=P(this),t=e?.current;if(t){const n=e.previous;if(n===gn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function b(e,t,n,r){const i=this.declaredInputs[n],s=P(e)||function z(e,t){return e[O]=t}(e,{previous:gn,current:null}),a=s.current||(s.current={}),u=s.previous,h=u[i];a[i]=new w(h&&h.currentValue,t,u===gn),e[r]=t}E.ngInherit=!0;const O="__ngSimpleChanges__";function P(e){return e[O]||null}const $=function(e,t,n){};function Y(e){for(;Array.isArray(e);)e=e[Tn];return e}function ie(e,t){return Y(t[e])}function J(e,t){return Y(t[e.index])}function we(e,t){return e.data[t]}function be(e,t){const n=t[e];return vt(n)?n:n[Tn]}function Pe(e){return 64==(64&e[ye])}function et(e,t){return null==t?null:e[t]}function qt(e){e[$r]=0}function Ie(e,t){e[Wn]+=t;let n=e,r=e[Qe];for(;null!==r&&(1===t&&1===n[Wn]||-1===t&&0===n[Wn]);)r[Wn]+=t,n=r,r=r[Qe]}const ee={lFrame:Tp(null),bindingsEnabled:!0};function yp(){return ee.bindingsEnabled}function L(){return ee.lFrame.lView}function Fe(){return ee.lFrame.tView}function Tt(){let e=Dp();for(;null!==e&&64===e.type;)e=e.parent;return e}function Dp(){return ee.lFrame.currentTNode}function Yn(e,t){const n=ee.lFrame;n.currentTNode=e,n.isParent=t}function Dc(){return ee.lFrame.isParent}function wc(){ee.lFrame.isParent=!1}function rs(){return ee.lFrame.bindingIndex++}function lD(e,t){const n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=e,Sc(t)}function Sc(e){ee.lFrame.currentDirectiveIndex=e}function Ep(){return ee.lFrame.currentQueryIndex}function Ec(e){ee.lFrame.currentQueryIndex=e}function cD(e){const t=e[X];return 2===t.type?t.declTNode:1===t.type?e[Dt]:null}function Ip(e,t,n){if(n&re.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&re.Host||(i=cD(s),null===i||(s=s[Ur],10&i.type))););if(null===i)return!1;t=i,e=s}const r=ee.lFrame=Mp();return r.currentTNode=t,r.lView=e,!0}function Ic(e){const t=Mp(),n=e[X];ee.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Mp(){const e=ee.lFrame,t=null===e?null:e.child;return null===t?Tp(e):t}function Tp(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Ap(){const e=ee.lFrame;return ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const xp=Ap;function Mc(){const e=Ap();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function $t(){return ee.lFrame.selectedIndex}function _i(e){ee.lFrame.selectedIndex=e}function ll(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:h,ngAfterViewChecked:g,ngOnDestroy:y}=s;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),u&&((e.contentHooks||(e.contentHooks=[])).push(n,u),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,u)),h&&(e.viewHooks||(e.viewHooks=[])).push(-n,h),g&&((e.viewHooks||(e.viewHooks=[])).push(n,g),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,g)),null!=y&&(e.destroyHooks||(e.destroyHooks=[])).push(n,y)}}function ul(e,t,n){Rp(e,t,3,n)}function cl(e,t,n,r){(3&e[ye])===n&&Rp(e,t,n,r)}function Tc(e,t){let n=e[ye];(3&n)===t&&(n&=2047,n+=1,e[ye]=n)}function Rp(e,t,n,r){const s=r??-1,a=t.length-1;let u=0;for(let h=void 0!==r?65535&e[$r]:0;h<a;h++)if("number"==typeof t[h+1]){if(u=t[h],null!=r&&u>=r)break}else t[h]<0&&(e[$r]+=65536),(u<s||-1==s)&&(_D(e,n,t,h),e[$r]=(4294901760&e[$r])+h+2),h++}function _D(e,t,n,r){const i=n[r]<0,s=n[r+1],u=e[i?-n[r]:n[r]];if(i){if(e[ye]>>11<e[$r]>>16&&(3&e[ye])===t){e[ye]+=2048,$(4,u,s);try{s.call(u)}finally{$(5,u,s)}}}else{$(4,u,s);try{s.call(u)}finally{$(5,u,s)}}}const is=-1;class Io{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xc(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],a=n[r++],u=n[r++];e.setAttribute(t,a,u,s)}else{const s=i,a=n[++r];Op(s)?e.setProperty(t,s,a):e.setAttribute(t,s,a),r++}}return r}function Pp(e){return 3===e||4===e||6===e}function Op(e){return 64===e.charCodeAt(0)}function Mo(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Np(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Np(e,t,n,r,i){let s=0,a=e.length;if(-1===t)a=-1;else for(;s<e.length;){const u=e[s++];if("number"==typeof u){if(u===t){a=-1;break}if(u>t){a=s-1;break}}}for(;s<e.length;){const u=e[s];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(e.splice(a,0,t),s=a+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function kp(e){return e!==is}function dl(e){return 32767&e}function hl(e,t){let n=function SD(e){return e>>16}(e),r=t;for(;n>0;)r=r[Ur],n--;return r}let Rc=!0;function fl(e){const t=Rc;return Rc=e,t}const Fp=255,Lp=5;let bD=0;const Kn={};function pl(e,t){const n=Bp(e,t);if(-1!==n)return n;const r=t[X];r.firstCreatePass&&(e.injectorIndex=t.length,Pc(r.data,e),Pc(t,null),Pc(r.blueprint,null));const i=Oc(e,t),s=e.injectorIndex;if(kp(i)){const a=dl(i),u=hl(i,t),h=u[X].data;for(let g=0;g<8;g++)t[s+g]=u[a+g]|h[a+g]}return t[s+8]=i,s}function Pc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Bp(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Oc(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Wp(i),null===r)return is;if(n++,i=i[Ur],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return is}function Nc(e,t,n){!function ED(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(jr)&&(r=n[jr]),null==r&&(r=n[jr]=bD++);const i=r&Fp;t.data[e+(i>>Lp)]|=1<<i}(e,t,n)}function jp(e,t,n){if(n&re.Optional||void 0!==e)return e;qi()}function Hp(e,t,n,r){if(n&re.Optional&&void 0===r&&(r=null),!(n&(re.Self|re.Host))){const i=e[Zi],s=Xe(void 0);try{return i?i.get(t,r,n&re.Optional):go(t,r,n&re.Optional)}finally{Xe(s)}}return jp(r,0,n)}function Up(e,t,n,r=re.Default,i){if(null!==e){if(1024&t[ye]){const a=function xD(e,t,n,r,i){let s=e,a=t;for(;null!==s&&null!==a&&1024&a[ye]&&!(256&a[ye]);){const u=$p(s,a,n,r|re.Self,Kn);if(u!==Kn)return u;let h=s.parent;if(!h){const g=a[Ji];if(g){const y=g.get(n,Kn,r);if(y!==Kn)return y}h=Wp(a),a=a[Ur]}s=h}return i}(e,t,n,r,Kn);if(a!==Kn)return a}const s=$p(e,t,n,r,Kn);if(s!==Kn)return s}return Hp(t,n,r,i)}function $p(e,t,n,r,i){const s=function TD(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(jr)?e[jr]:void 0;return"number"==typeof t?t>=0?t&Fp:AD:t}(n);if("function"==typeof s){if(!Ip(t,e,r))return r&re.Host?jp(i,0,r):Hp(t,n,r,i);try{const a=s(r);if(null!=a||r&re.Optional)return a;qi()}finally{xp()}}else if("number"==typeof s){let a=null,u=Bp(e,t),h=is,g=r&re.Host?t[wt][Dt]:null;for((-1===u||r&re.SkipSelf)&&(h=-1===u?Oc(e,t):t[u+8],h!==is&&Gp(r,!1)?(a=t[X],u=dl(h),t=hl(h,t)):u=-1);-1!==u;){const y=t[X];if(Vp(s,u,y.data)){const D=MD(u,t,n,a,r,g);if(D!==Kn)return D}h=t[u+8],h!==is&&Gp(r,t[X].data[u+8]===g)&&Vp(s,u,t)?(a=y,u=dl(h),t=hl(h,t)):u=-1}}return i}function MD(e,t,n,r,i,s){const a=t[X],u=a.data[e+8],y=gl(u,a,n,null==r?yi(u)&&Rc:r!=a&&0!=(3&u.type),i&re.Host&&s===u);return null!==y?Ci(t,a,y,u):Kn}function gl(e,t,n,r,i){const s=e.providerIndexes,a=t.data,u=1048575&s,h=e.directiveStart,y=s>>20,S=i?u+y:e.directiveEnd;for(let T=r?u:u+y;T<S;T++){const R=a[T];if(T<h&&n===R||T>=h&&R.type===n)return T}if(i){const T=a[h];if(T&&rn(T)&&T.type===n)return h}return null}function Ci(e,t,n,r){let i=e[n];const s=t.data;if(function CD(e){return e instanceof Io}(i)){const a=i;a.resolving&&function lc(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new W(-200,`Circular dependency in DI detected for ${e}${n}`)}(function He(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():fe(e)}(s[n]));const u=fl(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Xe(a.injectImpl):null;Ip(e,r,re.Default);try{i=e[n]=a.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function yD(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const a=I(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==h&&Xe(h),fl(u),a.resolving=!1,xp()}}return i}function Vp(e,t,n){return!!(n[t+(e>>Lp)]&1<<e)}function Gp(e,t){return!(e&re.Self||e&re.Host&&t)}class ss{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Up(this._tNode,this._lView,t,zn(r),n)}}function AD(){return new ss(Tt(),L())}function kc(e){return zi(e)?()=>{const t=kc(ae(e));return t&&t()}:C(e)}function Wp(e){const t=e[X],n=t.type;return 2===n?t.declTNode:1===n?e[Dt]:null}const as="__parameters__";function us(e,t,n){return In(()=>{const r=function Fc(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return u.annotation=a,u;function u(h,g,y){const D=h.hasOwnProperty(as)?h[as]:Object.defineProperty(h,as,{value:[]})[as];for(;D.length<=y;)D.push(null);return(D[y]=D[y]||[]).push(a),h}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class pe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Di(e,t){e.forEach(n=>Array.isArray(n)?Di(n,t):t(n))}function Yp(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function vl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function xo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function sn(e,t,n){let r=cs(e,t);return r>=0?e[1|r]=n:(r=~r,function ND(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Bc(e,t){const n=cs(e,t);if(n>=0)return e[1|n]}function cs(e,t){return function Kp(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),a=e[s<<n];if(t===a)return s<<n;a>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const Ro=pi(us("Optional"),8),Po=pi(us("SkipSelf"),4);var Yt=(()=>((Yt=Yt||{})[Yt.Important=1]="Important",Yt[Yt.DashCase=2]="DashCase",Yt))();const Gc=new Map;let nw=0;const Wc="__ngContext__";function kt(e,t){vt(t)?(e[Wc]=t[vi],function iw(e){Gc.set(e[vi],e)}(t)):e[Wc]=t}let qc;function Yc(e,t){return qc(e,t)}function Fo(e){const t=e[Qe];return nn(t)?t[Qe]:t}function Kc(e){return gg(e[Hr])}function Xc(e){return gg(e[Ot])}function gg(e){for(;null!==e&&!nn(e);)e=e[Ot];return e}function hs(e,t,n,r,i){if(null!=r){let s,a=!1;nn(r)?s=r:vt(r)&&(a=!0,r=r[Tn]);const u=Y(r);0===e&&null!==n?null==i?Dg(t,n,u):wi(t,n,u,i||null,!0):1===e&&null!==n?wi(t,n,u,i||null,!0):2===e?function rd(e,t,n){const r=Dl(e,t);r&&function bw(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,u,a):3===e&&t.destroyNode(u),null!=s&&function Mw(e,t,n,r,i){const s=n[es];s!==Y(n)&&hs(t,e,r,s,i);for(let u=It;u<n.length;u++){const h=n[u];Lo(h[X],h,e,t,r,s)}}(t,e,s,n,i)}}function Zc(e,t,n){return e.createElement(t,n)}function vg(e,t){const n=e[Vr],r=n.indexOf(t),i=t[Qe];512&t[ye]&&(t[ye]&=-513,Ie(i,-1)),n.splice(r,1)}function Jc(e,t){if(e.length<=It)return;const n=It+t,r=e[n];if(r){const i=r[mi];null!==i&&i!==e&&vg(i,r),t>0&&(e[n-1][Ot]=r[Ot]);const s=vl(e,It+t);!function mw(e,t){Lo(e,t,t[De],2,null,null),t[Tn]=null,t[Dt]=null}(r[X],r);const a=s[vn];null!==a&&a.detachView(s[X]),r[Qe]=null,r[Ot]=null,r[ye]&=-65}return r}function yg(e,t){if(!(128&t[ye])){const n=t[De];n.destroyNode&&Lo(e,t,n,3,null,null),function _w(e){let t=e[Hr];if(!t)return ed(e[X],e);for(;t;){let n=null;if(vt(t))n=t[Hr];else{const r=t[It];r&&(n=r)}if(!n){for(;t&&!t[Ot]&&t!==e;)vt(t)&&ed(t[X],t),t=t[Qe];null===t&&(t=e),vt(t)&&ed(t[X],t),n=t&&t[Ot]}t=n}}(t)}}function ed(e,t){if(!(128&t[ye])){t[ye]&=-65,t[ye]|=128,function Sw(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Io)){const s=n[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const u=i[s[a]],h=s[a+1];$(4,u,h);try{h.call(u)}finally{$(5,u,h)}}else{$(4,i,s);try{s.call(i)}finally{$(5,i,s)}}}}}(e,t),function ww(e,t){const n=e.cleanup,r=t[fr];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),s+=2}else{const a=r[i=n[s+1]];n[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();t[fr]=null}}(e,t),1===t[X].type&&t[De].destroy();const n=t[mi];if(null!==n&&nn(t[Qe])){n!==t[Qe]&&vg(n,t);const r=t[vn];null!==r&&r.detachView(e)}!function sw(e){Gc.delete(e[vi])}(t)}}function _g(e,t,n){return function Cg(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Tn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===pn.None||s===pn.Emulated)return null}return J(r,n)}}(e,t.parent,n)}function wi(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Dg(e,t,n){e.appendChild(t,n)}function wg(e,t,n,r,i){null!==r?wi(e,t,n,r,i):Dg(e,t,n)}function Dl(e,t){return e.parentNode(t)}function Sg(e,t,n){return Eg(e,t,n)}let td,od,Eg=function bg(e,t,n){return 40&e.type?J(e,n):null};function wl(e,t,n,r){const i=_g(e,r,t),s=t[De],u=Sg(r.parent||t[Dt],r,t);if(null!=i)if(Array.isArray(n))for(let h=0;h<n.length;h++)wg(s,i,n[h],u,!1);else wg(s,i,n,u,!1);void 0!==td&&td(s,r,t,n,i)}function Sl(e,t){if(null!==t){const n=t.type;if(3&n)return J(t,e);if(4&n)return nd(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Sl(e,r);{const i=e[t.index];return nn(i)?nd(-1,i):Y(i)}}if(32&n)return Yc(t,e)()||Y(e[t.index]);{const r=Mg(e,t);return null!==r?Array.isArray(r)?r[0]:Sl(Fo(e[wt]),r):Sl(e,t.next)}}return null}function Mg(e,t){return null!==t?e[wt][Dt].projection[t.projection]:null}function nd(e,t){const n=It+e+1;if(n<t.length){const r=t[n],i=r[X].firstChild;if(null!==i)return Sl(r,i)}return t[es]}function id(e,t,n,r,i,s,a){for(;null!=n;){const u=r[n.index],h=n.type;if(a&&0===t&&(u&&kt(Y(u),r),n.flags|=2),32!=(32&n.flags))if(8&h)id(e,t,n.child,r,i,s,!1),hs(t,e,i,u,s);else if(32&h){const g=Yc(n,r);let y;for(;y=g();)hs(t,e,i,y,s);hs(t,e,i,u,s)}else 16&h?Tg(e,t,r,n,i,s):hs(t,e,i,u,s);n=a?n.projectionNext:n.next}}function Lo(e,t,n,r,i,s){id(n,r,e.firstChild,t,i,s,!1)}function Tg(e,t,n,r,i,s){const a=n[wt],h=a[Dt].projection[r.projection];if(Array.isArray(h))for(let g=0;g<h.length;g++)hs(t,e,i,h[g],s);else id(e,t,h,a[Qe],i,s,!0)}function Ag(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function xg(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&xc(e,t,r),null!==i&&Ag(e,t,i),null!==s&&function Aw(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class kg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fo})`}}function Gr(e){return e instanceof kg?e.changingThisBreaksApplicationSecurity:e}const Vw=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ft=(()=>((ft=ft||{})[ft.NONE=0]="NONE",ft[ft.HTML=1]="HTML",ft[ft.STYLE=2]="STYLE",ft[ft.SCRIPT=3]="SCRIPT",ft[ft.URL=4]="URL",ft[ft.RESOURCE_URL=5]="RESOURCE_URL",ft))();function hd(e){const t=function Ho(){const e=L();return e&&e[tn]}();return t?t.sanitize(ft.URL,e)||"":function Bo(e,t){const n=function jw(e){return e instanceof kg&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${fo})`)}return n===t}(e,"URL")?Gr(e):function ld(e){return(e=String(e)).match(Vw)?e:"unsafe:"+e}(fe(e))}const Ml=new pe("ENVIRONMENT_INITIALIZER"),Gg=new pe("INJECTOR",-1),zg=new pe("INJECTOR_DEF_TYPES");class Wg{get(t,n=ar){if(n===ar){const r=new Error(`NullInjectorError: No provider for ${Ge(t)}!`);throw r.name="NullInjectorError",r}return n}}function nS(...e){return{\u0275providers:qg(0,e),\u0275fromNgModule:!0}}function qg(e,...t){const n=[],r=new Set;let i;return Di(t,s=>{const a=s;fd(a,n,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&Yg(i,n),n}function Yg(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];pd(i,s=>{t.push(s)})}}function fd(e,t,n,r){if(!(e=ae(e)))return!1;let i=null,s=dn(e);const a=!s&&Ue(e);if(s||a){if(a&&!a.standalone)return!1;i=e}else{const h=e.ngModule;if(s=dn(h),!s)return!1;i=h}const u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){const h="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const g of h)fd(g,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!u){let g;r.add(i);try{Di(s.imports,y=>{fd(y,t,n,r)&&(g||(g=[]),g.push(y))})}finally{}void 0!==g&&Yg(g,t)}if(!u){const g=C(i)||(()=>new i);t.push({provide:i,useFactory:g,deps:ke},{provide:zg,useValue:i,multi:!0},{provide:Ml,useValue:()=>le(i),multi:!0})}const h=s.providers;null==h||u||pd(h,y=>{t.push(y)})}}return i!==e&&void 0!==e.providers}function pd(e,t){for(let n of e)Wi(n)&&(n=n.\u0275providers),Array.isArray(n)?pd(n,t):t(n)}const rS=Be({provide:String,useValue:Be});function gd(e){return null!==e&&"object"==typeof e&&rS in e}function Si(e){return"function"==typeof e}const md=new pe("Set Injector scope."),Tl={},sS={};let vd;function Al(){return void 0===vd&&(vd=new Wg),vd}class yr{}class Qg extends yr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_d(t,a=>this.processProvider(a)),this.records.set(Gg,ps(void 0,this)),i.has("environment")&&this.records.set(yr,ps(void 0,this));const s=this.records.get(md);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zg.multi,ke,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=St(this),r=Xe(void 0);try{return t()}finally{St(n),Xe(r)}}get(t,n=ar,r=re.Default){this.assertNotDestroyed(),r=zn(r);const i=St(this),s=Xe(void 0);try{if(!(r&re.SkipSelf)){let u=this.records.get(t);if(void 0===u){const h=function cS(e){return"function"==typeof e||"object"==typeof e&&e instanceof pe}(t)&&Yi(t);u=h&&this.injectableDefInScope(h)?ps(yd(t),Tl):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&re.Self?Al():this.parent).get(t,n=r&re.Optional&&n===ar?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Lr]=a[Lr]||[]).unshift(Ge(t)),i)throw a;return function nl(e,t,n,r){const i=e[Lr];throw t[vo]&&i.unshift(t[vo]),e.message=function pc(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==ur?e.slice(2):e;let i=Ge(t);if(Array.isArray(t))i=t.map(Ge).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let u=t[a];s.push(a+":"+("string"==typeof u?JSON.stringify(u):Ge(u)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(fi,"\n  ")}`}("\n"+e.message,i,n,r),e[lr]=i,e[Lr]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Xe(s),St(i)}}resolveInjectorInitializers(){const t=St(this),n=Xe(void 0);try{const r=this.get(Ml.multi,ke,re.Self);for(const i of r)i()}finally{St(t),Xe(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Ge(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(t){let n=Si(t=ae(t))?t:ae(t&&t.provide);const r=function aS(e){return gd(e)?ps(void 0,e.useValue):ps(function Zg(e,t,n){let r;if(Si(e)){const i=ae(e);return C(i)||yd(i)}if(gd(e))r=()=>ae(e.useValue);else if(function Xg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...yo(e.deps||[]));else if(function Kg(e){return!(!e||!e.useExisting)}(e))r=()=>le(ae(e.useExisting));else{const i=ae(e&&(e.useClass||e.provide));if(!function lS(e){return!!e.deps}(e))return C(i)||yd(i);r=()=>new i(...yo(e.deps))}return r}(e),Tl)}(t);if(Si(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ps(void 0,Tl,!0),i.factory=()=>yo(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Tl&&(n.value=sS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function uS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ae(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function yd(e){const t=Yi(e),n=null!==t?t.factory:C(e);if(null!==n)return n;if(e instanceof pe)throw new W(204,!1);if(e instanceof Function)return function oS(e){const t=e.length;if(t>0)throw xo(t,"?"),new W(204,!1);const n=function Qa(e){const t=e&&(e[Fr]||e[hn]);return t?(function ap(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),t):null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new W(204,!1)}function ps(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function _d(e,t){for(const n of e)Array.isArray(n)?_d(n,t):n&&Wi(n)?_d(n.\u0275providers,t):t(n)}class dS{}class Jg{}class fS{resolveComponentFactory(t){throw function hS(e){const t=Error(`No component factory found for ${Ge(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Uo=(()=>{class e{}return e.NULL=new fS,e})();function pS(){return gs(Tt(),L())}function gs(e,t){return new Xn(J(e,t))}let Xn=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=pS,e})();function gS(e){return e instanceof Xn?e.nativeElement:e}class tm{}let vS=(()=>{class e{}return e.\u0275prov=de({token:e,providedIn:"root",factory:()=>null}),e})();class Rl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const yS=new Rl("15.2.5"),Cd={},Dd="ngOriginalError";function wd(e){return e[Dd]}class ms{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&wd(t);for(;n&&wd(n);)n=wd(n);return n||null}}function _r(e){return e instanceof Function?e():e}function rm(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}const im="ng-template";function AS(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const a=e[r++];if(n&&"class"===s&&-1!==rm(a.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function sm(e){return 4===e.type&&e.value!==im}function xS(e,t,n){return t===(4!==e.type||n?e.value:im)}function RS(e,t,n){let r=4;const i=e.attrs||[],s=function NS(e){for(let t=0;t<e.length;t++)if(Pp(e[t]))return t;return e.length}(i);let a=!1;for(let u=0;u<t.length;u++){const h=t[u];if("number"!=typeof h){if(!a)if(4&r){if(r=2|1&r,""!==h&&!xS(e,h,n)||""===h&&1===t.length){if(An(r))return!1;a=!0}}else{const g=8&r?h:t[++u];if(8&r&&null!==e.attrs){if(!AS(e.attrs,g,n)){if(An(r))return!1;a=!0}continue}const D=PS(8&r?"class":h,i,sm(e),n);if(-1===D){if(An(r))return!1;a=!0;continue}if(""!==g){let S;S=D>s?"":i[D+1].toLowerCase();const T=8&r?S:null;if(T&&-1!==rm(T,g,0)||2&r&&g!==S){if(An(r))return!1;a=!0}}}}else{if(!a&&!An(r)&&!An(h))return!1;if(a&&An(h))continue;a=!1,r=h|1&r}}return An(r)||a}function An(e){return 0==(1&e)}function PS(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const a=t[i];if(a===e)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let u=t[++i];for(;"string"==typeof u;)u=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function kS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function om(e,t,n=!1){for(let r=0;r<t.length;r++)if(RS(e,t[r],n))return!0;return!1}function FS(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function am(e,t){return e?":not("+t.trim()+")":t}function LS(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const u=e[++n];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!An(a)&&(t+=am(s,i),i=""),r=a,s=s||!An(r);n++}return""!==i&&(t+=am(s,i)),t}const ve={};function ys(e){lm(Fe(),L(),$t()+e,!1)}function lm(e,t,n,r){if(!r)if(3==(3&t[ye])){const s=e.preOrderCheckHooks;null!==s&&ul(t,s,n)}else{const s=e.preOrderHooks;null!==s&&cl(t,s,0,n)}_i(n)}function hm(e,t=null,n=null,r){const i=fm(e,t,n,r);return i.resolveInjectorInitializers(),i}function fm(e,t=null,n=null,r,i=new Set){const s=[n||ke,nS(e)];return r=r||("object"==typeof e?void 0:Ge(e)),new Qg(s,t||Al(),r||null,i)}let Cr=(()=>{class e{static create(n,r){if(Array.isArray(n))return hm({name:""},r,n,"");{const i=n.name??"";return hm({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=ar,e.NULL=new Wg,e.\u0275prov=de({token:e,providedIn:"any",factory:()=>le(Gg)}),e.__NG_ELEMENT_ID__=-1,e})();function ue(e,t=re.Default){const n=L();return null===n?le(e,t):Up(Tt(),n,ae(e),t)}function Dm(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const a=e.data[s];Ec(n[r]),a.contentQueries(2,t[s],s)}}}function Ol(e,t,n,r,i,s,a,u,h,g,y){const D=t.blueprint.slice();return D[Tn]=i,D[ye]=76|r,(null!==y||e&&1024&e[ye])&&(D[ye]|=1024),qt(D),D[Qe]=D[Ur]=e,D[Je]=n,D[Oe]=a||e&&e[Oe],D[De]=u||e&&e[De],D[tn]=h||e&&e[tn]||null,D[Zi]=g||e&&e[Zi]||null,D[Dt]=s,D[vi]=function rw(){return nw++}(),D[Ji]=y,D[wt]=2==t.type?e[wt]:D,D}function Cs(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Md(e,t,n,r,i){const s=Dp(),a=Dc(),h=e.data[t]=function ub(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=h),null!==s&&(a?null==s.child&&null!==h.parent&&(s.child=h):null===s.next&&(s.next=h,h.prev=s)),h}(e,t,n,r,i),function aD(){return ee.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const a=function Eo(){const e=ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return Yn(s,!0),s}function $o(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Td(e,t,n){Ic(t);try{const r=e.viewQuery;null!==r&&Bd(1,r,n);const i=e.template;null!==i&&wm(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Dm(e,t),e.staticViewQueries&&Bd(2,e.viewQuery,n);const s=e.components;null!==s&&function ob(e,t){for(let n=0;n<t.length;n++)Tb(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[ye]&=-5,Mc()}}function Nl(e,t,n,r){const i=t[ye];if(128!=(128&i)){Ic(t);try{qt(t),function Sp(e){return ee.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&wm(e,t,n,2,r);const a=3==(3&i);if(a){const g=e.preOrderCheckHooks;null!==g&&ul(t,g,null)}else{const g=e.preOrderHooks;null!==g&&cl(t,g,0,null),Tc(t,0)}if(function Ib(e){for(let t=Kc(e);null!==t;t=Xc(t)){if(!t[al])continue;const n=t[Vr];for(let r=0;r<n.length;r++){const i=n[r];512&i[ye]||Ie(i[Qe],1),i[ye]|=512}}}(t),function Eb(e){for(let t=Kc(e);null!==t;t=Xc(t))for(let n=It;n<t.length;n++){const r=t[n],i=r[X];Pe(r)&&Nl(i,r,i.template,r[Je])}}(t),null!==e.contentQueries&&Dm(e,t),a){const g=e.contentCheckHooks;null!==g&&ul(t,g)}else{const g=e.contentHooks;null!==g&&cl(t,g,1),Tc(t,1)}!function ib(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)_i(~i);else{const s=i,a=n[++r],u=n[++r];lD(a,s),u(2,t[s])}}}finally{_i(-1)}}(e,t);const u=e.components;null!==u&&function sb(e,t){for(let n=0;n<t.length;n++)Mb(e,t[n])}(t,u);const h=e.viewQuery;if(null!==h&&Bd(2,h,r),a){const g=e.viewCheckHooks;null!==g&&ul(t,g)}else{const g=e.viewHooks;null!==g&&cl(t,g,2),Tc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[ye]&=-41,512&t[ye]&&(t[ye]&=-513,Ie(t[Qe],-1))}finally{Mc()}}}function wm(e,t,n,r,i){const s=$t(),a=2&r;try{_i(-1),a&&t.length>qe&&lm(e,t,qe,!1),$(a?2:0,i),n(r,i)}finally{_i(s),$(a?3:1,i)}}function Ad(e,t,n){if(bo(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}}function xd(e,t,n){yp()&&(function gb(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;yi(n)&&function wb(e,t,n){const r=J(t,e),i=Sm(n),s=e[Oe],a=kl(e,Ol(e,i,null,n.onPush?32:16,r,t,s,s.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||pl(n,t),kt(r,t);const a=n.initialInputs;for(let u=i;u<s;u++){const h=e.data[u],g=Ci(t,e,u,n);kt(g,t),null!==a&&Sb(0,u-i,g,h,0,a),rn(h)&&(be(n.index,t)[Je]=Ci(t,e,u,n))}}(e,t,n,J(n,t)),64==(64&n.flags)&&Am(e,t,n))}function Rd(e,t,n=J){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],u=-1===a?n(t,e):e[a];e[i++]=u}}}function Sm(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Pd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Pd(e,t,n,r,i,s,a,u,h,g){const y=qe+r,D=y+i,S=function ab(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ve);return n}(y,D),T="function"==typeof g?g():g;return S[X]={type:e,blueprint:S,template:n,queries:null,viewQuery:u,declTNode:t,data:S.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:h,consts:T,incompleteFirstPass:!1}}function bm(e,t,n,r){const i=Rm(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Pm(e).push(r,i.length-1))}function Em(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?Im(n,t,i,s):r.hasOwnProperty(i)&&Im(n,t,r[i],s)}return n}function Im(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Mm(e,t){const n=be(t,e);16&n[ye]||(n[ye]|=32)}function Od(e,t,n,r){if(yp()){const i=null===r?null:{"":-1},s=function vb(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];if(om(t,a.selectors,!1))if(r||(r=[]),rn(a))if(null!==a.findHostDirectiveDefs){const u=[];i=i||new Map,a.findHostDirectiveDefs(a,u,i),r.unshift(...u,a),Nd(e,t,u.length)}else r.unshift(a),Nd(e,t,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(e,n);let a,u;null===s?a=u=null:[a,u]=s,null!==a&&Tm(e,t,n,a,i,u),i&&function yb(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new W(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=Mo(n.mergedAttrs,n.attrs)}function Tm(e,t,n,r,i,s){for(let g=0;g<r.length;g++)Nc(pl(n,t),e,r[g].type);!function Cb(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let g=0;g<r.length;g++){const y=r[g];y.providersResolver&&y.providersResolver(y)}let a=!1,u=!1,h=$o(e,t,r.length,null);for(let g=0;g<r.length;g++){const y=r[g];n.mergedAttrs=Mo(n.mergedAttrs,y.hostAttrs),Db(e,n,t,h,y),_b(h,y,i),null!==y.contentQueries&&(n.flags|=4),(null!==y.hostBindings||null!==y.hostAttrs||0!==y.hostVars)&&(n.flags|=64);const D=y.type.prototype;!a&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!u&&(D.ngOnChanges||D.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),u=!0),h++}!function cb(e,t,n){const i=t.directiveEnd,s=e.data,a=t.attrs,u=[];let h=null,g=null;for(let y=t.directiveStart;y<i;y++){const D=s[y],S=n?n.get(D):null,R=S?S.outputs:null;h=Em(D.inputs,y,h,S?S.inputs:null),g=Em(D.outputs,y,g,R);const N=null===h||null===a||sm(t)?null:bb(h,y,a);u.push(N)}null!==h&&(h.hasOwnProperty("class")&&(t.flags|=8),h.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=u,t.inputs=h,t.outputs=g}(e,n,s)}function Am(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=function uD(){return ee.lFrame.currentDirectiveIndex}();try{_i(s);for(let u=r;u<i;u++){const h=e.data[u],g=t[u];Sc(u),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&mb(h,g)}}finally{_i(-1),Sc(a)}}function mb(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Nd(e,t,n){t.componentOffset=n,(e.components||(e.components=[])).push(t.index)}function _b(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;rn(t)&&(n[""]=e)}}function Db(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=C(i.type)),a=new Io(s,rn(i),ue);e.blueprint[r]=a,n[r]=a,function fb(e,t,n,r,i){const s=i.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const u=~t.index;(function pb(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(n,r,s)}}(e,t,r,$o(e,n,i.hostVars,ve),i)}function Sb(e,t,n,r,i,s){const a=s[t];if(null!==a){const u=r.setInput;for(let h=0;h<a.length;){const g=a[h++],y=a[h++],D=a[h++];null!==u?r.setInput(n,D,g,y):n[y]=D}}}function bb(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const a=e[s];for(let u=0;u<a.length;u+=2)if(a[u]===t){r.push(s,a[u+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function xm(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}function Mb(e,t){const n=be(t,e);if(Pe(n)){const r=n[X];48&n[ye]?Nl(r,n,r.template,n[Je]):n[Wn]>0&&Fd(n)}}function Fd(e){for(let r=Kc(e);null!==r;r=Xc(r))for(let i=It;i<r.length;i++){const s=r[i];if(Pe(s))if(512&s[ye]){const a=s[X];Nl(a,s,a.template,s[Je])}else s[Wn]>0&&Fd(s)}const n=e[X].components;if(null!==n)for(let r=0;r<n.length;r++){const i=be(n[r],e);Pe(i)&&i[Wn]>0&&Fd(i)}}function Tb(e,t){const n=be(t,e),r=n[X];(function Ab(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Td(r,n,n[Je])}function kl(e,t){return e[Hr]?e[ol][Ot]=t:e[Hr]=t,e[ol]=t,t}function Ld(e){for(;e;){e[ye]|=32;const t=Fo(e);if(yc(e)&&!t)return e;e=t}return null}function Fl(e,t,n,r=!0){const i=t[Oe];i.begin&&i.begin();try{Nl(e,t,e.template,n)}catch(a){throw r&&Nm(t,a),a}finally{i.end&&i.end()}}function Bd(e,t,n){Ec(0),t(e,n)}function Rm(e){return e[fr]||(e[fr]=[])}function Pm(e){return e.cleanup||(e.cleanup=[])}function Nm(e,t){const n=e[Zi],r=n?n.get(ms,null):null;r&&r.handleError(t)}function jd(e,t,n,r,i){for(let s=0;s<n.length;){const a=n[s++],u=n[s++],h=t[a],g=e.data[a];null!==g.setInput?g.setInput(h,i,r,u):h[u]=i}}function Ll(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const u=t[a];"number"==typeof u?s=u:1==s?i=ho(i,u):2==s&&(r=ho(r,u+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Bl(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Y(s)),nn(s))for(let u=It;u<s.length;u++){const h=s[u],g=h[X].firstChild;null!==g&&Bl(h[X],h,g,r)}const a=n.type;if(8&a)Bl(e,t,n.child,r);else if(32&a){const u=Yc(n,t);let h;for(;h=u();)r.push(h)}else if(16&a){const u=Mg(t,n);if(Array.isArray(u))r.push(...u);else{const h=Fo(t[wt]);Bl(h[X],h,u,r,!0)}}n=i?n.projectionNext:n.next}return r}class Vo{get rootNodes(){const t=this._lView,n=t[X];return Bl(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Je]}set context(t){this._lView[Je]=t}get destroyed(){return 128==(128&this._lView[ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Qe];if(nn(t)){const n=t[ts],r=n?n.indexOf(this):-1;r>-1&&(Jc(t,r),vl(n,r))}this._attachedToViewContainer=!1}yg(this._lView[X],this._lView)}onDestroy(t){bm(this._lView[X],this._lView,null,t)}markForCheck(){Ld(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-65}reattach(){this._lView[ye]|=64}detectChanges(){Fl(this._lView[X],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yw(e,t){Lo(e,t,t[De],2,null,null)}(this._lView[X],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=t}}class xb extends Vo{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Fl(t[X],t,t[Je],!1)}checkNoChanges(){}get context(){return null}}class km extends Uo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ue(t);return new Go(n,this.ngModule)}}function Fm(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Pb{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=zn(r);const i=this.injector.get(t,Cd,r);return i!==Cd||n===Cd?i:this.parentInjector.get(t,n,r)}}class Go extends Jg{get inputs(){return Fm(this.componentDef.inputs)}get outputs(){return Fm(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function BS(e){return e.map(LS).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof yr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Pb(t,s):t,u=a.get(tm,null);if(null===u)throw new W(407,!1);const h=a.get(vS,null),g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?function lb(e,t,n){return e.selectRootElement(t,n===pn.ShadowDom)}(g,r,this.componentDef.encapsulation):Zc(g,y,function Rb(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(y)),S=this.componentDef.onPush?288:272,T=Pd(0,null,null,1,0,null,null,null,null,null),R=Ol(null,T,null,S,null,null,u,g,h,a,null);let N,k;Ic(R);try{const U=this.componentDef;let Z,F=null;U.findHostDirectiveDefs?(Z=[],F=new Map,U.findHostDirectiveDefs(U,Z,F),Z.push(U)):Z=[U];const me=function Nb(e,t){const n=e[X],r=qe;return e[r]=t,Cs(n,r,2,"#host",null)}(R,D),Ye=function kb(e,t,n,r,i,s,a,u){const h=i[X];!function Fb(e,t,n,r){for(const i of e)t.mergedAttrs=Mo(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Ll(t,t.mergedAttrs,!0),null!==n&&xg(r,n,t))}(r,e,t,a);const g=s.createRenderer(t,n),y=Ol(i,Sm(n),null,n.onPush?32:16,i[e.index],e,s,g,u||null,null,null);return h.firstCreatePass&&Nd(h,e,r.length-1),kl(i,y),i[e.index]=y}(me,D,U,Z,R,u,g);k=we(T,qe),D&&function Bb(e,t,n,r){if(r)xc(e,n,["ng-version",yS.full]);else{const{attrs:i,classes:s}=function jS(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!An(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&xc(e,n,i),s&&s.length>0&&Ag(e,n,s.join(" "))}}(g,U,D,r),void 0!==n&&function jb(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(k,this.ngContentSelectors,n),N=function Lb(e,t,n,r,i,s){const a=Tt(),u=i[X],h=J(a,i);Tm(u,i,a,n,null,r);for(let y=0;y<n.length;y++)kt(Ci(i,u,a.directiveStart+y,a),i);Am(u,i,a),h&&kt(h,i);const g=Ci(i,u,a.directiveStart+a.componentOffset,a);if(e[Je]=i[Je]=g,null!==s)for(const y of s)y(g,t);return Ad(u,a,e),g}(Ye,U,Z,F,R,[Hb]),Td(T,R,null)}finally{Mc()}return new Ob(this.componentType,N,gs(k,R),R,k)}}class Ob extends dS{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new xb(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const s=this._rootLView;jd(s[X],s,i,t,n),Mm(s,this._tNode.index)}}get injector(){return new ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Hb(){const e=Tt();ll(L()[X],e)}function jl(e){return!!function Ud(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Ft(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ul(e,t,n,r,i,s,a,u){const h=L(),g=Fe(),y=e+qe,D=g.firstCreatePass?function eE(e,t,n,r,i,s,a,u,h){const g=t.consts,y=Cs(t,e,4,a||null,et(g,u));Od(t,n,y,et(g,h)),ll(t,y);const D=y.tView=Pd(2,y,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,g);return null!==t.queries&&(t.queries.template(t,y),D.queries=t.queries.embeddedTView(y)),y}(y,g,h,t,n,r,i,s,a):g.data[y];Yn(D,!1);const S=h[De].createComment("");wl(g,h,S,D),kt(S,h),kl(h,h[y]=xm(S,h,S,D)),ns(D)&&xd(g,h,D),null!=a&&Rd(h,D,u)}function wr(e,t,n){const r=L();return Ft(r,rs(),t)&&function on(e,t,n,r,i,s,a,u){const h=J(t,n);let y,g=t.inputs;!u&&null!=g&&(y=g[r])?(jd(e,n,y,r,i),yi(t)&&Mm(n,t.index)):3&t.type&&(r=function db(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,t.value||"",r):i,s.setProperty(h,r,i))}(Fe(),function tt(){const e=ee.lFrame;return we(e.tView,e.selectedIndex)}(),r,e,t,r[De],n,!1),wr}function Vd(e,t,n,r,i){const a=i?"class":"style";jd(e,n,t.inputs[a],a,r)}function Xt(e,t,n,r){const i=L(),s=Fe(),a=qe+e,u=i[De],h=s.firstCreatePass?function nE(e,t,n,r,i,s){const a=t.consts,h=Cs(t,e,2,r,et(a,i));return Od(t,n,h,et(a,s)),null!==h.attrs&&Ll(h,h.attrs,!1),null!==h.mergedAttrs&&Ll(h,h.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,h),h}(a,s,i,t,n,r):s.data[a],g=i[a]=Zc(u,t,function vD(){return ee.lFrame.currentNamespace}()),y=ns(h);return Yn(h,!0),xg(u,g,h),32!=(32&h.flags)&&wl(s,i,g,h),0===function qn(){return ee.lFrame.elementDepthCount}()&&kt(g,i),function nD(){ee.lFrame.elementDepthCount++}(),y&&(xd(s,i,h),Ad(s,h,i)),null!==r&&Rd(i,h),Xt}function an(){let e=Tt();Dc()?wc():(e=e.parent,Yn(e,!1));const t=e;!function rD(){ee.lFrame.elementDepthCount--}();const n=Fe();return n.firstCreatePass&&(ll(n,e),bo(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function DD(e){return 0!=(8&e.flags)}(t)&&Vd(n,t,L(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function wD(e){return 0!=(16&e.flags)}(t)&&Vd(n,t,L(),t.stylesWithoutHost,!1),an}function Ei(e,t,n,r){return Xt(e,t,n,r),an(),Ei}function $l(e){return!!e&&"function"==typeof e.then}const tv=function ev(e){return!!e&&"function"==typeof e.subscribe};function Wo(e,t,n,r){const i=L(),s=Fe(),a=Tt();return function rv(e,t,n,r,i,s,a){const u=ns(r),g=e.firstCreatePass&&Pm(e),y=t[Je],D=Rm(t);let S=!0;if(3&r.type||a){const N=J(r,t),k=a?a(N):N,U=D.length,Z=a?me=>a(Y(me[r.index])):r.index;let F=null;if(!a&&u&&(F=function iE(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===n&&i[s+1]===r){const u=t[fr],h=i[s+2];return u.length>h?u[h]:null}"string"==typeof a&&(s+=2)}return null}(e,t,i,r.index)),null!==F)(F.__ngLastListenerFn__||F).__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,S=!1;else{s=sv(r,t,y,s,!1);const me=n.listen(k,i,s);D.push(s,me),g&&g.push(i,Z,U,U+1)}}else s=sv(r,t,y,s,!1);const T=r.outputs;let R;if(S&&null!==T&&(R=T[i])){const N=R.length;if(N)for(let k=0;k<N;k+=2){const Ye=t[R[k]][R[k+1]].subscribe(s),ut=D.length;D.push(s,Ye),g&&g.push(i,r.index,ut,-(ut+1))}}}(s,i,i[De],a,e,t,r),Wo}function iv(e,t,n,r){try{return $(6,t,n),!1!==n(r)}catch(i){return Nm(e,i),!1}finally{$(7,t,n)}}function sv(e,t,n,r,i){return function s(a){if(a===Function)return r;Ld(e.componentOffset>-1?be(e.index,t):t);let h=iv(t,n,r,a),g=s.__ngNextListenerFn__;for(;g;)h=iv(t,n,g,a)&&h,g=g.__ngNextListenerFn__;return i&&!1===h&&(a.preventDefault(),a.returnValue=!1),h}}function oE(e,t){let n=null;const r=function OS(e){const t=e.attrs;if(null!=t){const n=t.indexOf(5);if(!(1&n))return t[n+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?om(e,s,!0):FS(r,s))return i}else n=i}return n}function Wd(e){const t=L()[wt][Dt];if(!t.projection){const r=t.projection=xo(e?e.length:1,null),i=r.slice();let s=t.child;for(;null!==s;){const a=e?oE(s,e):0;null!==a&&(i[a]?i[a].projectionNext=s:r[a]=s,i[a]=s),s=s.next}}}function qd(e,t=0,n){const r=L(),i=Fe(),s=Cs(i,qe+e,16,null,n||null);null===s.projection&&(s.projection=t),wc(),32!=(32&s.flags)&&function Iw(e,t,n){Tg(t[De],0,t,n,_g(e,n,t),Sg(n.parent||t[Dt],n,t))}(i,r,s)}function Vl(e,t){return e<<17|t<<2}function zr(e){return e>>17&32767}function Kd(e){return 2|e}function Ii(e){return(131068&e)>>2}function Xd(e,t){return-131069&e|t<<2}function Qd(e){return 1|e}function gv(e,t,n,r,i){const s=e[n+1],a=null===t;let u=r?zr(s):Ii(s),h=!1;for(;0!==u&&(!1===h||a);){const y=e[u+1];hE(e[u],t)&&(h=!0,e[u+1]=r?Qd(y):Kd(y)),u=r?zr(y):Ii(y)}h&&(e[n+1]=r?Kd(s):Qd(s))}function hE(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&cs(e,t)>=0}const _t={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mv(e){return e.substring(_t.key,_t.keyEnd)}function fE(e){return e.substring(_t.value,_t.valueEnd)}function yv(e,t){const n=_t.textEnd;let r=_t.key=xs(e,t,n);return n===r?-1:(r=_t.keyEnd=function vE(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=Cv(e,r,n),r=_t.value=xs(e,r,n),r=_t.valueEnd=function yE(e,t,n){let r=-1,i=-1,s=-1,a=t,u=a;for(;a<n;){const h=e.charCodeAt(a++);if(59===h)return u;34===h||39===h?u=a=Dv(e,h,a,n):t===a-4&&85===s&&82===i&&76===r&&40===h?u=a=Dv(e,41,a,n):h>32&&(u=a),s=i,i=r,r=-33&h}return u}(e,r,n),Cv(e,r,n))}function xs(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Cv(e,t,n,r){return(t=xs(e,t,n))<n&&t++,t}function Dv(e,t,n,r){let i=-1,s=n;for(;s<r;){const a=e.charCodeAt(s++);if(a==t&&92!==i)return s;i=92==a&&92===i?0:a}throw new Error}function xn(e){!function Pn(e,t,n,r){const i=Fe(),s=function mr(e){const t=ee.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);i.firstUpdatePass&&function Ev(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[$t()],a=bv(e,n);Av(s,r)&&null===t&&!a&&(t=!1),t=function DE(e,t,n,r){const i=function bc(e){const t=ee.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=qo(n=Zd(null,e,t,n,r),t.attrs,r),s=null);else{const a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(n=Zd(i,e,t,n,r),null===s){let h=function wE(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ii(r))return e[zr(r)]}(e,t,r);void 0!==h&&Array.isArray(h)&&(h=Zd(null,e,t,h[1],r),h=qo(h,t.attrs,r),function SE(e,t,n,r){e[zr(n?t.classBindings:t.styleBindings)]=r}(e,t,r,h))}else s=function bE(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=qo(r,e[s].hostAttrs,n);return qo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function cE(e,t,n,r,i,s){let a=s?t.classBindings:t.styleBindings,u=zr(a),h=Ii(a);e[r]=n;let y,g=!1;if(Array.isArray(n)?(y=n[1],(null===y||cs(n,y)>0)&&(g=!0)):y=n,i)if(0!==h){const S=zr(e[u+1]);e[r+1]=Vl(S,u),0!==S&&(e[S+1]=Xd(e[S+1],r)),e[u+1]=function lE(e,t){return 131071&e|t<<17}(e[u+1],r)}else e[r+1]=Vl(u,0),0!==u&&(e[u+1]=Xd(e[u+1],r)),u=r;else e[r+1]=Vl(h,0),0===u?u=r:e[h+1]=Xd(e[h+1],r),h=r;g&&(e[r+1]=Kd(e[r+1])),gv(e,y,r,!0),gv(e,y,r,!1),function dE(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&cs(s,t)>=0&&(n[r+1]=Qd(n[r+1]))}(t,y,e,r,s),a=Vl(u,h),s?t.classBindings=a:t.styleBindings=a}(i,s,t,n,a,r)}}(i,null,s,r);const a=L();if(n!==ve&&Ft(a,s,n)){const u=i.data[$t()];if(Av(u,r)&&!bv(i,s)){let h=r?u.classesWithoutHost:u.stylesWithoutHost;null!==h&&(n=ho(h,n||"")),Vd(i,u,a,n,r)}else!function IE(e,t,n,r,i,s,a,u){i===ve&&(i=ke);let h=0,g=0,y=0<i.length?i[0]:null,D=0<s.length?s[0]:null;for(;null!==y||null!==D;){const S=h<i.length?i[h+1]:void 0,T=g<s.length?s[g+1]:void 0;let N,R=null;y===D?(h+=2,g+=2,S!==T&&(R=D,N=T)):null===D||null!==y&&y<D?(h+=2,R=y):(g+=2,R=D,N=T),null!==R&&Mv(e,t,n,r,R,N,a,u),y=h<i.length?i[h]:null,D=g<s.length?s[g]:null}}(i,u,a,a[De],a[s+1],a[s+1]=function EE(e,t,n){if(null==n||""===n)return ke;const r=[],i=Gr(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}(Iv,_E,e,!1)}function _E(e,t){for(let n=function gE(e){return function _v(e){_t.key=0,_t.keyEnd=0,_t.value=0,_t.valueEnd=0,_t.textEnd=e.length}(e),yv(e,xs(e,0,_t.textEnd))}(t);n>=0;n=yv(t,n))Iv(e,mv(t),fE(t))}function bv(e,t){return t>=e.expandoStartIndex}function Zd(e,t,n,r,i){let s=null;const a=n.directiveEnd;let u=n.directiveStylingLast;for(-1===u?u=n.directiveStart:u++;u<a&&(s=t[u],r=qo(r,s.hostAttrs,i),s!==e);)u++;return null!==e&&(n.directiveStylingLast=u),r}function qo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),sn(e,a,!!n||t[++s]))}return void 0===e?null:e}function Iv(e,t,n){sn(e,t,Gr(n))}function Mv(e,t,n,r,i,s,a,u){if(!(3&t.type))return;const h=e.data,g=h[u+1],y=function uE(e){return 1==(1&e)}(g)?Tv(h,t,n,i,Ii(g),a):void 0;Gl(y)||(Gl(s)||function aE(e){return 2==(2&e)}(g)&&(s=Tv(h,null,n,i,u,a)),function Tw(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Yt.DashCase;null==i?e.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Yt.Important),e.setStyle(n,r,i,s))}}(r,a,ie($t(),n),i,s))}function Tv(e,t,n,r,i,s){const a=null===t;let u;for(;i>0;){const h=e[i],g=Array.isArray(h),y=g?h[1]:h,D=null===y;let S=n[i+1];S===ve&&(S=D?ke:void 0);let T=D?Bc(S,r):y===r?S:void 0;if(g&&!Gl(T)&&(T=Bc(h,r)),Gl(T)&&(u=T,a))return u;const R=e[i+1];i=a?zr(R):Ii(R)}if(null!==t){let h=s?t.residualClasses:t.residualStyles;null!=h&&(u=Bc(h,r))}return u}function Gl(e){return void 0!==e}function Av(e,t){return 0!=(e.flags&(t?8:16))}function Wr(e,t=""){const n=L(),r=Fe(),i=e+qe,s=r.firstCreatePass?Cs(r,i,1,t,null):r.data[i],a=n[i]=function Qc(e,t){return e.createText(t)}(n[De],t);wl(r,n,a,s),Yn(s,!1)}function Jd(e){return eh("",e,""),Jd}function eh(e,t,n){const r=L(),i=function ws(e,t,n,r){return Ft(e,rs(),n)?t+fe(n)+r:ve}(r,e,t,n);return i!==ve&&function Dr(e,t,n){const r=ie(t,e);!function mg(e,t,n){e.setValue(t,n)}(e[De],r,n)}(r,$t(),i),eh}const Ps="en-US";let Qv=Ps;class Os{}class Sy{}class by extends Os{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new km(this);const r=je(t);this._bootstrapComponents=_r(r.bootstrap),this._r3Injector=fm(t,n,[{provide:Os,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],Ge(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ah extends Sy{constructor(t){super(),this.moduleType=t}create(t){return new by(this.moduleType,t)}}class YI extends Os{constructor(t,n,r){super(),this.componentFactoryResolver=new km(this),this.instance=null;const i=new Qg([...t,{provide:Os,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],n||Al(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Kl(e,t,n=null){return new YI(e,t,n).injector}let KI=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=qg(0,n.type),i=r.length>0?Kl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=de({token:e,providedIn:"environment",factory:()=>new e(le(yr))}),e})();function Ey(e){e.getStandaloneInjector=t=>t.get(KI).getOrCreateStandaloneInjector(e)}function Py(e,t,n){const r=function Ut(){const e=ee.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}()+e,i=L();return i[r]===ve?function Zn(e,t,n){return e[t]=n}(i,r,n?t.call(n):t()):function zo(e,t){return e[t]}(i,r)}function uh(e){return t=>{setTimeout(e,void 0,t)}}const _e=class CM extends M{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),a=r;if(t&&"object"==typeof t){const h=t;i=h.next?.bind(h),s=h.error?.bind(h),a=h.complete?.bind(h)}this.__isAsync&&(s=uh(s),i&&(i=uh(i)),a&&(a=uh(a)));const u=super.subscribe({next:i,error:s,complete:a});return t instanceof Re&&t.add(u),u}};function DM(){return this._results[Symbol.iterator]()}class ta{get changes(){return this._changes||(this._changes=new _e)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ta.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=DM)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=function yn(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function PD(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sr=(()=>{class e{}return e.__NG_ELEMENT_ID__=bM,e})();const wM=Sr,SM=class extends wM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tView,i=Ol(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[mi]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[vn];return null!==a&&(i[vn]=a.createEmbeddedView(r)),Td(r,i,t),new Vo(i)}};function bM(){return Xl(Tt(),L())}function Xl(e,t){return 4&e.type?new SM(t,e,gs(e,t)):null}let On=(()=>{class e{}return e.__NG_ELEMENT_ID__=EM,e})();function EM(){return Hy(Tt(),L())}const IM=On,By=class extends IM{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return gs(this._hostTNode,this._hostLView)}get injector(){return new ss(this._hostTNode,this._hostLView)}get parentInjector(){const t=Oc(this._hostTNode,this._hostLView);if(kp(t)){const n=hl(t,this._hostLView),r=dl(t);return new ss(n[X].data[r+8],n)}return new ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=jy(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-It}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedView(n||{},s);return this.insert(a,i),a}createComponent(t,n,r,i,s){const a=t&&!function Ao(e){return"function"==typeof e}(t);let u;if(a)u=n;else{const D=n||{};u=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const h=a?t:new Go(Ue(t)),g=r||this.parentInjector;if(!s&&null==h.ngModule){const S=(a?g:this.parentInjector).get(yr,null);S&&(s=S)}const y=h.create(g,i,void 0,s);return this.insert(y.hostView,u),y}insert(t,n){const r=t._lView,i=r[X];if(function ot(e){return nn(e[Qe])}(r)){const y=this.indexOf(t);if(-1!==y)this.detach(y);else{const D=r[Qe],S=new By(D,D[Dt],D[Qe]);S.detach(S.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;!function Cw(e,t,n,r){const i=It+r,s=n.length;r>0&&(n[i-1][Ot]=t),r<s-It?(t[Ot]=n[i],Yp(n,It+r,t)):(n.push(t),t[Ot]=null),t[Qe]=n;const a=t[mi];null!==a&&n!==a&&function Dw(e,t){const n=e[Vr];t[wt]!==t[Qe][Qe][wt]&&(e[al]=!0),null===n?e[Vr]=[t]:n.push(t)}(a,t);const u=t[vn];null!==u&&u.insertView(e),t[ye]|=64}(i,r,a,s);const u=nd(s,a),h=r[De],g=Dl(h,a[es]);return null!==g&&function vw(e,t,n,r,i,s){r[Tn]=i,r[Dt]=t,Lo(e,r,n,1,i,s)}(i,a[Dt],h,r,g,u),t.attachToViewContainerRef(),Yp(ch(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=jy(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Jc(this._lContainer,n);r&&(vl(ch(this._lContainer),n),yg(r[X],r))}detach(t){const n=this._adjustIndex(t,-1),r=Jc(this._lContainer,n);return r&&null!=vl(ch(this._lContainer),n)?new Vo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function jy(e){return e[ts]}function ch(e){return e[ts]||(e[ts]=[])}function Hy(e,t){let n;const r=t[e.index];if(nn(r))n=r;else{let i;if(8&e.type)i=Y(r);else{const s=t[De];i=s.createComment("");const a=J(e,t);wi(s,Dl(s,a),i,function Ew(e,t){return e.nextSibling(t)}(s,a),!1)}t[e.index]=n=xm(r,t,i,e),kl(t,n)}return new By(n,e,t)}class dh{constructor(t){this.queryList=t,this.matches=null}clone(){return new dh(this.queryList)}setDirty(){this.queryList.setDirty()}}class hh{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){const a=n.getByIndex(s);i.push(this.queries[a.indexInDeclarationView].clone())}return new hh(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==Wy(t,n).matches&&this.queries[n].setDirty()}}class Uy{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class fh{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,null!==n?n.push(s):n=[s])}return null!==n?new fh(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ph{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new ph(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(t,n,MM(n,s)),this.matchTNodeWithReadOption(t,n,gl(n,t,s,!1,!1))}else r===Sr?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,gl(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Xn||i===On||i===Sr&&4&n.type)this.addMatch(n.index,-2);else{const s=gl(n,t,i,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function MM(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function AM(e,t,n,r){return-1===n?function TM(e,t){return 11&e.type?gs(e,t):4&e.type?Xl(e,t):null}(t,e):-2===n?function xM(e,t,n){return n===Xn?gs(t,e):n===Sr?Xl(t,e):n===On?Hy(t,e):void 0}(e,t,r):Ci(e,e[X],n,t)}function $y(e,t,n,r){const i=t[vn].queries[r];if(null===i.matches){const s=e.data,a=n.matches,u=[];for(let h=0;h<a.length;h+=2){const g=a[h];u.push(g<0?null:AM(t,s[g],a[h+1],n.metadata.read))}i.matches=u}return i.matches}function gh(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const a=$y(e,t,i,n);for(let u=0;u<s.length;u+=2){const h=s[u];if(h>0)r.push(a[u/2]);else{const g=s[u+1],y=t[-h];for(let D=It;D<y.length;D++){const S=y[D];S[mi]===S[Qe]&&gh(S[X],S,g,r)}if(null!==y[Vr]){const D=y[Vr];for(let S=0;S<D.length;S++){const T=D[S];gh(T[X],T,g,r)}}}}}return r}function na(e){const t=L(),n=Fe(),r=Ep();Ec(r+1);const i=Wy(n,r);if(e.dirty&&function Nt(e){return 4==(4&e[ye])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?gh(n,t,r,[]):$y(n,t,i,r);e.reset(s,gS),e.notifyOnChanges()}return!0}return!1}function Ql(e,t,n,r){const i=Fe();if(i.firstCreatePass){const s=Tt();zy(i,new Uy(t,n,r),s.index),function PM(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Gy(i,L(),n)}function ra(){return function RM(e,t){return e[vn].queries[t].queryList}(L(),Ep())}function Gy(e,t,n){const r=new ta(4==(4&n));bm(e,t,r,r.destroy),null===t[vn]&&(t[vn]=new hh),t[vn].queries.push(new dh(r))}function zy(e,t,n){null===e.queries&&(e.queries=new fh),e.queries.track(new ph(t,n))}function Wy(e,t){return e.queries.getByIndex(t)}function Jl(...e){}const eu=new pe("Application Initializer");let tu=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Jl,this.reject=Jl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if($l(s))n.push(s);else if(tv(s)){const a=new Promise((u,h)=>{s.subscribe({complete:u,error:h})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(le(eu,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const sa=new pe("AppId",{providedIn:"root",factory:function c_(){return`${Dh()}${Dh()}${Dh()}`}});function Dh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const d_=new pe("Platform Initializer"),h_=new pe("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let JM=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const br=new pe("LocaleId",{providedIn:"root",factory:()=>Ae(br,re.Optional|re.SkipSelf)||function e1(){return typeof $localize<"u"&&$localize.locale||Ps}()});class n1{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let f_=(()=>{class e{compileModuleSync(n){return new ah(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=_r(je(n).declarations).reduce((a,u)=>{const h=Ue(u);return h&&a.push(new Go(h)),a},[]);return new n1(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const s1=(()=>Promise.resolve(0))();function wh(e){typeof Zone>"u"?s1.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class it{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _e(!1),this.onMicrotaskEmpty=new _e(!1),this.onStable=new _e(!1),this.onError=new _e(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function o1(){let e=We.requestAnimationFrame,t=We.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function u1(e){const t=()=>{!function l1(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(We,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,bh(e),e.isCheckStableRunning=!0,Sh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),bh(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,a,u)=>{try{return m_(e),n.invokeTask(i,s,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),v_(e)}},onInvoke:(n,r,i,s,a,u,h)=>{try{return m_(e),n.invoke(i,s,a,u,h)}finally{e.shouldCoalesceRunChangeDetection&&t(),v_(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,bh(e),Sh(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new W(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,t,a1,Jl,Jl);try{return s.runTask(a,n,r)}finally{s.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const a1={};function Sh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function bh(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function m_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function v_(e){e._nesting--,Sh(e)}class c1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _e,this.onMicrotaskEmpty=new _e,this.onStable=new _e,this.onError=new _e}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const y_=new pe(""),nu=new pe("");let Mh,Eh=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mh||(function d1(e){Mh=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),wh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(le(it),le(Ih),le(nu))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),Ih=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Mh?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Er=!1;let qr=null;const __=new pe("AllowMultipleToken"),Th=new pe("PlatformDestroyListeners"),C_=new pe("appBootstrapListener");class D_{constructor(t,n){this.name=t,this.token=n}}function S_(e,t,n=[]){const r=`Platform: ${t}`,i=new pe(r);return(s=[])=>{let a=Ah();if(!a||a.injector.get(__,!1)){const u=[...n,...s,{provide:i,useValue:!0}];e?e(u):function p1(e){if(qr&&!qr.get(__,!1))throw new W(400,!1);qr=e;const t=e.get(E_);(function w_(e){const t=e.get(d_,null);t&&t.forEach(n=>n())})(e)}(function b_(e=[],t){return Cr.create({name:t,providers:[{provide:md,useValue:"platform"},{provide:Th,useValue:new Set([()=>qr=null])},...e]})}(u,r))}return function m1(e){const t=Ah();if(!t)throw new W(401,!1);return t}()}}function Ah(){return qr?.get(E_)??null}let E_=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function M_(e,t){let n;return n="noop"===e?new c1:("zone.js"===e?void 0:e)||new it(t),n}(r?.ngZone,function I_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:it,useValue:i}];return i.run(()=>{const a=Cr.create({providers:s,parent:this.injector,name:n.moduleType.name}),u=n.create(a),h=u.injector.get(ms,null);if(!h)throw new W(402,!1);return i.runOutsideAngular(()=>{const g=i.onError.subscribe({next:y=>{h.handleError(y)}});u.onDestroy(()=>{iu(this._modules,u),g.unsubscribe()})}),function T_(e,t,n){try{const r=n();return $l(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(h,i,()=>{const g=u.injector.get(tu);return g.runInitializers(),g.donePromise.then(()=>(function Zv(e){Pt(e,"Expected localeId to be defined"),"string"==typeof e&&(Qv=e.toLowerCase().replace(/_/g,"-"))}(u.injector.get(br,Ps)||Ps),this._moduleDoBootstrap(u),u))})})}bootstrapModule(n,r=[]){const i=A_({},r);return function h1(e,t,n){const r=new ah(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(ru);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new W(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Th,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(le(Cr))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function A_(e,t){return Array.isArray(t)?t.reduce(A_,e):{...e,...t}}let ru=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new st(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new st(u=>{let h;this._zone.runOutsideAngular(()=>{h=this._zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),wh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const g=this._zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{h.unsubscribe(),g.unsubscribe()}});this.isStable=function sc(...e){const t=En(e),n=function ic(e,t){return"number"==typeof or(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?jt(r[0]):sr(n)(Ze(r,t)):Jt}(s,a.pipe(function oc(e={}){const{connector:t=(()=>new M),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let a,u,h,g=0,y=!1,D=!1;const S=()=>{u?.unsubscribe(),u=void 0},T=()=>{S(),a=h=void 0,y=D=!1},R=()=>{const N=a;T(),N?.unsubscribe()};return ct((N,k)=>{g++,!D&&!y&&S();const U=h=h??t();k.add(()=>{g--,0===g&&!D&&!y&&(u=di(R,i))}),U.subscribe(k),!a&&g>0&&(a=new Bt({next:Z=>U.next(Z),error:Z=>{D=!0,S(),u=di(T,n,Z),U.error(Z)},complete:()=>{y=!0,S(),u=di(T,r),U.complete()}}),jt(N).subscribe(a))})(s)}}()))}bootstrap(n,r){const i=n instanceof Jg;if(!this._injector.get(tu).done){!i&&function hr(e){const t=Ue(e)||mt(e)||Et(e);return null!==t&&t.standalone}(n);throw new W(405,Er)}let a;a=i?n:this._injector.get(Uo).resolveComponentFactory(n),this.componentTypes.push(a.componentType);const u=function f1(e){return e.isBoundToModule}(a)?void 0:this._injector.get(Os),g=a.create(Cr.NULL,[],r||a.selector,u),y=g.location.nativeElement,D=g.injector.get(y_,null);return D?.registerApplication(y),g.onDestroy(()=>{this.detachView(g.hostView),iu(this.components,g),D?.unregisterApplication(y)}),this._loadComponent(g),g}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;iu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(C_,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>iu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(le(it),le(yr),le(ms))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function iu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let xh=(()=>{class e{}return e.__NG_ELEMENT_ID__=y1,e})();function y1(e){return function _1(e,t,n){if(yi(e)&&!n){const r=be(e.index,t);return new Vo(r,r)}return 47&e.type?new Vo(t[wt],t):null}(Tt(),L(),16==(16&e))}class N_{constructor(){}supports(t){return jl(t)}create(t){return new E1(t)}}const b1=(e,t)=>t;class E1{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||b1}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const a=!r||n&&n.currentIndex<F_(r,i,s)?n:r,u=F_(a,i,s),h=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,null==a.previousIndex)i++;else{s||(s=[]);const g=u-i,y=h-i;if(g!=y){for(let S=0;S<g;S++){const T=S<s.length?s[S]:s[S]=0,R=T+S;y<=R&&R<g&&(s[S]=T+1)}s[a.previousIndex]=y-g}}u!==h&&t(a,u,h)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!jl(t))throw new W(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,a,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)s=t[u],a=this._trackByFn(u,s),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,s,a,u)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,a,u),r=!0),n=n._next}else i=0,function Qb(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,u=>{a=this._trackByFn(i,u),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,u,a,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)):(n=this._mismatch(n,u,a,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new I1(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new k_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new k_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class I1{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class k_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new M1,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function F_(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function B_(){return new au([new N_])}let au=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||B_()),deps:[[e,new Po,new Ro]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new W(901,!1)}}return e.\u0275prov=de({token:e,providedIn:"root",factory:B_}),e})();const P1=S_(null,"core",[]);let O1=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(le(ru))},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({}),e})(),Fh=null;function Ai(){return Fh}class F1{}const Qt=new pe("DocumentToken");let Lh=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(){return function L1(){return le(H_)}()},providedIn:"platform"}),e})();const B1=new pe("Location Initialized");let H_=(()=>{class e extends Lh{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ai().getBaseHref(this._doc)}onPopState(n){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){U_()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){U_()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(le(Qt))},e.\u0275prov=de({token:e,factory:function(){return function j1(){return new H_(le(Qt))}()},providedIn:"platform"}),e})();function U_(){return!!window.history.pushState}function Bh(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function $_(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Ir(e){return e&&"?"!==e[0]?"?"+e:e}let xi=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(){return Ae(G_)},providedIn:"root"}),e})();const V_=new pe("appBaseHref");let G_=(()=>{class e extends xi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ae(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Bh(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const a=this.prepareExternalUrl(i+Ir(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){const a=this.prepareExternalUrl(i+Ir(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(le(Lh),le(V_,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),H1=(()=>{class e extends xi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Bh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let a=this.prepareExternalUrl(i+Ir(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){let a=this.prepareExternalUrl(i+Ir(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(le(Lh),le(V_,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),jh=(()=>{class e{constructor(n){this._subject=new _e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function V1(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}($_(z_(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ir(r))}normalize(n){return e.stripTrailingSlash(function $1(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,z_(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ir(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=Ir,e.joinWithSlash=Bh,e.stripTrailingSlash=$_,e.\u0275fac=function(n){return new(n||e)(le(xi))},e.\u0275prov=de({token:e,factory:function(){return function U1(){return new jh(le(xi))}()},providedIn:"root"}),e})();function z_(e){return e.replace(/\/index.html$/,"")}class AT{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let r0=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new AT(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const u=r.get(s);r.move(u,a),s0(u,i)}});for(let i=0,s=r.length;i<s;i++){const u=r.get(i).context;u.index=i,u.count=s,u.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{s0(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(ue(On),ue(Sr),ue(au))},e.\u0275dir=bt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function s0(e,t){e.context.$implicit=t.item}let u0=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({}),e})();let oA=(()=>{class e{}return e.\u0275prov=de({token:e,providedIn:"root",factory:()=>new aA(le(Qt),window)}),e})();class aA{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function lA(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=d0(this.window.history)||d0(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function d0(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class FA extends F1{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class nf extends FA{static makeCurrent(){!function k1(e){Fh||(Fh=e)}(new nf)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function LA(){return ca=ca||document.querySelector("base"),ca?ca.getAttribute("href"):null}();return null==n?null:function BA(e){_u=_u||document.createElement("a"),_u.setAttribute("href",e);const t=_u.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function IT(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let _u,ca=null;const m0=new pe("TRANSITION_ID"),HA=[{provide:eu,useFactory:function jA(e,t,n){return()=>{n.get(tu).donePromise.then(()=>{const r=Ai(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[m0,Qt,Cr],multi:!0}];let $A=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const Cu=new pe("EventManagerPlugins");let Du=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(le(Cu),le(it))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class v0{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=Ai().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let y0=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let s=i.get(n)??0;return s+=r,s>0?i.set(n,s):i.delete(n),s}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),da=(()=>{class e extends y0{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(s=>s.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(le(Qt))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const rf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sf=/%COMP%/g,D0=new pe("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function w0(e,t){return t.flat(100).map(n=>n.replace(sf,e))}function S0(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let af=(()=>{class e{constructor(n,r,i,s){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new lf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof I0?i.applyToHost(n):i instanceof uf&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const a=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestory;switch(r.encapsulation){case pn.Emulated:s=new I0(a,u,r,this.appId,h);break;case pn.ShadowDom:return new KA(a,u,n,r);default:s=new uf(a,u,r,h)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(le(Du),le(da),le(sa),le(D0))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();class lf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(rf[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(E0(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(E0(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=rf[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=rf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Yt.DashCase|Yt.Important)?t.style.setProperty(n,r,i&Yt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Yt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,S0(r)):this.eventManager.addEventListener(t,n,S0(r))}}function E0(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class KA extends lf{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=w0(i.id,i.styles);for(const a of s){const u=document.createElement("style");u.textContent=a,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uf extends lf{constructor(t,n,r,i,s=r.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=w0(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class I0 extends uf{constructor(t,n,r,i,s){const a=i+"-"+r.id;super(t,n,r,s,a),this.contentAttr=function WA(e){return"_ngcontent-%COMP%".replace(sf,e)}(a),this.hostAttr=function qA(e){return"_nghost-%COMP%".replace(sf,e)}(a)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let XA=(()=>{class e extends v0{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(le(Qt))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const M0=["alt","control","meta","shift"],QA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let JA=(()=>{class e extends v0{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(n,s.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),M0.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),a+=g+".")}),a+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=a,h}static matchEventFullKeyCode(n,r){let i=QA[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),M0.forEach(a=>{a!==i&&(0,ZA[a])(n)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(le(Qt))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const rx=S_(P1,"browser",[{provide:h_,useValue:"browser"},{provide:d_,useValue:function ex(){nf.makeCurrent()},multi:!0},{provide:Qt,useFactory:function nx(){return function Ow(e){od=e}(document),document},deps:[]}]),x0=new pe(""),R0=[{provide:nu,useClass:class UA{addToWindow(t){We.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},We.getAllAngularTestabilities=()=>t.getAllTestabilities(),We.getAllAngularRootElements=()=>t.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const i=We.getAllAngularTestabilities();let s=i.length,a=!1;const u=function(h){a=a||h,s--,0==s&&r(a)};i.forEach(function(h){h.whenStable(u)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Ai().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:y_,useClass:Eh,deps:[it,Ih,nu]},{provide:Eh,useClass:Eh,deps:[it,Ih,nu]}],P0=[{provide:md,useValue:"root"},{provide:ms,useFactory:function tx(){return new ms},deps:[]},{provide:Cu,useClass:XA,multi:!0,deps:[Qt,it,h_]},{provide:Cu,useClass:JA,multi:!0,deps:[Qt]},{provide:af,useClass:af,deps:[Du,da,sa,D0]},{provide:tm,useExisting:af},{provide:y0,useExisting:da},{provide:da,useClass:da,deps:[Qt]},{provide:Du,useClass:Du,deps:[Cu,it]},{provide:class uA{},useClass:$A,deps:[]},[]];let ix=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:sa,useValue:n.appId},{provide:m0,useExisting:sa},HA]}}}return e.\u0275fac=function(n){return new(n||e)(le(x0,12))},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({providers:[...P0,...R0],imports:[u0,O1]}),e})(),O0=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(le(Qt))},e.\u0275prov=de({token:e,factory:function(n){let r=null;return r=n?new n:function ox(){return new O0(le(Qt))}(),r},providedIn:"root"}),e})();function ce(...e){return Ze(e,En(e))}typeof window<"u"&&window;class Ln extends M{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const wu=Ys(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hx}=Array,{getPrototypeOf:fx,prototype:px,keys:gx}=Object;const{isArray:yx}=Array;function F0(...e){const t=En(e),n=function Rr(e){return ze(or(e))?e.pop():void 0}(e),{args:r,keys:i}=function mx(e){if(1===e.length){const t=e[0];if(hx(t))return{args:t,keys:null};if(function vx(e){return e&&"object"==typeof e&&fx(e)===px}(t)){const n=gx(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Ze([],t);const s=new st(function wx(e,t,n=zt){return r=>{L0(t,()=>{const{length:i}=e,s=new Array(i);let a=i,u=i;for(let h=0;h<i;h++)L0(t,()=>{const g=Ze(e[h],t);let y=!1;g.subscribe(dt(r,D=>{s[h]=D,y||(y=!0,u--),u||r.next(n(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,t,i?a=>function Dx(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,a):zt));return n?s.pipe(function Cx(e){return Te(t=>function _x(e,t){return yx(t)?e(...t):e(t)}(e,t))}(n)):s}function L0(e,t,n){e?bn(n,e,t):t()}function hf(...e){return function Sx(){return sr(1)}()(Ze(e,En(e)))}function B0(e){return new st(t=>{jt(e()).subscribe(t)})}function ha(e,t){const n=ze(e)?e:()=>e,r=i=>i.error(n());return new st(t?i=>t.schedule(r,0,i):r)}function ff(){return ct((e,t)=>{let n=null;e._refCount++;const r=dt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class j0 extends st{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,to(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Re;const n=this.getSubject();t.add(this.source.subscribe(dt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Re.EMPTY)}return t}refCount(){return ff()(this)}}function er(e,t){return ct((n,r)=>{let i=null,s=0,a=!1;const u=()=>a&&!i&&r.complete();n.subscribe(dt(r,h=>{i?.unsubscribe();let g=0;const y=s++;jt(e(h,y)).subscribe(i=dt(r,D=>r.next(t?t(h,D,y,g++):D),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function fa(e){return e<=0?()=>Jt:ct((t,n)=>{let r=0;t.subscribe(dt(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Kr(e,t){return ct((n,r)=>{let i=0;n.subscribe(dt(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Su(e){return ct((t,n)=>{let r=!1;t.subscribe(dt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function H0(e=Ex){return ct((t,n)=>{let r=!1;t.subscribe(dt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function Ex(){return new wu}function Xr(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Kr((i,s)=>e(i,s,r)):zt,fa(1),n?Su(t):H0(()=>new wu))}function Ri(e,t){return ze(t)?ht(e,t,1):ht(e,1)}function Lt(e,t,n){const r=ze(e)||t||n?{next:e,error:t,complete:n}:e;return r?ct((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let u=!0;i.subscribe(dt(s,h=>{var g;null===(g=r.next)||void 0===g||g.call(r,h),s.next(h)},()=>{var h;u=!1,null===(h=r.complete)||void 0===h||h.call(r),s.complete()},h=>{var g;u=!1,null===(g=r.error)||void 0===g||g.call(r,h),s.error(h)},()=>{var h,g;u&&(null===(h=r.unsubscribe)||void 0===h||h.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):zt}function Qr(e){return ct((t,n)=>{let s,r=null,i=!1;r=t.subscribe(dt(n,void 0,void 0,a=>{s=jt(e(a,Qr(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function U0(e,t){return ct(function Ix(e,t,n,r,i){return(s,a)=>{let u=n,h=t,g=0;s.subscribe(dt(a,y=>{const D=g++;h=u?e(h,y,D):(u=!0,y),r&&a.next(h)},i&&(()=>{u&&a.next(h),a.complete()})))}}(e,t,arguments.length>=2,!0))}function pf(e){return e<=0?()=>Jt:ct((t,n)=>{let r=[];t.subscribe(dt(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $0(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Kr((i,s)=>e(i,s,r)):zt,pf(1),n?Su(t):H0(()=>new wu))}function gf(e){return ct((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const Ce="primary",pa=Symbol("RouteTitle");class Ax{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Fs(e){return new Ax(e)}function xx(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],u=e[s];if(a.startsWith(":"))i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function tr(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!V0(e[i],t[i]))return!1;return!0}function V0(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}return e===t}function G0(e){return Array.prototype.concat.apply([],e)}function z0(e){return e.length>0?e[e.length-1]:null}function At(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Zr(e){return tv(e)?e:$l(e)?Ze(Promise.resolve(e)):ce(e)}const bu=!1,Px={exact:function Y0(e,t,n){if(!Pi(e.segments,t.segments)||!Eu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!Y0(e.children[r],t.children[r],n))return!1;return!0},subset:K0},W0={exact:function Ox(e,t){return tr(e,t)},subset:function Nx(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>V0(e[n],t[n]))},ignored:()=>!0};function q0(e,t,n){return Px[n.paths](e.root,t.root,n.matrixParams)&&W0[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function K0(e,t,n){return X0(e,t,t.segments,n)}function X0(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!Pi(i,n)||t.hasChildren()||!Eu(i,n,r))}if(e.segments.length===n.length){if(!Pi(e.segments,n)||!Eu(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!K0(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(Pi(e.segments,i)&&Eu(e.segments,i,r)&&e.children[Ce])&&X0(e.children[Ce],t,s,r)}}function Eu(e,t,n){return t.every((r,i)=>W0[n](e[i].parameters,r.parameters))}class Jr{constructor(t=new Me([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return Lx.serialize(this)}}class Me{constructor(t,n){this.segments=t,this.children=n,this.parent=null,At(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iu(this)}}class ga{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Fs(this.parameters)),this._parameterMap}toString(){return J0(this)}}function Pi(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let ma=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(){return new mf},providedIn:"root"}),e})();class mf{parse(t){const n=new Wx(t);return new Jr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${va(t.root,!0)}`,r=function Hx(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Mu(n)}=${Mu(i)}`).join("&"):`${Mu(n)}=${Mu(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function Bx(e){return encodeURI(e)}(t.fragment)}`:""}`}}const Lx=new mf;function Iu(e){return e.segments.map(t=>J0(t)).join("/")}function va(e,t){if(!e.hasChildren())return Iu(e);if(t){const n=e.children[Ce]?va(e.children[Ce],!1):"",r=[];return At(e.children,(i,s)=>{s!==Ce&&r.push(`${s}:${va(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Fx(e,t){let n=[];return At(e.children,(r,i)=>{i===Ce&&(n=n.concat(t(r,i)))}),At(e.children,(r,i)=>{i!==Ce&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===Ce?[va(e.children[Ce],!1)]:[`${i}:${va(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Ce]?`${Iu(e)}/${n[0]}`:`${Iu(e)}/(${n.join("//")})`}}function Q0(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mu(e){return Q0(e).replace(/%3B/gi,";")}function vf(e){return Q0(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tu(e){return decodeURIComponent(e)}function Z0(e){return Tu(e.replace(/\+/g,"%20"))}function J0(e){return`${vf(e.path)}${function jx(e){return Object.keys(e).map(t=>`;${vf(t)}=${vf(e[t])}`).join("")}(e.parameters)}`}const Ux=/^[^\/()?;=#]+/;function Au(e){const t=e.match(Ux);return t?t[0]:""}const $x=/^[^=?&#]+/,Gx=/^[^&#]+/;class Wx{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Ce]=new Me(t,n)),r}parseSegment(){const t=Au(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new W(4009,bu);return this.capture(t),new ga(Tu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Au(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Au(this.remaining);i&&(r=i,this.capture(r))}t[Tu(n)]=Tu(r)}parseQueryParam(t){const n=function Vx(e){const t=e.match($x);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function zx(e){const t=e.match(Gx);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=Z0(n),s=Z0(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(s)}else t[i]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Au(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new W(4010,bu);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Ce);const a=this.parseChildren();n[s]=1===Object.keys(a).length?a[Ce]:new Me([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new W(4011,bu)}}function yf(e){return e.segments.length>0?new Me([],{[Ce]:e}):e}function xu(e){const t={};for(const r of Object.keys(e.children)){const s=xu(e.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function qx(e){if(1===e.numberOfChildren&&e.children[Ce]){const t=e.children[Ce];return new Me(e.segments.concat(t.segments),t.children)}return e}(new Me(e.segments,t))}function Oi(e){return e instanceof Jr}const _f=!1;function Yx(e,t,n,r,i){if(0===n.length)return Ls(t.root,t.root,t.root,r,i);const s=function iC(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new rC(!0,0,e);let t=0,n=!1;const r=e.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return At(s.outlets,(h,g)=>{u[g]="string"==typeof h?h.split("/"):h}),[...i,{outlets:u}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((u,h)=>{0==h&&"."===u||(0==h&&""===u?n=!0:".."===u?t++:""!=u&&i.push(u))}),i):[...i,s]},[]);return new rC(n,t,r)}(n);return s.toRoot()?Ls(t.root,t.root,new Me([],{}),r,i):function a(h){const g=function Xx(e,t,n,r){if(e.isAbsolute)return new Bs(t.root,!0,0);if(-1===r)return new Bs(n,n===t.root,0);return function sC(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,_f&&"Invalid number of '../'");i=r.segments.length}return new Bs(r,!1,i-s)}(n,r+(ya(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,t,e.snapshot?._urlSegment,h),y=g.processChildren?js(g.segmentGroup,g.index,s.commands):Cf(g.segmentGroup,g.index,s.commands);return Ls(t.root,g.segmentGroup,y,r,i)}(e.snapshot?._lastPathIndex)}function ya(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function _a(e){return"object"==typeof e&&null!=e&&e.outlets}function Ls(e,t,n,r,i){let a,s={};r&&At(r,(h,g)=>{s[g]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),a=e===t?n:nC(e,t,n);const u=yf(xu(a));return new Jr(u,s,i)}function nC(e,t,n){const r={};return At(e.children,(i,s)=>{r[s]=i===t?n:nC(i,t,n)}),new Me(e.segments,r)}class rC{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&ya(r[0]))throw new W(4003,_f&&"Root segment cannot have matrix parameters");const i=r.find(_a);if(i&&i!==z0(r))throw new W(4004,_f&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bs{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function Cf(e,t,n){if(e||(e=new Me([],{})),0===e.segments.length&&e.hasChildren())return js(e,t,n);const r=function Zx(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const a=e.segments[i],u=n[r];if(_a(u))break;const h=`${u}`,g=r<n.length-1?n[r+1]:null;if(i>0&&void 0===h)break;if(h&&g&&"object"==typeof g&&void 0===g.outlets){if(!aC(h,g,a))return s;r+=2}else{if(!aC(h,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new Me(e.segments.slice(0,r.pathIndex),{});return s.children[Ce]=new Me(e.segments.slice(r.pathIndex),e.children),js(s,0,i)}return r.match&&0===i.length?new Me(e.segments,{}):r.match&&!e.hasChildren()?Df(e,t,n):r.match?js(e,0,i):Df(e,t,n)}function js(e,t,n){if(0===n.length)return new Me(e.segments,{});{const r=function Qx(e){return _a(e[0])?e[0].outlets:{[Ce]:e}}(n),i={};return!r[Ce]&&e.children[Ce]&&1===e.numberOfChildren&&0===e.children[Ce].segments.length?js(e.children[Ce],t,n):(At(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=Cf(e.children[a],t,s))}),At(e.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new Me(e.segments,i))}}function Df(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(_a(s)){const h=Jx(s.outlets);return new Me(r,h)}if(0===i&&ya(n[0])){r.push(new ga(e.segments[t].path,oC(n[0]))),i++;continue}const a=_a(s)?s.outlets[Ce]:`${s}`,u=i<n.length-1?n[i+1]:null;a&&u&&ya(u)?(r.push(new ga(a,oC(u))),i+=2):(r.push(new ga(a,{})),i++)}return new Me(r,{})}function Jx(e){const t={};return At(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=Df(new Me([],{}),0,n))}),t}function oC(e){const t={};return At(e,(n,r)=>t[r]=`${n}`),t}function aC(e,t,n){return e==n.path&&tr(t,n.parameters)}const Ca="imperative";class nr{constructor(t,n){this.id=t,this.url=n}}class wf extends nr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends nr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ru extends nr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pu extends nr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class Sf extends nr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eR extends nr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tR extends nr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nR extends nr{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rR extends nr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iR extends nr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sR{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oR{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aR{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lR{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uR{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cR{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lC{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let fR=(()=>{class e{createUrlTree(n,r,i,s,a,u){return Yx(n||r.root,i,s,a,u)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})(),gR=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(t){return fR.\u0275fac(t)},providedIn:"root"}),e})();class uC{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=bf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=bf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Ef(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Ef(t,this._root).map(n=>n.value)}}function bf(e,t){if(e===t.value)return t;for(const n of t.children){const r=bf(e,n);if(r)return r}return null}function Ef(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Ef(e,n);if(r.length)return r.unshift(t),r}return[]}class Tr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Hs(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class cC extends uC{constructor(t,n){super(t),this.snapshot=n,If(this,t)}toString(){return this.snapshot.toString()}}function dC(e,t){const n=function mR(e,t){const a=new Ou([],{},{},"",{},Ce,t,null,e.root,-1,{});return new fC("",new Tr(a,[]))}(e,t),r=new Ln([new ga("",{})]),i=new Ln({}),s=new Ln({}),a=new Ln({}),u=new Ln(""),h=new Us(r,i,a,u,s,Ce,t,n.root);return h.snapshot=n.root,new cC(new Tr(h,[]),n)}class Us{constructor(t,n,r,i,s,a,u,h){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=u,this.title=this.data?.pipe(Te(g=>g[pa]))??ce(void 0),this._futureSnapshot=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Te(t=>Fs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Te(t=>Fs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hC(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function vR(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ou{get title(){return this.data?.[pa]}constructor(t,n,r,i,s,a,u,h,g,y,D){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=u,this.routeConfig=h,this._urlSegment=g,this._lastPathIndex=y,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fC extends uC{constructor(t,n){super(n),this.url=t,If(this,n)}toString(){return pC(this._root)}}function If(e,t){t.value._routerState=e,t.children.forEach(n=>If(e,n))}function pC(e){const t=e.children.length>0?` { ${e.children.map(pC).join(", ")} } `:"";return`${e.value}${t}`}function Mf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,tr(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),tr(t.params,n.params)||e.params.next(n.params),function Rx(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!tr(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),tr(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Tf(e,t){const n=tr(e.params,t.params)&&function kx(e,t){return Pi(e,t)&&e.every((n,r)=>tr(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||Tf(e.parent,t.parent))}function Da(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function _R(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Da(e,r,i);return Da(e,r)})}(e,t,n);return new Tr(r,i)}{if(e.shouldAttach(t.value)){const s=e.retrieve(t.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(u=>Da(e,u)),a}}const r=function CR(e){return new Us(new Ln(e.url),new Ln(e.params),new Ln(e.queryParams),new Ln(e.fragment),new Ln(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(s=>Da(e,s));return new Tr(r,i)}}const Af="ngNavigationCancelingError";function gC(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=Oi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=mC(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function mC(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Af]=!0,r.cancellationCode=t,n&&(r.url=n),r}function vC(e){return yC(e)&&Oi(e.url)}function yC(e){return e&&e[Af]}class DR{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wa,this.attachRef=null}}let wa=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new DR,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Nu=!1;let _C=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ce,this.activateEvents=new _e,this.deactivateEvents=new _e,this.attachEvents=new _e,this.detachEvents=new _e,this.parentContexts=Ae(wa),this.location=Ae(On),this.changeDetector=Ae(xh),this.environmentInjector=Ae(yr)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,Nu);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,Nu);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,Nu);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,Nu);this._activatedRoute=n;const i=this.location,a=n.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,h=new wR(n,u,i.injector);if(r&&function SR(e){return!!e.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(a);this.activated=i.createComponent(g,i.length,h)}else this.activated=i.createComponent(a,{index:i.length,injector:h,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=bt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E]}),e})();class wR{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Us?this.route:t===wa?this.childContexts:this.parent.get(t,n)}}let xf=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=dr({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ey],decls:1,vars:0,template:function(n,r){1&n&&Ei(0,"router-outlet")},dependencies:[_C],encapsulation:2}),e})();function CC(e,t){return e.providers&&!e._injector&&(e._injector=Kl(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Pf(e){const t=e.children&&e.children.map(Pf),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ce&&(n.component=xf),n}function wn(e){return e.outlet||Ce}function DC(e,t){const n=e.filter(r=>wn(r)===t);return n.push(...e.filter(r=>wn(r)!==t)),n}function Sa(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class TR{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Mf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Hs(n);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),At(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Hs(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:u})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Hs(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=Hs(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cR(s.value.snapshot))}),t.children.length&&this.forwardEvent(new lR(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(Mf(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),Mf(u.route.value),this.activateChildRoutes(t,null,a.children)}else{const u=Sa(i.snapshot),h=u?.get(Uo)??null;a.attachRef=null,a.route=i,a.resolver=h,a.injector=u,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}class wC{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ku{constructor(t,n){this.component=t,this.route=n}}function AR(e,t,n){const r=e._root;return ba(r,t?t._root:null,n,[r.value])}function $s(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function Xa(e){return null!==Yi(e)}(e)?t.get(e):e:r}function ba(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Hs(t);return e.children.forEach(a=>{(function RR(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const h=function PR(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Pi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Pi(e.url,t.url)||!tr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tf(e,t)||!tr(e.queryParams,t.queryParams);default:return!Tf(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);h?i.canActivateChecks.push(new wC(r)):(s.data=a.data,s._resolvedData=a._resolvedData),ba(e,t,s.component?u?u.children:null:n,r,i),h&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new ku(u.outlet.component,a))}else a&&Ea(t,u,i),i.canActivateChecks.push(new wC(r)),ba(e,null,s.component?u?u.children:null:n,r,i)})(a,s[a.value.outlet],n,r.concat([a.value]),i),delete s[a.value.outlet]}),At(s,(a,u)=>Ea(a,n.getContext(u),i)),i}function Ea(e,t,n){const r=Hs(e),i=e.value;At(r,(s,a)=>{Ea(s,i.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new ku(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Ia(e){return"function"==typeof e}function Of(e){return e instanceof wu||"EmptyError"===e?.name}const Fu=Symbol("INITIAL_VALUE");function Vs(){return er(e=>F0(e.map(t=>t.pipe(fa(1),function bx(...e){const t=En(e);return ct((n,r)=>{(t?hf(e,n,t):hf(e,n)).subscribe(r)})}(Fu)))).pipe(Te(t=>{for(const n of t)if(!0!==n){if(n===Fu)return Fu;if(!1===n||n instanceof Jr)return n}return!0}),Kr(t=>t!==Fu),fa(1)))}function SC(e){return function Na(...e){return Wu(e)}(Lt(t=>{if(Oi(t))throw gC(0,t)}),Te(t=>!0===t))}const Nf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bC(e,t,n,r,i){const s=kf(e,t,n);return s.matched?function KR(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?ce(i.map(a=>{const u=$s(a,e);return Zr(function BR(e){return e&&Ia(e.canMatch)}(u)?u.canMatch(t,n):e.runInContext(()=>u(t,n)))})).pipe(Vs(),SC()):ce(!0)}(r=CC(t,r),t,n).pipe(Te(a=>!0===a?s:{...Nf})):ce(s)}function kf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Nf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||xx)(n,e,t);if(!i)return{...Nf};const s={};At(i.posParams,(u,h)=>{s[h]=u.path});const a=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Lu(e,t,n,r){if(n.length>0&&function ZR(e,t,n){return n.some(r=>Bu(e,t,r)&&wn(r)!==Ce)}(e,n,r)){const s=new Me(t,function QR(e,t,n,r){const i={};i[Ce]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&wn(s)!==Ce){const a=new Me([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,i[wn(s)]=a}return i}(e,t,r,new Me(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function JR(e,t,n){return n.some(r=>Bu(e,t,r))}(e,n,r)){const s=new Me(e.segments,function XR(e,t,n,r,i){const s={};for(const a of r)if(Bu(e,n,a)&&!i[wn(a)]){const u=new Me([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,s[wn(a)]=u}return{...i,...s}}(e,t,n,r,e.children));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const i=new Me(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function Bu(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function EC(e,t,n,r){return!!(wn(e)===r||r!==Ce&&Bu(t,n,e))&&("**"===e.path||kf(t,e,n).matched)}function IC(e,t,n){return 0===t.length&&!e.children[n]}const ju=!1;class Hu{constructor(t){this.segmentGroup=t||null}}class MC{constructor(t){this.urlTree=t}}function Ma(e){return ha(new Hu(e))}function TC(e){return ha(new MC(e))}class rP{constructor(t,n,r,i,s){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const t=Lu(this.urlTree.root,[],[],this.config).segmentGroup,n=new Me(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,Ce).pipe(Te(s=>this.createUrlTree(xu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qr(s=>{if(s instanceof MC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Hu?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Ce).pipe(Te(i=>this.createUrlTree(xu(i),t.queryParams,t.fragment))).pipe(Qr(i=>{throw i instanceof Hu?this.noMatchError(i):i}))}noMatchError(t){return new W(4002,ju)}createUrlTree(t,n,r){const i=yf(t);return new Jr(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(Te(s=>new Me([],s))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Ze(i).pipe(Ri(s=>{const a=r.children[s],u=DC(n,s);return this.expandSegmentGroup(t,u,a,s).pipe(Te(h=>({segment:h,outlet:s})))}),U0((s,a)=>(s[a.outlet]=a.segment,s),{}),$0())}expandSegment(t,n,r,i,s,a){return Ze(r).pipe(Ri(u=>this.expandSegmentAgainstRoute(t,n,r,u,i,s,a).pipe(Qr(g=>{if(g instanceof Hu)return ce(null);throw g}))),Xr(u=>!!u),Qr((u,h)=>{if(Of(u))return IC(n,i,s)?ce(new Me([],{})):Ma(n);throw u}))}expandSegmentAgainstRoute(t,n,r,i,s,a,u){return EC(i,n,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,s,a):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a):Ma(n):Ma(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?TC(s):this.lineralizeSegments(r,s).pipe(ht(a=>{const u=new Me(a,{});return this.expandSegment(t,u,n,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){const{matched:u,consumedSegments:h,remainingSegments:g,positionalParamSegments:y}=kf(n,i,s);if(!u)return Ma(n);const D=this.applyRedirectCommands(h,i.redirectTo,y);return i.redirectTo.startsWith("/")?TC(D):this.lineralizeSegments(i,D).pipe(ht(S=>this.expandSegment(t,n,r,S.concat(g),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,s){return"**"===r.path?(t=CC(r,t),r.loadChildren?(r._loadedRoutes?ce({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(Te(u=>(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,new Me(i,{})))):ce(new Me(i,{}))):bC(n,r,i,t).pipe(er(({matched:a,consumedSegments:u,remainingSegments:h})=>a?this.getChildConfig(t=r._injector??t,r,i).pipe(ht(y=>{const D=y.injector??t,S=y.routes,{segmentGroup:T,slicedSegments:R}=Lu(n,u,h,S),N=new Me(T.segments,T.children);if(0===R.length&&N.hasChildren())return this.expandChildren(D,S,N).pipe(Te(F=>new Me(u,F)));if(0===S.length&&0===R.length)return ce(new Me(u,{}));const k=wn(r)===s;return this.expandSegment(D,N,S,R,k?Ce:s,!0).pipe(Te(Z=>new Me(u.concat(Z.segments),Z.children)))})):Ma(n)))}getChildConfig(t,n,r){return n.children?ce({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ce({routes:n._loadedRoutes,injector:n._loadedInjector}):function YR(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?ce(!0):ce(i.map(a=>{const u=$s(a,e);return Zr(function NR(e){return e&&Ia(e.canLoad)}(u)?u.canLoad(t,n):e.runInContext(()=>u(t,n)))})).pipe(Vs(),SC())}(t,n,r).pipe(ht(i=>i?this.configLoader.loadChildren(t,n).pipe(Lt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function tP(e){return ha(mC(ju,3))}())):ce({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ce(r);if(i.numberOfChildren>1||!i.children[Ce])return t.redirectTo,ha(new W(4e3,ju));i=i.children[Ce]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const s=this.createSegmentGroup(t,n.root,r,i);return new Jr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return At(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const u=i.substring(1);r[s]=n[u]}else r[s]=i}),r}createSegmentGroup(t,n,r,i){const s=this.createSegments(t,n.segments,r,i);let a={};return At(n.children,(u,h)=>{a[h]=this.createSegmentGroup(t,u,r,i)}),new Me(s,a)}createSegments(t,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new W(4001,ju);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class sP{}class lP{constructor(t,n,r,i,s,a,u){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=a,this.urlSerializer=u}recognize(){const t=Lu(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Ce).pipe(Te(n=>{if(null===n)return null;const r=new Ou([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ce,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Tr(r,n),s=new fC(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const n=t.value,r=hC(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return Ze(Object.keys(r.children)).pipe(Ri(i=>{const s=r.children[i],a=DC(n,i);return this.processSegmentGroup(t,a,s,i)}),U0((i,s)=>i&&s?(i.push(...s),i):null),function Mx(e,t=!1){return ct((n,r)=>{let i=0;n.subscribe(dt(r,s=>{const a=e(s,i++);(a||t)&&r.next(s),!a&&r.complete()}))})}(i=>null!==i),Su(null),$0(),Te(i=>{if(null===i)return null;const s=xC(i);return function uP(e){e.sort((t,n)=>t.value.outlet===Ce?-1:n.value.outlet===Ce?1:t.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(t,n,r,i,s){return Ze(n).pipe(Ri(a=>this.processSegmentAgainstRoute(a._injector??t,a,r,i,s)),Xr(a=>!!a),Qr(a=>{if(Of(a))return IC(r,i,s)?ce([]):ce(null);throw a}))}processSegmentAgainstRoute(t,n,r,i,s){if(n.redirectTo||!EC(n,r,i,s))return ce(null);let a;if("**"===n.path){const u=i.length>0?z0(i).parameters:{},h=PC(r)+i.length;a=ce({snapshot:new Ou(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OC(n),wn(n),n.component??n._loadedComponent??null,n,RC(r),h,NC(n)),consumedSegments:[],remainingSegments:[]})}else a=bC(r,n,i,t).pipe(Te(({matched:u,consumedSegments:h,remainingSegments:g,parameters:y})=>{if(!u)return null;const D=PC(r)+h.length;return{snapshot:new Ou(h,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OC(n),wn(n),n.component??n._loadedComponent??null,n,RC(r),D,NC(n)),consumedSegments:h,remainingSegments:g}}));return a.pipe(er(u=>{if(null===u)return ce(null);const{snapshot:h,consumedSegments:g,remainingSegments:y}=u;t=n._injector??t;const D=n._loadedInjector??t,S=function cP(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:T,slicedSegments:R}=Lu(r,g,y,S.filter(k=>void 0===k.redirectTo));if(0===R.length&&T.hasChildren())return this.processChildren(D,S,T).pipe(Te(k=>null===k?null:[new Tr(h,k)]));if(0===S.length&&0===R.length)return ce([new Tr(h,[])]);const N=wn(n)===s;return this.processSegment(D,S,T,R,N?Ce:s).pipe(Te(k=>null===k?null:[new Tr(h,k)]))}))}}function dP(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function xC(e){const t=[],n=new Set;for(const r of e){if(!dP(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=xC(r.children);t.push(new Tr(r.value,i))}return t.filter(r=>!n.has(r))}function RC(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function PC(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function OC(e){return e.data||{}}function NC(e){return e.resolve||{}}function kC(e){return"string"==typeof e.title||null===e.title}function Ff(e){return er(t=>{const n=e(t);return n?Ze(n).pipe(Te(()=>t)):ce(t)})}const Gs=new pe("ROUTES");let Lf=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ae(f_)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ce(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Zr(n.loadComponent()).pipe(Te(LC),Lt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),gf(()=>{this.componentLoaders.delete(n)})),i=new j0(r,()=>new M).pipe(ff());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Te(u=>{this.onLoadEndListener&&this.onLoadEndListener(r);let h,g,y=!1;Array.isArray(u)?g=u:(h=u.create(n).injector,g=G0(h.get(Gs,[],re.Self|re.Optional)));return{routes:g.map(Pf),injector:h}}),gf(()=>{this.childrenLoaders.delete(r)})),a=new j0(s,()=>new M).pipe(ff());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(n){return Zr(n()).pipe(Te(LC),ht(r=>r instanceof Sy||Array.isArray(r)?ce(r):Ze(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function LC(e){return function _P(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let $u=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new M,this.configLoader=Ae(Lf),this.environmentInjector=Ae(yr),this.urlSerializer=Ae(ma),this.rootContexts=Ae(wa),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new oR(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new sR(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new Ln({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ca,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kr(r=>0!==r.id),Te(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),er(r=>{let i=!1,s=!1;return ce(r).pipe(Lt(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),er(a=>{const u=n.browserUrlTree.toString(),h=!n.navigated||a.extractedUrl.toString()!==u||u!==n.currentUrlTree.toString();if(!h&&"reload"!==(a.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const y="";return this.events.next(new Pu(a.id,n.serializeUrl(r.rawUrl),y,0)),n.rawUrlTree=a.rawUrl,a.resolve(null),Jt}if(n.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return BC(a.source)&&(n.browserUrlTree=a.extractedUrl),ce(a).pipe(er(y=>{const D=this.transitions?.getValue();return this.events.next(new wf(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),D!==this.transitions?.getValue()?Jt:Promise.resolve(y)}),function iP(e,t,n,r){return er(i=>function nP(e,t,n,r,i){return new rP(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(Te(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),Lt(y=>{this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects},r.urlAfterRedirects=y.urlAfterRedirects}),function fP(e,t,n,r,i){return ht(s=>function aP(e,t,n,r,i,s,a="emptyOnly"){return new lP(e,t,n,r,i,a,s).recognize().pipe(er(u=>null===u?function oP(e){return new st(t=>t.error(e))}(new sP):ce(u)))}(e,t,n,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(Te(a=>({...s,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Lt(y=>{if(r.targetSnapshot=y.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!y.extras.skipLocationChange){const S=n.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl);n.setBrowserUrl(S,y)}n.browserUrlTree=y.urlAfterRedirects}const D=new eR(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(D)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:y,extractedUrl:D,source:S,restoredState:T,extras:R}=a,N=new wf(y,this.urlSerializer.serialize(D),S,T);this.events.next(N);const k=dC(D,this.rootComponentType).snapshot;return ce(r={...a,targetSnapshot:k,urlAfterRedirects:D,extras:{...R,skipLocationChange:!1,replaceUrl:!1}})}{const y="";return this.events.next(new Pu(a.id,n.serializeUrl(r.extractedUrl),y,1)),n.rawUrlTree=a.rawUrl,a.resolve(null),Jt}}),Lt(a=>{const u=new tR(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Te(a=>r={...a,guards:AR(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function HR(e,t){return ht(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?ce({...n,guardsResult:!0}):function UR(e,t,n,r){return Ze(e).pipe(ht(i=>function qR(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ce(s.map(u=>{const h=Sa(t)??i,g=$s(u,h);return Zr(function LR(e){return e&&Ia(e.canDeactivate)}(g)?g.canDeactivate(e,t,n,r):h.runInContext(()=>g(e,t,n,r))).pipe(Xr())})).pipe(Vs()):ce(!0)}(i.component,i.route,n,t,r)),Xr(i=>!0!==i,!0))}(a,r,i,e).pipe(ht(u=>u&&function OR(e){return"boolean"==typeof e}(u)?function $R(e,t,n,r){return Ze(t).pipe(Ri(i=>hf(function GR(e,t){return null!==e&&t&&t(new aR(e)),ce(!0)}(i.route.parent,r),function VR(e,t){return null!==e&&t&&t(new uR(e)),ce(!0)}(i.route,r),function WR(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function xR(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(a)).filter(a=>null!==a).map(a=>B0(()=>ce(a.guards.map(h=>{const g=Sa(a.node)??n,y=$s(h,g);return Zr(function FR(e){return e&&Ia(e.canActivateChild)}(y)?y.canActivateChild(r,e):g.runInContext(()=>y(r,e))).pipe(Xr())})).pipe(Vs())));return ce(s).pipe(Vs())}(e,i.path,n),function zR(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ce(!0);const i=r.map(s=>B0(()=>{const a=Sa(t)??n,u=$s(s,a);return Zr(function kR(e){return e&&Ia(e.canActivate)}(u)?u.canActivate(t,e):a.runInContext(()=>u(t,e))).pipe(Xr())}));return ce(i).pipe(Vs())}(e,i.route,n))),Xr(i=>!0!==i,!0))}(r,s,e,t):ce(u)),Te(u=>({...n,guardsResult:u})))})}(this.environmentInjector,a=>this.events.next(a)),Lt(a=>{if(r.guardsResult=a.guardsResult,Oi(a.guardsResult))throw gC(0,a.guardsResult);const u=new nR(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(u)}),Kr(a=>!!a.guardsResult||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),Ff(a=>{if(a.guards.canActivateChecks.length)return ce(a).pipe(Lt(u=>{const h=new rR(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),er(u=>{let h=!1;return ce(u).pipe(function pP(e,t){return ht(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ce(n);let s=0;return Ze(i).pipe(Ri(a=>function gP(e,t,n,r){const i=e.routeConfig,s=e._resolve;return void 0!==i?.title&&!kC(i)&&(s[pa]=i.title),function mP(e,t,n,r){const i=function vP(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return ce({});const s={};return Ze(i).pipe(ht(a=>function yP(e,t,n,r){const i=Sa(t)??r,s=$s(e,i);return Zr(s.resolve?s.resolve(t,n):i.runInContext(()=>s(t,n)))}(e[a],t,n,r).pipe(Xr(),Lt(u=>{s[a]=u}))),pf(1),function Tx(e){return Te(()=>e)}(s),Qr(a=>Of(a)?Jt:ha(a)))}(s,e,t,r).pipe(Te(a=>(e._resolvedData=a,e.data=hC(e,n).resolve,i&&kC(i)&&(e.data[pa]=i.title),null)))}(a.route,r,e,t)),Lt(()=>s++),pf(1),ht(a=>s===i.length?ce(n):Jt))})}(n.paramsInheritanceStrategy,this.environmentInjector),Lt({next:()=>h=!0,complete:()=>{h||(n.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),Lt(u=>{const h=new iR(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),Ff(a=>{const u=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Lt(y=>{h.component=y}),Te(()=>{})));for(const y of h.children)g.push(...u(y));return g};return F0(u(a.targetSnapshot.root)).pipe(Su(),fa(1))}),Ff(()=>this.afterPreactivation()),Te(a=>{const u=function yR(e,t,n){const r=Da(e,t._root,n?n._root:void 0);return new cC(r,t)}(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:u}}),Lt(a=>{n.currentUrlTree=a.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),n.routerState=a.targetRouterState,"deferred"===n.urlUpdateStrategy&&(a.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,a),n.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>Te(r=>(new TR(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,n.routeReuseStrategy,a=>this.events.next(a)),Lt({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Ni(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),gf(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Qr(a=>{if(s=!0,yC(a)){vC(a)||(n.navigated=!0,n.restoreHistory(r,!0));const u=new Ru(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(u),vC(a)){const h=n.urlHandlingStrategy.merge(a.url,n.rawUrlTree),g={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||BC(r.source)};n.scheduleNavigation(h,Ca,null,g,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const u=new Sf(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(u);try{r.resolve(n.errorHandler(a))}catch(h){r.reject(h)}}return Jt}))}))}cancelNavigationTransition(n,r,i){const s=new Ru(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function BC(e){return e!==Ca}let jC=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ce);return r}getResolvedTitleForRoute(n){return n.data[pa]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(){return Ae(CP)},providedIn:"root"}),e})(),CP=(()=>{class e extends jC{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(le(O0))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),DP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(){return Ae(SP)},providedIn:"root"}),e})();class wP{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let SP=(()=>{class e extends wP{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function zp(e){return In(()=>{const t=e.prototype.constructor,n=t[Mn]||kc(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const s=i[Mn]||kc(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(e)))(r||e)}}(),e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Vu=new pe("",{providedIn:"root",factory:()=>({})});let EP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:function(){return Ae(IP)},providedIn:"root"}),e})(),IP=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function MP(e){throw e}function TP(e,t,n){return t.parse("/")}const AP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ln=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ae(JM),this.isNgZoneEnabled=!1,this.options=Ae(Vu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||MP,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||TP,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ae(EP),this.routeReuseStrategy=Ae(DP),this.urlCreationStrategy=Ae(gR),this.titleStrategy=Ae(jC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=G0(Ae(Gs,{optional:!0})??[]),this.navigationTransitions=Ae($u),this.urlSerializer=Ae(ma),this.location=Ae(jh),this.isNgZoneEnabled=Ae(it)instanceof it&&it.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Jr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=dC(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ca,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const h={...i};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(s.state=h)}const u=this.parseUrl(n);this.scheduleNavigation(u,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Pf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:h}=r,g=h?this.currentUrlTree.fragment:a;let y=null;switch(u){case"merge":y={...this.currentUrlTree.queryParams,...s};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=s||null}return null!==y&&(y=this.removeEmptyProps(y)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,y,g??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Oi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ca,null,r)}navigate(n,r={skipLocationChange:!1}){return function RP(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new W(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...AP}:!1===r?{...xP}:r,Oi(n))return q0(this.currentUrlTree,n,i);const s=this.parseUrl(n);return q0(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let u,h,g,y;return a?(u=a.resolve,h=a.reject,g=a.promise):g=new Promise((D,S)=>{u=D,h=S}),y="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:y,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:u,reject:h,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(D=>Promise.reject(D))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class HC{}let NP=(()=>{class e{constructor(n,r,i,s,a){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Kr(n=>n instanceof Ni),Ri(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Kl(s.providers,n,`Route: ${s.path}`));const a=s._injector??n,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(u,s.children??s._loadedRoutes))}return Ze(i).pipe(sr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ce(null);const s=i.pipe(ht(a=>null===a?ce(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));return r.loadComponent&&!r._loadedComponent?Ze([s,this.loader.loadComponent(r)]).pipe(sr()):s})}}return e.\u0275fac=function(n){return new(n||e)(le(ln),le(f_),le(yr),le(HC),le(Lf))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Hf=new pe("");let UC=(()=>{class e{constructor(n,r,i,s,a={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof wf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ni&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof lC&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lC(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function Cm(){throw new Error("invalid")}()},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();var un=(()=>((un=un||{})[un.COMPLETE=0]="COMPLETE",un[un.FAILED=1]="FAILED",un[un.REDIRECTING=2]="REDIRECTING",un))();const zs=!1;function ei(e,t){return{\u0275kind:e,\u0275providers:t}}const Uf=new pe("",{providedIn:"root",factory:()=>!1});function VC(){const e=Ae(Cr);return t=>{const n=e.get(ru);if(t!==n.components[0])return;const r=e.get(ln),i=e.get(GC);1===e.get($f)&&r.initialNavigation(),e.get(zC,null,re.Optional)?.setUpPreloading(),e.get(Hf,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const GC=new pe(zs?"bootstrap done indicator":"",{factory:()=>new M}),$f=new pe(zs?"initial navigation":"",{providedIn:"root",factory:()=>1});function jP(){let e=[];return e=zs?[{provide:Ml,multi:!0,useFactory:()=>{const t=Ae(ln);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function dR(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],ei(1,e)}const zC=new pe(zs?"router preloader":"");function HP(e){return ei(0,[{provide:zC,useExisting:NP},{provide:HC,useExisting:e}])}const Ta=!1,WC=new pe(Ta?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),UP=[jh,{provide:ma,useClass:mf},ln,wa,{provide:Us,useFactory:function $C(e){return e.routerState.root},deps:[ln]},Lf,Ta?{provide:Uf,useValue:!0}:[]];function $P(){return new D_("Router",ln)}let qC=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[UP,Ta&&r?.enableTracing?jP().\u0275providers:[],{provide:Gs,multi:!0,useValue:n},{provide:WC,useFactory:WP,deps:[[ln,new Ro,new Po]]},{provide:Vu,useValue:r||{}},r?.useHash?{provide:xi,useClass:H1}:{provide:xi,useClass:G_},{provide:Hf,useFactory:()=>{const e=Ae(oA),t=Ae(it),n=Ae(Vu),r=Ae($u),i=Ae(ma);return n.scrollOffset&&e.setOffset(n.scrollOffset),new UC(i,r,e,t,n)}},r?.preloadingStrategy?HP(r.preloadingStrategy).\u0275providers:[],{provide:D_,multi:!0,useFactory:$P},r?.initialNavigation?qP(r):[],[{provide:YC,useFactory:VC},{provide:C_,multi:!0,useExisting:YC}]]}}static forChild(n){return{ngModule:e,providers:[{provide:Gs,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(le(WC,8))},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({imports:[xf]}),e})();function WP(e){if(Ta&&e)throw new W(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qP(e){return["disabled"===e.initialNavigation?ei(3,[{provide:eu,multi:!0,useFactory:()=>{const t=Ae(ln);return()=>{t.setUpLocationChangeListener()}}},{provide:$f,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?ei(2,[{provide:$f,useValue:0},{provide:eu,multi:!0,deps:[Cr],useFactory:t=>{const n=t.get(B1,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(ln),s=t.get(GC);(function kP(e,t){e.events.pipe(Kr(n=>n instanceof Ni||n instanceof Ru||n instanceof Sf||n instanceof Pu),Te(n=>n instanceof Ni||n instanceof Pu?un.COMPLETE:n instanceof Ru&&(0===n.code||1===n.code)?un.REDIRECTING:un.FAILED),Kr(n=>n!==un.REDIRECTING),fa(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get($u).afterPreactivation=()=>(r(!0),s.closed?ce(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const YC=new pe(Ta?"Router Initializer":""),KP=[];let XP=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({imports:[qC.forRoot(KP),qC]}),e})();function KC(e,t,n,r,i,s,a){try{var u=e[s](a),h=u.value}catch(g){return void n(g)}u.done?t(h):Promise.resolve(h).then(r,i)}const XC=["*"];function Vf(e){const t=e.getLayer()||e.getStage();t&&t.batchDraw()}function QC(e,t={},n={}){"id"in t&&console.warn('ng2-konva: You are using "id" attribute for Konva node. In some very rare cases it may produce bugs. Currently we recommend not to use it and use "name" attribute instead.');const r=e._stage,i={};let s=!1;if(Object.keys(n).forEach(a=>{if("on"===a.slice(0,2)&&n[a]!==t[a]){let y=a.substr(2).toLowerCase();"content"===y.substr(0,7)&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),r.off(y,n[a])}!t.hasOwnProperty(a)&&r.setAttr(a,void 0)}),Object.keys(t).forEach(a=>{let u="on"===a.slice(0,2);if(u&&n[a]!==t[a]){let g=a.substr(2).toLowerCase();"content"===g.substr(0,7)&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),t[a]&&(r.off(g),r.on(g,y=>{t[a](y.target.AngularComponent,y)}))}!u&&(t[a]!==n[a]||t[a]!==r.getAttr(a))&&(s=!0,i[a]=t[a])}),s){let a;r.setAttrs(i),Vf(r),Object.keys(i).forEach(u=>{if(a=i[u],a instanceof Image&&!a.complete){const h=r;a.addEventListener("load",function(){const g=h.getLayer();g&&g.batchDraw()})}})}}function ZC(e){const t={};return["click","dblclick","mouseover","mouseout","mousemove","tap","dbltap","touchstart","scaleXChange","fillChange","dragstart","dragmove","dragend"].forEach(n=>{e[n].observers.length&&(t["on"+n]=e[n].emit.bind(e[n]))}),t}let JC=(()=>{class e{constructor(n){this.elementRef=n,this.shapes=new ta,this.click=new _e,this.dblclick=new _e,this.mouseover=new _e,this.mouseout=new _e,this.mousemove=new _e,this.tap=new _e,this.dbltap=new _e,this.touchstart=new _e,this.scaleXChange=new _e,this.fillChange=new _e,this.dragstart=new _e,this.dragmove=new _e,this.dragend=new _e,this.added=!1,this.cacheProps={},this._stage={},this.nameNode=function e2(e){return function JP(e){return e.charAt(0).toUpperCase()+e.slice(1)}(function ZP(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,n){return 0==n?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")}(e.substr(3).replace("-"," ")))}(n.nativeElement.localName)}getStage(){return this._stage}getConfig(){return this._config||{}}ngOnInit(){this.initKonva()}initKonva(){const n=this,r=Konva[this.nameNode];this._stage=new r,this._stage.AngularComponent=this;const i=this._stage.to.bind(this._stage);this._stage.to=function(s){i(s),setTimeout(()=>{Object.keys(n._stage.attrs).forEach(a=>{"function"!=typeof n._stage.attrs[a]&&(n.config[a]=n._stage.attrs[a])})},200)},this.config&&this.config.subscribe(s=>{this._config=s,this.uploadKonva(s)})}uploadKonva(n){const r=Object.assign({},n,ZC(this));QC(this,r,this.cacheProps),this.cacheProps=r}ngAfterContentInit(){this.shapes.forEach(n=>{this!==n&&(n.added=!0,this._stage.add(n.getStage()),Vf(this._stage))})}ngOnDestroy(){this._stage.destroy()}}return e.\u0275fac=function(n){return new(n||e)(ue(Xn))},e.\u0275cmp=dr({type:e,selectors:[["ko-shape"],["ko-layer"],["ko-circle"],["ko-fastlayer"],["ko-group"],["ko-label"],["ko-rect"],["ko-ellipse"],["ko-wedge"],["ko-line"],["ko-sprite"],["ko-image"],["ko-text"],["ko-text-path"],["ko-star"],["ko-ring"],["ko-arc"],["ko-tag"],["ko-path"],["ko-regular-polygon"],["ko-arrow"]],contentQueries:function(n,r,i){if(1&n&&Ql(i,e,4),2&n){let s;na(s=ra())&&(r.shapes=s)}},inputs:{config:"config"},outputs:{click:"click",dblclick:"dblclick",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",tap:"tap",dbltap:"dbltap",touchstart:"touchstart",scaleXChange:"scaleXChange",fillChange:"fillChange",dragstart:"dragstart",dragmove:"dragmove",dragend:"dragend"},ngContentSelectors:XC,decls:2,vars:0,template:function(n,r){1&n&&(Wd(),Xt(0,"div"),qd(1),an())},encapsulation:2}),e})(),t2=(()=>{class e{constructor(n){this.elementRef=n,this.shapes=new ta,this.click=new _e,this.dblclick=new _e,this.mouseover=new _e,this.mouseout=new _e,this.mousemove=new _e,this.tap=new _e,this.dbltap=new _e,this.touchstart=new _e,this.scaleXChange=new _e,this.fillChange=new _e,this.dragstart=new _e,this.dragmove=new _e,this.dragend=new _e,this.cacheProps={}}getStage(){return this._stage||{}}getConfig(){return this._config||{}}uploadKonva(n){const r=Object.assign({},n,ZC(this));QC(this,r,this.cacheProps),this.cacheProps=r}ngOnInit(){const n=this.elementRef.nativeElement;this.config.subscribe(r=>{this._config=r,this._stage||(this._stage=new Konva.Stage({width:r.width,height:r.height,container:n})),this.uploadKonva(r)})}ngAfterContentInit(){this.shapes.forEach(n=>{this._stage.add(n.getStage()),Vf(this._stage)})}ngOnDestroy(){this._stage.destroy()}}return e.\u0275fac=function(n){return new(n||e)(ue(Xn))},e.\u0275cmp=dr({type:e,selectors:[["ko-stage"]],contentQueries:function(n,r,i){if(1&n&&Ql(i,JC,4),2&n){let s;na(s=ra())&&(r.shapes=s)}},inputs:{config:"config"},outputs:{click:"click",dblclick:"dblclick",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",tap:"tap",dbltap:"dbltap",touchstart:"touchstart",scaleXChange:"scaleXChange",fillChange:"fillChange",dragstart:"dragstart",dragmove:"dragmove",dragend:"dragend"},ngContentSelectors:XC,decls:3,vars:1,template:function(n,r){1&n&&(Wd(),Xt(0,"div"),qd(1),Wr(2),an()),2&n&&(ys(2),Jd(r.config))},encapsulation:2}),e})();typeof window<"u"&&!window.Konva&&qs(207);let n2=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({imports:[u0]}),e})();const r2=["stage"];function i2(e,t){1&e&&Ei(0,"img",13),2&e&&wr("src",t.$implicit,hd)}function s2(e,t){1&e&&Ei(0,"ko-image",11),2&e&&wr("config",t.$implicit.emitter)}function o2(e,t){1&e&&Ei(0,"ko-image",11),2&e&&wr("config",t.$implicit)}const a2=function(){return{background:"#000"}};let l2=(()=>{class e{constructor(n){this.zone=n,this.maxImages=10,this.configImage=new _e,this.images=[],this.imageUrls=[],this.imageConfigs=[],this.configStage=ce({width:1e3,height:600}),this.convertBase64=r=>new Promise((i,s)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>{i(a.result)},a.onerror=u=>{s(u)}})}processFile(n){var r=this;return function QP(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(h){KC(s,r,i,a,u,"next",h)}function u(h){KC(s,r,i,a,u,"throw",h)}a(void 0)})}}(function*(){const i=n.files[0],s=yield r.convertBase64(i);r.imageUrls.push(s);const[a]=r.images.filter(h=>!h.src);a.src=s;const u=new window.Image;u.src=s,a.emitter.emit({image:u,draggable:!0})})()}exportImage(){const[n]=window.document.getElementsByTagName("canvas"),r=n.toDataURL(),i=document.createElement("a");i.download="result.jpg",i.href=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),console.log(n)}showImage(){this.images.forEach(n=>{const r=new window.Image;r.src=n.src,r.onload=()=>{n.emitter.emit({image:r,draggable:!0})}})}ngOnInit(){for(let n=0;n<this.maxImages;n++)this.images.push({id:n,emitter:new _e})}}return e.\u0275fac=function(n){return new(n||e)(ue(it))},e.\u0275cmp=dr({type:e,selectors:[["app-konva-manipulator"]],viewQuery:function(n,r){if(1&n&&function Vy(e,t,n){const r=Fe();r.firstCreatePass&&(zy(r,new Uy(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Gy(r,L(),t)}(r2,5),2&n){let i;na(i=ra())&&(r.stage=i.first)}},decls:24,vars:7,consts:[[1,"main-container"],[1,"title"],[1,"description"],[1,"file-wrapper"],["type","file","accept","image/*","id","actual-btn","hidden","",3,"change"],["imageInput",""],["for","actual-btn",1,"upload-button"],[1,"availableImages"],["alt","",3,"src",4,"ngFor","ngForOf"],[1,"preview"],[1,"export-btn",3,"click"],[3,"config"],[3,"config",4,"ngFor","ngForOf"],["alt","",3,"src"]],template:function(n,r){if(1&n){const i=function Jm(){return L()}();Xt(0,"div",0)(1,"div")(2,"h2",1),Wr(3,"Demo"),an(),Xt(4,"p",2),Wr(5,"Image manipulation demo"),an(),Xt(6,"div",3)(7,"span"),Wr(8,"Select Image"),an(),Xt(9,"input",4,5),Wo("change",function(){!function _p(e){return ee.lFrame.contextLView=e,e[Je]}(i);const a=function Qm(e){return function oe(e,t){return e[t]}(function oD(){return ee.lFrame.contextLView}(),qe+e)}(10);return function Cp(e){return ee.lFrame.contextLView=null,e}(r.processFile(a))}),an(),Xt(11,"label",6),Wr(12,"Choose File"),an()(),Xt(13,"div",7),Ul(14,i2,1,1,"img",8),an()(),Xt(15,"div")(16,"h3",9),Wr(17," Page preview "),Xt(18,"button",10),Wo("click",function(){return r.exportImage()}),Wr(19," Export result image "),an()(),Xt(20,"ko-stage",11)(21,"ko-layer"),Ul(22,s2,1,1,"ko-image",12),Ul(23,o2,1,1,"ko-image",12),an()()()()}2&n&&(ys(14),wr("ngForOf",r.imageUrls),ys(6),xn(Py(6,a2)),wr("config",r.configStage),ys(2),wr("ngForOf",r.images),ys(1),wr("ngForOf",r.imageConfigs))},dependencies:[r0,t2,JC],styles:["[_nghost-%COMP%]     canvas{background:var(--white)!important}.main-container[_ngcontent-%COMP%]{display:flex;background-color:var(--gray);min-height:100vh;padding:20px;font-family:sans-serif;width:90%;margin:auto;gap:40px}.title[_ngcontent-%COMP%]{color:var(--primary);font-size:32px;margin-bottom:5px}.description[_ngcontent-%COMP%], .preview[_ngcontent-%COMP%]{font-weight:400;color:var(--text-color)}.availableImages[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column;justify-content:start;align-items:center;gap:5px}.availableImages[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}.image-upload-container[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.image-upload-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0}.file-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;margin-bottom:1rem}.export-btn[_ngcontent-%COMP%]{margin-left:10px;padding:.5rem 1rem;font-size:17px;border:0;background-color:var(--primary);color:var(--white);border-radius:4px}.export-btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--primary-hover)}.upload-button[_ngcontent-%COMP%]{background-color:var(--primary);color:var(--white);padding:.5rem 1rem;font-family:sans-serif;border-radius:.3rem;cursor:pointer;margin-left:10px}.upload-button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--primary-hover)}"]}),e})(),u2=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=dr({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&Ei(0,"app-konva-manipulator")},dependencies:[l2],styles:[".root[_ngcontent-%COMP%]{background-color:var(--wo-gray);height:100vh;padding:20px}.preparedImages[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;gap:8px;margin-bottom:20px}canvas[_ngcontent-%COMP%]{width:80%;background-color:var(--wo-white)}.tool[_ngcontent-%COMP%]{width:350px}"]}),e})(),c2=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e,bootstrap:[u2]}),e.\u0275inj=cn({imports:[ix,XP,n2]}),e})();rx().bootstrapModule(c2).catch(e=>console.error(e))},207:(Aa,Ws,qs)=>{qs.r(Ws),qs.d(Ws,{default:()=>vp});var ze=Math.PI/180;const Bn=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Q={_global:Bn,version:"8.4.3",isBrowser:function Ys(){return typeof window<"u"&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}(),isUnminified:/param/.test(function(f){}.toString()),dblClickWindow:400,getAngle:f=>Q.angleDeg?f*ze:f,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>Q.DD.isDragging,isDragReady:()=>!!Q.DD.node,releaseCanvasOnDestroy:!0,document:Bn.document,_injectGlobal(f){Bn.Konva=f}},Re=f=>{Q[f.prototype.getClassName()]=f};Q._injectGlobal(Q);class xt{constructor(o=[1,0,0,1,0,0]){this.dirty=!1,this.m=o&&o.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new xt(this.m)}copyInto(o){o.m[0]=this.m[0],o.m[1]=this.m[1],o.m[2]=this.m[2],o.m[3]=this.m[3],o.m[4]=this.m[4],o.m[5]=this.m[5]}point(o){var l=this.m;return{x:l[0]*o.x+l[2]*o.y+l[4],y:l[1]*o.x+l[3]*o.y+l[5]}}translate(o,l){return this.m[4]+=this.m[0]*o+this.m[2]*l,this.m[5]+=this.m[1]*o+this.m[3]*l,this}scale(o,l){return this.m[0]*=o,this.m[1]*=o,this.m[2]*=l,this.m[3]*=l,this}rotate(o){var l=Math.cos(o),c=Math.sin(o),p=this.m[1]*l+this.m[3]*c,m=this.m[0]*-c+this.m[2]*l,v=this.m[1]*-c+this.m[3]*l;return this.m[0]=this.m[0]*l+this.m[2]*c,this.m[1]=p,this.m[2]=m,this.m[3]=v,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(o,l){var d=this.m[1]+this.m[3]*l,p=this.m[2]+this.m[0]*o,m=this.m[3]+this.m[1]*o;return this.m[0]=this.m[0]+this.m[2]*l,this.m[1]=d,this.m[2]=p,this.m[3]=m,this}multiply(o){var c=this.m[1]*o.m[0]+this.m[3]*o.m[1],d=this.m[0]*o.m[2]+this.m[2]*o.m[3],p=this.m[1]*o.m[2]+this.m[3]*o.m[3],m=this.m[0]*o.m[4]+this.m[2]*o.m[5]+this.m[4],v=this.m[1]*o.m[4]+this.m[3]*o.m[5]+this.m[5];return this.m[0]=this.m[0]*o.m[0]+this.m[2]*o.m[1],this.m[1]=c,this.m[2]=d,this.m[3]=p,this.m[4]=m,this.m[5]=v,this}invert(){var o=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*o,d=-this.m[2]*o,p=this.m[0]*o,m=o*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),v=o*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*o,this.m[1]=c,this.m[2]=d,this.m[3]=p,this.m[4]=m,this.m[5]=v,this}getMatrix(){return this.m}decompose(){var o=this.m[0],l=this.m[1],c=this.m[2],d=this.m[3],v=o*d-l*c;let _={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=o||0!=l){var C=Math.sqrt(o*o+l*l);_.rotation=l>0?Math.acos(o/C):-Math.acos(o/C),_.scaleX=C,_.scaleY=v/C,_.skewX=(o*c+l*d)/v,_.skewY=0}else if(0!=c||0!=d){var w=Math.sqrt(c*c+d*d);_.rotation=Math.PI/2-(d>0?Math.acos(-c/w):-Math.acos(c/w)),_.scaleX=v/w,_.scaleY=w,_.skewX=0,_.skewY=(o*c+l*d)/v}return _.rotation=x._getRotation(_.rotation),_}}var Pa=Math.PI/180,Oa=180/Math.PI,jn="Konva error: ",Qs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Zs=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Li=[];const Js=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(f){setTimeout(f,60)},x={_isElement:f=>!(!f||1!=f.nodeType),_isFunction:f=>!!(f&&f.constructor&&f.call&&f.apply),_isPlainObject:f=>!!f&&f.constructor===Object,_isArray:f=>"[object Array]"===Object.prototype.toString.call(f),_isNumber:f=>"[object Number]"===Object.prototype.toString.call(f)&&!isNaN(f)&&isFinite(f),_isString:f=>"[object String]"===Object.prototype.toString.call(f),_isBoolean:f=>"[object Boolean]"===Object.prototype.toString.call(f),isObject:f=>f instanceof Object,isValidSelector(f){if("string"!=typeof f)return!1;var o=f[0];return"#"===o||"."===o||o===o.toUpperCase()},_sign:f=>0===f||f>0?1:-1,requestAnimFrame(f){Li.push(f),1===Li.length&&Js(function(){const o=Li;Li=[],o.forEach(function(l){l()})})},createCanvasElement(){var f=document.createElement("canvas");try{f.style=f.style||{}}catch{}return f},createImageElement:()=>document.createElement("img"),_isInDocument(f){for(;f=f.parentNode;)if(f==document)return!0;return!1},_urlToImage(f,o){var l=x.createImageElement();l.onload=function(){o(l)},l.src=f},_rgbToHex:(f,o,l)=>((1<<24)+(f<<16)+(o<<8)+l).toString(16).slice(1),_hexToRgb(f){f=f.replace("#","");var o=parseInt(f,16);return{r:o>>16&255,g:o>>8&255,b:255&o}},getRandomColor(){for(var f=(16777215*Math.random()<<0).toString(16);f.length<6;)f="0"+f;return"#"+f},getRGB(f){var o;return f in Qs?{r:(o=Qs[f])[0],g:o[1],b:o[2]}:"#"===f[0]?this._hexToRgb(f.substring(1)):"rgb("===f.substr(0,4)?(o=Zs.exec(f.replace(/ /g,"")),{r:parseInt(o[1],10),g:parseInt(o[2],10),b:parseInt(o[3],10)}):{r:0,g:0,b:0}},colorToRGBA:f=>x._namedColorToRBA(f=f||"black")||x._hex3ColorToRGBA(f)||x._hex4ColorToRGBA(f)||x._hex6ColorToRGBA(f)||x._hex8ColorToRGBA(f)||x._rgbColorToRGBA(f)||x._rgbaColorToRGBA(f)||x._hslColorToRGBA(f),_namedColorToRBA(f){var o=Qs[f.toLowerCase()];return o?{r:o[0],g:o[1],b:o[2],a:1}:null},_rgbColorToRGBA(f){if(0===f.indexOf("rgb(")){var o=(f=f.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:o[0],g:o[1],b:o[2],a:1}}},_rgbaColorToRGBA(f){if(0===f.indexOf("rgba(")){var o=(f=f.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((l,c)=>"%"===l.slice(-1)?3===c?parseInt(l)/100:parseInt(l)/100*255:Number(l));return{r:o[0],g:o[1],b:o[2],a:o[3]}}},_hex8ColorToRGBA(f){if("#"===f[0]&&9===f.length)return{r:parseInt(f.slice(1,3),16),g:parseInt(f.slice(3,5),16),b:parseInt(f.slice(5,7),16),a:parseInt(f.slice(7,9),16)/255}},_hex6ColorToRGBA(f){if("#"===f[0]&&7===f.length)return{r:parseInt(f.slice(1,3),16),g:parseInt(f.slice(3,5),16),b:parseInt(f.slice(5,7),16),a:1}},_hex4ColorToRGBA(f){if("#"===f[0]&&5===f.length)return{r:parseInt(f[1]+f[1],16),g:parseInt(f[2]+f[2],16),b:parseInt(f[3]+f[3],16),a:parseInt(f[4]+f[4],16)/255}},_hex3ColorToRGBA(f){if("#"===f[0]&&4===f.length)return{r:parseInt(f[1]+f[1],16),g:parseInt(f[2]+f[2],16),b:parseInt(f[3]+f[3],16),a:1}},_hslColorToRGBA(f){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(f)){const[o,...l]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(f),c=Number(l[0])/360,d=Number(l[1])/100,p=Number(l[2])/100;let m,v,_;if(0===d)return _=255*p,{r:Math.round(_),g:Math.round(_),b:Math.round(_),a:1};m=p<.5?p*(1+d):p+d-p*d;const C=2*p-m,w=[0,0,0];for(let E=0;E<3;E++)v=c+1/3*-(E-1),v<0&&v++,v>1&&v--,_=6*v<1?C+6*(m-C)*v:2*v<1?m:3*v<2?C+(m-C)*(2/3-v)*6:C,w[E]=255*_;return{r:Math.round(w[0]),g:Math.round(w[1]),b:Math.round(w[2]),a:1}}},haveIntersection:(f,o)=>!(o.x>f.x+f.width||o.x+o.width<f.x||o.y>f.y+f.height||o.y+o.height<f.y),cloneObject(f){var o={};for(var l in f)o[l]=this._isPlainObject(f[l])?this.cloneObject(f[l]):this._isArray(f[l])?this.cloneArray(f[l]):f[l];return o},cloneArray:f=>f.slice(0),degToRad:f=>f*Pa,radToDeg:f=>f*Oa,_degToRad:f=>(x.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),x.degToRad(f)),_radToDeg:f=>(x.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),x.radToDeg(f)),_getRotation:f=>Q.angleDeg?x.radToDeg(f):f,_capitalize:f=>f.charAt(0).toUpperCase()+f.slice(1),throw(f){throw new Error(jn+f)},error(f){console.error(jn+f)},warn(f){Q.showWarnings&&console.warn("Konva warning: "+f)},each(f,o){for(var l in f)o(l,f[l])},_inRange:(f,o,l)=>o<=f&&f<l,_getProjectionToSegment(f,o,l,c,d,p){var m,v,_,C=(f-l)*(f-l)+(o-c)*(o-c);if(0==C)m=f,v=o,_=(d-l)*(d-l)+(p-c)*(p-c);else{var w=((d-f)*(l-f)+(p-o)*(c-o))/C;w<0?(m=f,v=o,_=(f-d)*(f-d)+(o-p)*(o-p)):w>1?(m=l,v=c,_=(l-d)*(l-d)+(c-p)*(c-p)):_=((m=f+w*(l-f))-d)*(m-d)+((v=o+w*(c-o))-p)*(v-p)}return[m,v,_]},_getProjectionToLine(f,o,l){var c=x.cloneObject(f),d=Number.MAX_VALUE;return o.forEach(function(p,m){if(l||m!==o.length-1){var v=o[(m+1)%o.length],_=x._getProjectionToSegment(p.x,p.y,v.x,v.y,f.x,f.y),w=_[1],E=_[2];E<d&&(c.x=_[0],c.y=w,d=E)}}),c},_prepareArrayForTween(f,o,l){var c,d=[],p=[];if(f.length>o.length){var m=o;o=f,f=m}for(c=0;c<f.length;c+=2)d.push({x:f[c],y:f[c+1]});for(c=0;c<o.length;c+=2)p.push({x:o[c],y:o[c+1]});var v=[];return p.forEach(function(_){var C=x._getProjectionToLine(_,d,l);v.push(C.x),v.push(C.y)}),v},_prepareToStringify(f){var o;for(var l in f.visitedByCircularReferenceRemoval=!0,f)if(f.hasOwnProperty(l)&&f[l]&&"object"==typeof f[l])if(o=Object.getOwnPropertyDescriptor(f,l),f[l].visitedByCircularReferenceRemoval||x._isElement(f[l])){if(!o.configurable)return null;delete f[l]}else if(null===x._prepareToStringify(f[l])){if(!o.configurable)return null;delete f[l]}return delete f.visitedByCircularReferenceRemoval,f},_assign(f,o){for(var l in o)f[l]=o[l];return f},_getFirstPointerId:f=>f.touches?f.changedTouches[0].identifier:f.pointerId||999,releaseCanvas(...f){Q.releaseCanvasOnDestroy&&f.forEach(o=>{o.width=0,o.height=0})},drawRoundedRectPath(f,o,l,c){let d=0,p=0,m=0,v=0;"number"==typeof c?d=p=m=v=Math.min(c,o/2,l/2):(d=Math.min(c[0]||0,o/2,l/2),p=Math.min(c[1]||0,o/2,l/2),v=Math.min(c[2]||0,o/2,l/2),m=Math.min(c[3]||0,o/2,l/2)),f.moveTo(d,0),f.lineTo(o-p,0),f.arc(o-p,p,p,3*Math.PI/2,0,!1),f.lineTo(o,l-v),f.arc(o-v,l-v,v,0,Math.PI/2,!1),f.lineTo(m,l),f.arc(m,l-m,m,Math.PI/2,Math.PI,!1),f.lineTo(0,d),f.arc(d,d,d,Math.PI,3*Math.PI/2,!1)}};function Bt(f){return x._isString(f)?'"'+f+'"':"[object Number]"===Object.prototype.toString.call(f)||x._isBoolean(f)?f:Object.prototype.toString.call(f)}function ti(f){return f>255?255:f<0?0:Math.round(f)}function V(){if(Q.isUnminified)return function(f,o){return x._isNumber(f)||x.warn(Bt(f)+' is a not valid value for "'+o+'" attribute. The value should be a number.'),f}}function eo(f){if(Q.isUnminified)return function(o,l){let c=x._isNumber(o),d=x._isArray(o)&&o.length==f;return!c&&!d&&x.warn(Bt(o)+' is a not valid value for "'+l+'" attribute. The value should be a number or Array<number>('+f+")"),o}}function ni(){if(Q.isUnminified)return function(f,o){return x._isNumber(f)||"auto"===f||x.warn(Bt(f)+' is a not valid value for "'+o+'" attribute. The value should be a number or "auto".'),f}}function zt(){if(Q.isUnminified)return function(f,o){return x._isString(f)||x.warn(Bt(f)+' is a not valid value for "'+o+'" attribute. The value should be a string.'),f}}function Na(){if(Q.isUnminified)return function(f,o){const l=x._isString(f),c="[object CanvasGradient]"===Object.prototype.toString.call(f)||f&&f.addColorStop;return l||c||x.warn(Bt(f)+' is a not valid value for "'+o+'" attribute. The value should be a string or a native gradient.'),f}}function Wt(){if(Q.isUnminified)return function(f,o){return!0===f||!1===f||x.warn(Bt(f)+' is a not valid value for "'+o+'" attribute. The value should be a boolean.'),f}}var ri="get",ii="set";const M={addGetterSetter(f,o,l,c,d){M.addGetter(f,o,l),M.addSetter(f,o,c,d),M.addOverloadedGetterSetter(f,o)},addGetter(f,o,l){var c=ri+x._capitalize(o);f.prototype[c]=f.prototype[c]||function(){var d=this.attrs[o];return void 0===d?l:d}},addSetter(f,o,l,c){var d=ii+x._capitalize(o);f.prototype[d]||M.overWriteSetter(f,o,l,c)},overWriteSetter(f,o,l,c){var d=ii+x._capitalize(o);f.prototype[d]=function(p){return l&&null!=p&&(p=l.call(this,p,o)),this._setAttr(o,p),c&&c.call(this),this}},addComponentsGetterSetter(f,o,l,c,d){var C,w,p=l.length,m=x._capitalize,v=ri+m(o),_=ii+m(o);f.prototype[v]=function(){var I={};for(C=0;C<p;C++)I[w=l[C]]=this.getAttr(o+m(w));return I};var E=function qu(f){if(Q.isUnminified)return function(o,l){return null==o||x.isObject(o)||x.warn(Bt(o)+' is a not valid value for "'+l+'" attribute. The value should be an object with properties '+f),o}}(l);f.prototype[_]=function(I){var b,A=this.attrs[o];for(b in c&&(I=c.call(this,I)),E&&E.call(this,I,o),I)I.hasOwnProperty(b)&&this._setAttr(o+m(b),I[b]);return I||l.forEach(O=>{this._setAttr(o+m(O),void 0)}),this._fireChangeEvent(o,A,I),d&&d.call(this),this},M.addOverloadedGetterSetter(f,o)},addOverloadedGetterSetter(f,o){var l=x._capitalize(o),c=ii+l,d=ri+l;f.prototype[o]=function(){return arguments.length?(this[c](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(f,o,l,c){x.error("Adding deprecated "+o);var d=ri+x._capitalize(o),p=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";f.prototype[d]=function(){x.error(p);var m=this.attrs[o];return void 0===m?l:m},M.addSetter(f,o,c,function(){x.error(p)}),M.addOverloadedGetterSetter(f,o)},backCompat(f,o){x.each(o,function(l,c){var d=f.prototype[c],p=ri+x._capitalize(l),m=ii+x._capitalize(l);function v(){d.apply(this,arguments),x.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}f.prototype[l]=v,f.prototype[p]=v,f.prototype[m]=v})},afterSetFilter(){this._filterUpToDate=!1}};var io,Ku=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class ro{constructor(o){this.canvas=o,Q.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(o){o.fillEnabled()&&this._fill(o)}_fill(o){}strokeShape(o){o.hasStroke()&&this._stroke(o)}_stroke(o){}fillStrokeShape(o){o.attrs.fillAfterStrokeEnabled?(this.strokeShape(o),this.fillShape(o)):(this.fillShape(o),this.strokeShape(o))}getTrace(o,l){var m,v,_,C,c=this.traceArr,d=c.length,p="";for(m=0;m<d;m++)(_=(v=c[m]).method)?(C=v.args,p+=_,o?p+="()":x._isArray(C[0])?p+="(["+C.join(",")+"])":(l&&(C=C.map(w=>"number"==typeof w?Math.floor(w):w)),p+="("+C.join(",")+")")):(p+=v.property,o||(p+="="+v.val)),p+=";";return p}clearTrace(){this.traceArr=[]}_trace(o){var l=this.traceArr;l.push(o),l.length>=100&&l.shift()}reset(){var o=this.getCanvas().getPixelRatio();this.setTransform(1*o,0,0,1*o,0,0)}getCanvas(){return this.canvas}clear(o){var l=this.getCanvas();o?this.clearRect(o.x||0,o.y||0,o.width||0,o.height||0):this.clearRect(0,0,l.getWidth()/l.pixelRatio,l.getHeight()/l.pixelRatio)}_applyLineCap(o){const l=o.attrs.lineCap;l&&this.setAttr("lineCap",l)}_applyOpacity(o){var l=o.getAbsoluteOpacity();1!==l&&this.setAttr("globalAlpha",l)}_applyLineJoin(o){const l=o.attrs.lineJoin;l&&this.setAttr("lineJoin",l)}setAttr(o,l){this._context[o]=l}arc(o,l,c,d,p,m){this._context.arc(o,l,c,d,p,m)}arcTo(o,l,c,d,p){this._context.arcTo(o,l,c,d,p)}beginPath(){this._context.beginPath()}bezierCurveTo(o,l,c,d,p,m){this._context.bezierCurveTo(o,l,c,d,p,m)}clearRect(o,l,c,d){this._context.clearRect(o,l,c,d)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(o,l){var c=arguments;return 2===c.length?this._context.createImageData(o,l):1===c.length?this._context.createImageData(o):void 0}createLinearGradient(o,l,c,d){return this._context.createLinearGradient(o,l,c,d)}createPattern(o,l){return this._context.createPattern(o,l)}createRadialGradient(o,l,c,d,p,m){return this._context.createRadialGradient(o,l,c,d,p,m)}drawImage(o,l,c,d,p,m,v,_,C){var w=arguments,E=this._context;3===w.length?E.drawImage(o,l,c):5===w.length?E.drawImage(o,l,c,d,p):9===w.length&&E.drawImage(o,l,c,d,p,m,v,_,C)}ellipse(o,l,c,d,p,m,v,_){this._context.ellipse(o,l,c,d,p,m,v,_)}isPointInPath(o,l,c,d){return c?this._context.isPointInPath(c,o,l,d):this._context.isPointInPath(o,l,d)}fill(o){o?this._context.fill(o):this._context.fill()}fillRect(o,l,c,d){this._context.fillRect(o,l,c,d)}strokeRect(o,l,c,d){this._context.strokeRect(o,l,c,d)}fillText(o,l,c,d){d?this._context.fillText(o,l,c,d):this._context.fillText(o,l,c)}measureText(o){return this._context.measureText(o)}getImageData(o,l,c,d){return this._context.getImageData(o,l,c,d)}lineTo(o,l){this._context.lineTo(o,l)}moveTo(o,l){this._context.moveTo(o,l)}rect(o,l,c,d){this._context.rect(o,l,c,d)}putImageData(o,l,c){this._context.putImageData(o,l,c)}quadraticCurveTo(o,l,c,d){this._context.quadraticCurveTo(o,l,c,d)}restore(){this._context.restore()}rotate(o){this._context.rotate(o)}save(){this._context.save()}scale(o,l){this._context.scale(o,l)}setLineDash(o){this._context.setLineDash?this._context.setLineDash(o):"mozDash"in this._context?this._context.mozDash=o:"webkitLineDash"in this._context&&(this._context.webkitLineDash=o)}getLineDash(){return this._context.getLineDash()}setTransform(o,l,c,d,p,m){this._context.setTransform(o,l,c,d,p,m)}stroke(o){o?this._context.stroke(o):this._context.stroke()}strokeText(o,l,c,d){this._context.strokeText(o,l,c,d)}transform(o,l,c,d,p,m){this._context.transform(o,l,c,d,p,m)}translate(o,l){this._context.translate(o,l)}_enableTrace(){var d,p,o=this,l=Ku.length,c=this.setAttr,m=function(v){var C,_=o[v];o[v]=function(){return p=function ka(f){var d,p,o=[],l=f.length,c=x;for(d=0;d<l;d++)c._isNumber(p=f[d])?p=Math.round(1e3*p)/1e3:c._isString(p)||(p+=""),o.push(p);return o}(Array.prototype.slice.call(arguments,0)),C=_.apply(o,arguments),o._trace({method:v,args:p}),C}};for(d=0;d<l;d++)m(Ku[d]);o.setAttr=function(){c.apply(o,arguments);var v=arguments[0],_=arguments[1];("shadowOffsetX"===v||"shadowOffsetY"===v||"shadowBlur"===v)&&(_/=this.canvas.getPixelRatio()),o._trace({property:v,val:_})}}_applyGlobalCompositeOperation(o){const l=o.attrs.globalCompositeOperation;!l||"source-over"===l||this.setAttr("globalCompositeOperation",l)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(f){Object.defineProperty(ro.prototype,f,{get(){return this._context[f]},set(o){this._context[f]=o}})});class Yf extends ro{constructor(o){super(o),this._context=o._canvas.getContext("2d")}_fillColor(o){var l=o.fill();this.setAttr("fillStyle",l),o._fillFunc(this)}_fillPattern(o){this.setAttr("fillStyle",o._getFillPattern()),o._fillFunc(this)}_fillLinearGradient(o){var l=o._getLinearGradient();l&&(this.setAttr("fillStyle",l),o._fillFunc(this))}_fillRadialGradient(o){const l=o._getRadialGradient();l&&(this.setAttr("fillStyle",l),o._fillFunc(this))}_fill(o){const l=o.fill(),c=o.getFillPriority();if(l&&"color"===c)return void this._fillColor(o);const d=o.getFillPatternImage();if(d&&"pattern"===c)return void this._fillPattern(o);const p=o.getFillLinearGradientColorStops();if(p&&"linear-gradient"===c)return void this._fillLinearGradient(o);const m=o.getFillRadialGradientColorStops();m&&"radial-gradient"===c?this._fillRadialGradient(o):l?this._fillColor(o):d?this._fillPattern(o):p?this._fillLinearGradient(o):m&&this._fillRadialGradient(o)}_strokeLinearGradient(o){const l=o.getStrokeLinearGradientStartPoint(),c=o.getStrokeLinearGradientEndPoint(),d=o.getStrokeLinearGradientColorStops(),p=this.createLinearGradient(l.x,l.y,c.x,c.y);if(d){for(var m=0;m<d.length;m+=2)p.addColorStop(d[m],d[m+1]);this.setAttr("strokeStyle",p)}}_stroke(o){var l=o.dash(),c=o.getStrokeScaleEnabled();if(o.hasStroke()){if(!c){this.save();var d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(o),l&&o.dashEnabled()&&(this.setLineDash(l),this.setAttr("lineDashOffset",o.dashOffset())),this.setAttr("lineWidth",o.strokeWidth()),o.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),o.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(o):this.setAttr("strokeStyle",o.stroke()),o._strokeFunc(this),c||this.restore()}}_applyShadow(o){var l,c,d,p=null!==(l=o.getShadowRGBA())&&void 0!==l?l:"black",m=null!==(c=o.getShadowBlur())&&void 0!==c?c:5,v=null!==(d=o.getShadowOffset())&&void 0!==d?d:{x:0,y:0},_=o.getAbsoluteScale(),C=this.canvas.getPixelRatio(),w=_.x*C,E=_.y*C;this.setAttr("shadowColor",p),this.setAttr("shadowBlur",m*Math.min(Math.abs(w),Math.abs(E))),this.setAttr("shadowOffsetX",v.x*w),this.setAttr("shadowOffsetY",v.y*E)}}class Kf extends ro{constructor(o){super(o),this._context=o._canvas.getContext("2d",{willReadFrequently:!0})}_fill(o){this.save(),this.setAttr("fillStyle",o.colorKey),o._fillFuncHit(this),this.restore()}strokeShape(o){o.hasHitStroke()&&this._stroke(o)}_stroke(o){if(o.hasHitStroke()){const p=o.getStrokeScaleEnabled();if(!p){this.save();var l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(o);var c=o.hitStrokeWidth(),d="auto"===c?o.strokeWidth():c;this.setAttr("lineWidth",d),this.setAttr("strokeStyle",o.colorKey),o._strokeFuncHit(this),p||this.restore()}}}class Bi{constructor(o){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var c=(o||{}).pixelRatio||Q.pixelRatio||function Xf(){if(io)return io;var f=x.createCanvasElement(),o=f.getContext("2d");return io=(Q._global.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),x.releaseCanvas(f),io}();this.pixelRatio=c,this._canvas=x.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(o){var l=this.pixelRatio;this.pixelRatio=o,this.setSize(this.getWidth()/l,this.getHeight()/l)}setWidth(o){this.width=this._canvas.width=o*this.pixelRatio,this._canvas.style.width=o+"px";var l=this.pixelRatio;this.getContext()._context.scale(l,l)}setHeight(o){this.height=this._canvas.height=o*this.pixelRatio,this._canvas.style.height=o+"px";var l=this.pixelRatio;this.getContext()._context.scale(l,l)}getWidth(){return this.width}getHeight(){return this.height}setSize(o,l){this.setWidth(o||0),this.setHeight(l||0)}toDataURL(o,l){try{return this._canvas.toDataURL(o,l)}catch{try{return this._canvas.toDataURL()}catch(d){return x.error("Unable to get data URL. "+d.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}M.addGetterSetter(Bi,"pixelRatio",void 0,V());class si extends Bi{constructor(o={width:0,height:0}){super(o),this.context=new Yf(this),this.setSize(o.width,o.height)}}class ji extends Bi{constructor(o={width:0,height:0}){super(o),this.hitCanvas=!0,this.context=new Kf(this),this.setSize(o.width,o.height)}}const Le={get isDragging(){var f=!1;return Le._dragElements.forEach(o=>{"dragging"===o.dragStatus&&(f=!0)}),f},justDragged:!1,get node(){var f;return Le._dragElements.forEach(o=>{f=o.node}),f},_dragElements:new Map,_drag(f){const o=[];Le._dragElements.forEach((l,c)=>{const{node:d}=l,p=d.getStage();p.setPointersPositions(f),void 0===l.pointerId&&(l.pointerId=x._getFirstPointerId(f));const m=p._changedPointerPositions.find(C=>C.id===l.pointerId);if(m){if("dragging"!==l.dragStatus){var v=d.dragDistance();if(Math.max(Math.abs(m.x-l.startPointerPos.x),Math.abs(m.y-l.startPointerPos.y))<v||(d.startDrag({evt:f}),!d.isDragging()))return}d._setDragPosition(f,l),o.push(d)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:f},!0)})},_endDragBefore(f){const o=[];Le._dragElements.forEach(l=>{const{node:c}=l,d=c.getStage();if(f&&d.setPointersPositions(f),!d._changedPointerPositions.find(v=>v.id===l.pointerId))return;("dragging"===l.dragStatus||"stopped"===l.dragStatus)&&(Le.justDragged=!0,Q._mouseListenClick=!1,Q._touchListenClick=!1,Q._pointerListenClick=!1,l.dragStatus="stopped");const m=l.node.getLayer()||l.node instanceof Q.Stage&&l.node;m&&-1===o.indexOf(m)&&o.push(m)}),o.forEach(l=>{l.draw()})},_endDragAfter(f){Le._dragElements.forEach((o,l)=>{"stopped"===o.dragStatus&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:f},!0),"dragging"!==o.dragStatus&&Le._dragElements.delete(l)})}};Q.isBrowser&&(window.addEventListener("mouseup",Le._endDragBefore,!0),window.addEventListener("touchend",Le._endDragBefore,!0),window.addEventListener("mousemove",Le._drag),window.addEventListener("touchmove",Le._drag),window.addEventListener("mouseup",Le._endDragAfter,!1),window.addEventListener("touchend",Le._endDragAfter,!1));var oi="absoluteOpacity",Hi="allEventListeners",Hn="absoluteTransform",Xu="absoluteScale",Ar="canvas",so="listening",Zu="mouseenter",La="mouseleave",Sn="transform",Ui="visible",ja=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" ");let Ha=1;class G{constructor(o){this._id=Ha++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(o),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(o){o!==Sn&&o!==Hn||!this._cache.get(o)?o?this._cache.delete(o):this._cache.clear():this._cache.get(o).dirty=!0}_getCache(o,l){var c=this._cache.get(o);return(void 0===c||(o===Sn||o===Hn)&&!0===c.dirty)&&(c=l.call(this),this._cache.set(o,c)),c}_calculate(o,l,c){if(!this._attachedDepsListeners.get(o)){const d=l.map(p=>p+"Change.konva").join(" ");this.on(d,()=>{this._clearCache(o)}),this._attachedDepsListeners.set(o,!0)}return this._getCache(o,c)}_getCanvasCache(){return this._cache.get(Ar)}_clearSelfAndDescendantCache(o){this._clearCache(o),o===Hn&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Ar)){const{scene:o,filter:l,hit:c}=this._cache.get(Ar);x.releaseCanvas(o,l,c),this._cache.delete(Ar)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(o){var l=o||{},c={};(void 0===l.x||void 0===l.y||void 0===l.width||void 0===l.height)&&(c=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var d=Math.ceil(l.width||c.width),p=Math.ceil(l.height||c.height),m=l.pixelRatio,v=void 0===l.x?Math.floor(c.x):l.x,_=void 0===l.y?Math.floor(c.y):l.y,C=l.offset||0,w=l.drawBorder||!1,E=l.hitCanvasPixelRatio||1;if(d&&p){v-=C,_-=C;var I=new si({pixelRatio:m,width:d+=2*C+1,height:p+=2*C+1}),A=new si({pixelRatio:m,width:0,height:0}),b=new ji({pixelRatio:E,width:d,height:p}),O=I.getContext(),P=b.getContext();return b.isCache=!0,I.isCache=!0,this._cache.delete(Ar),this._filterUpToDate=!1,!1===l.imageSmoothingEnabled&&(I.getContext()._context.imageSmoothingEnabled=!1,A.getContext()._context.imageSmoothingEnabled=!1),O.save(),P.save(),O.translate(-v,-_),P.translate(-v,-_),this._isUnderCache=!0,this._clearSelfAndDescendantCache(oi),this._clearSelfAndDescendantCache(Xu),this.drawScene(I,this),this.drawHit(b,this),this._isUnderCache=!1,O.restore(),P.restore(),w&&(O.save(),O.beginPath(),O.rect(0,0,d,p),O.closePath(),O.setAttr("strokeStyle","red"),O.setAttr("lineWidth",5),O.stroke(),O.restore()),this._cache.set(Ar,{scene:I,filter:A,hit:b,x:v,y:_}),this._requestDraw(),this}x.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(Ar)}getClientRect(o){throw new Error('abstract "getClientRect" method call')}_transformedRect(o,l){var d,p,m,v,c=[{x:o.x,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x+o.width,y:o.y+o.height},{x:o.x,y:o.y+o.height}],_=this.getAbsoluteTransform(l);return c.forEach(function(C){var w=_.point(C);void 0===d&&(d=m=w.x,p=v=w.y),d=Math.min(d,w.x),p=Math.min(p,w.y),m=Math.max(m,w.x),v=Math.max(v,w.y)}),{x:d,y:p,width:m-d,height:v-p}}_drawCachedSceneCanvas(o){o.save(),o._applyOpacity(this),o._applyGlobalCompositeOperation(this);const l=this._getCanvasCache();o.translate(l.x,l.y);var c=this._getCachedSceneCanvas(),d=c.pixelRatio;o.drawImage(c._canvas,0,0,c.width/d,c.height/d),o.restore()}_drawCachedHitCanvas(o){var l=this._getCanvasCache(),c=l.hit;o.save(),o.translate(l.x,l.y),o.drawImage(c._canvas,0,0,c.width/c.pixelRatio,c.height/c.pixelRatio),o.restore()}_getCachedSceneCanvas(){var m,v,_,C,o=this.filters(),l=this._getCanvasCache(),c=l.scene,d=l.filter,p=d.getContext();if(o){if(!this._filterUpToDate){var w=c.pixelRatio;d.setSize(c.width/c.pixelRatio,c.height/c.pixelRatio);try{for(m=o.length,p.clear(),p.drawImage(c._canvas,0,0,c.getWidth()/w,c.getHeight()/w),v=p.getImageData(0,0,d.getWidth(),d.getHeight()),_=0;_<m;_++)"function"==typeof(C=o[_])?(C.call(this,v),p.putImageData(v,0,0)):x.error("Filter should be type of function, but got "+typeof C+" instead. Please check correct filters")}catch(E){x.error("Unable to apply filter. "+E.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return d}return c}on(o,l){if(this._cache&&this._cache.delete(Hi),3===arguments.length)return this._delegate.apply(this,arguments);var p,v,_,C,c=o.split(" "),d=c.length;for(p=0;p<d;p++)C=(v=c[p].split("."))[1]||"",this.eventListeners[_=v[0]]||(this.eventListeners[_]=[]),this.eventListeners[_].push({name:C,handler:l});return this}off(o,l){var p,m,_,C,w,c=(o||"").split(" "),d=c.length;if(this._cache&&this._cache.delete(Hi),!o)for(m in this.eventListeners)this._off(m);for(p=0;p<d;p++)if(w=(_=c[p].split("."))[1],C=_[0])this.eventListeners[C]&&this._off(C,w,l);else for(m in this.eventListeners)this._off(m,w,l);return this}dispatchEvent(o){return this.fire(o.type,{target:this,type:o.type,evt:o}),this}addEventListener(o,l){return this.on(o,function(c){l.call(this,c.evt)}),this}removeEventListener(o){return this.off(o),this}_delegate(o,l,c){var d=this;this.on(o,function(p){for(var m=p.target.findAncestors(l,!0,d),v=0;v<m.length;v++)(p=x.cloneObject(p)).currentTarget=m[v],c.call(m[v],p)})}remove(){return this.isDragging()&&this.stopDrag(),Le._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Hn),this._clearSelfAndDescendantCache(oi),this._clearSelfAndDescendantCache(Xu),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(Ui),this._clearSelfAndDescendantCache(so)}_remove(){this._clearCaches();var o=this.getParent();o&&o.children&&(o.children.splice(this.index,1),o._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(o){var l="get"+x._capitalize(o);return x._isFunction(this[l])?this[l]():this.attrs[o]}getAncestors(){for(var o=this.getParent(),l=[];o;)l.push(o),o=o.getParent();return l}getAttrs(){return this.attrs||{}}setAttrs(o){return this._batchTransformChanges(()=>{var l,c;if(!o)return this;for(l in o)"children"!==l&&(c="set"+x._capitalize(l),x._isFunction(this[c])?this[c](o[l]):this._setAttr(l,o[l]))}),this}isListening(){return this._getCache(so,this._isListening)}_isListening(o){if(!this.listening())return!1;const c=this.getParent();return!c||c===o||this===o||c._isListening(o)}isVisible(){return this._getCache(Ui,this._isVisible)}_isVisible(o){if(!this.visible())return!1;const c=this.getParent();return!c||c===o||this===o||c._isVisible(o)}shouldDrawHit(o,l=!1){if(o)return this._isVisible(o)&&this._isListening(o);var c=this.getLayer(),d=!1;Le._dragElements.forEach(m=>{"dragging"===m.dragStatus&&("Stage"===m.node.nodeType||m.node.getLayer()===c)&&(d=!0)});var p=!l&&!Q.hitOnDragEnabled&&d;return this.isListening()&&this.isVisible()&&!p}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var d,p,m,v,o=this.getDepth(),l=this,c=0;return"Stage"!==l.nodeType&&function _(C){for(d=[],p=C.length,m=0;m<p;m++)c++,"Shape"!==(v=C[m]).nodeType&&(d=d.concat(v.getChildren().slice())),v._id===l._id&&(m=p);d.length>0&&d[0].getDepth()<=o&&_(d)}(l.getStage().getChildren()),c}getDepth(){for(var o=0,l=this.parent;l;)o++,l=l.parent;return o}_batchTransformChanges(o){this._batchingTransformChange=!0,o(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Sn),this._clearSelfAndDescendantCache(Hn)),this._needClearTransformCache=!1}setPosition(o){return this._batchTransformChanges(()=>{this.x(o.x),this.y(o.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var o=this.getStage().getPointerPosition();if(!o)return null;var l=this.getAbsoluteTransform().copy();return l.invert(),l.point(o)}getAbsolutePosition(o){let l=!1,c=this.parent;for(;c;){if(c.isCached()){l=!0;break}c=c.parent}l&&!o&&(o=!0);var d=this.getAbsoluteTransform(o).getMatrix(),p=new xt,m=this.offset();return p.m=d.slice(),p.translate(m.x,m.y),p.getTranslation()}setAbsolutePosition(o){var l=this._clearTransform();this.attrs.x=l.x,this.attrs.y=l.y,delete l.x,delete l.y,this._clearCache(Sn);var c=this._getAbsoluteTransform().copy();return c.invert(),c.translate(o.x,o.y),o={x:this.attrs.x+c.getTranslation().x,y:this.attrs.y+c.getTranslation().y},this._setTransform(l),this.setPosition({x:o.x,y:o.y}),this._clearCache(Sn),this._clearSelfAndDescendantCache(Hn),this}_setTransform(o){var l;for(l in o)this.attrs[l]=o[l]}_clearTransform(){var o={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,o}move(o){var l=o.x,c=o.y,d=this.x(),p=this.y();return void 0!==l&&(d+=l),void 0!==c&&(p+=c),this.setPosition({x:d,y:p}),this}_eachAncestorReverse(o,l){var p,m,c=[],d=this.getParent();if(!l||l._id!==this._id){for(c.unshift(this);d&&(!l||d._id!==l._id);)c.unshift(d),d=d.parent;for(p=c.length,m=0;m<p;m++)o(c[m])}}rotate(o){return this.rotation(this.rotation()+o),this}moveToTop(){if(!this.parent)return x.warn("Node has no parent. moveToTop function is ignored."),!1;var o=this.index;return o<this.parent.getChildren().length-1&&(this.parent.children.splice(o,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return x.warn("Node has no parent. moveUp function is ignored."),!1;var o=this.index;return o<this.parent.getChildren().length-1&&(this.parent.children.splice(o,1),this.parent.children.splice(o+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return x.warn("Node has no parent. moveDown function is ignored."),!1;var o=this.index;return o>0&&(this.parent.children.splice(o,1),this.parent.children.splice(o-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return x.warn("Node has no parent. moveToBottom function is ignored."),!1;var o=this.index;return o>0&&(this.parent.children.splice(o,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(o){return this.parent?((o<0||o>=this.parent.children.length)&&x.warn("Unexpected value "+o+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(o,0,this),this.parent._setChildrenIndices(),this):(x.warn("Node has no parent. zIndex parameter is ignored."),this)}getAbsoluteOpacity(){return this._getCache(oi,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var o=this.opacity(),l=this.getParent();return l&&!l._isUnderCache&&(o*=l.getAbsoluteOpacity()),o}moveTo(o){return this.getParent()!==o&&(this._remove(),o.add(this)),this}toObject(){var c,d,p,m,o={},l=this.getAttrs();for(c in o.attrs={},l)(!x.isObject(d=l[c])||x._isPlainObject(d)||x._isArray(d))&&(p="function"==typeof this[c]&&this[c],delete l[c],m=p?p.call(this):null,l[c]=d,m!==d&&(o.attrs[c]=d));return o.className=this.getClassName(),x._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(o,l,c){var d=[];l&&this._isMatch(o)&&d.push(this);for(var p=this.parent;p;){if(p===c)return d;p._isMatch(o)&&d.push(p),p=p.parent}return d}isAncestorOf(o){return!1}findAncestor(o,l,c){return this.findAncestors(o,l,c)[0]}_isMatch(o){if(!o)return!1;if("function"==typeof o)return o(this);var d,p,l=o.replace(/ /g,"").split(","),c=l.length;for(d=0;d<c;d++)if(x.isValidSelector(p=l[d])||(x.warn('Selector "'+p+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),x.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),x.warn("Konva is awesome, right?")),"#"===p.charAt(0)){if(this.id()===p.slice(1))return!0}else if("."===p.charAt(0)){if(this.hasName(p.slice(1)))return!0}else if(this.className===p||this.nodeType===p)return!0;return!1}getLayer(){var o=this.getParent();return o?o.getLayer():null}getStage(){return this._getCache("stage",this._getStage)}_getStage(){var o=this.getParent();if(o)return o.getStage()}fire(o,l={},c){return l.target=l.target||this,c?this._fireAndBubble(o,l):this._fire(o,l),this}getAbsoluteTransform(o){return o?this._getAbsoluteTransform(o):this._getCache(Hn,this._getAbsoluteTransform)}_getAbsoluteTransform(o){var l;if(o)return l=new xt,this._eachAncestorReverse(function(d){var p=d.transformsEnabled();"all"===p?l.multiply(d.getTransform()):"position"===p&&l.translate(d.x()-d.offsetX(),d.y()-d.offsetY())},o),l;l=this._cache.get(Hn)||new xt,this.parent?this.parent.getAbsoluteTransform().copyInto(l):l.reset();var c=this.transformsEnabled();return"all"===c?l.multiply(this.getTransform()):"position"===c&&l.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),l.dirty=!1,l}getAbsoluteScale(o){for(var l=this;l;)l._isUnderCache&&(o=l),l=l.getParent();const d=this.getAbsoluteTransform(o).decompose();return{x:d.scaleX,y:d.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Sn,this._getTransform)}_getTransform(){var o,l,c=this._cache.get(Sn)||new xt;c.reset();var d=this.x(),p=this.y(),m=Q.getAngle(this.rotation()),v=null!==(o=this.attrs.scaleX)&&void 0!==o?o:1,_=null!==(l=this.attrs.scaleY)&&void 0!==l?l:1,C=this.attrs.skewX||0,w=this.attrs.skewY||0,E=this.attrs.offsetX||0,I=this.attrs.offsetY||0;return(0!==d||0!==p)&&c.translate(d,p),0!==m&&c.rotate(m),(0!==C||0!==w)&&c.skew(C,w),(1!==v||1!==_)&&c.scale(v,_),(0!==E||0!==I)&&c.translate(-1*E,-1*I),c.dirty=!1,c}clone(o){var c,d,p,m,v,l=x.cloneObject(this.attrs);for(c in o)l[c]=o[c];var _=new this.constructor(l);for(c in this.eventListeners)for(p=(d=this.eventListeners[c]).length,m=0;m<p;m++)(v=d[m]).name.indexOf("konva")<0&&(_.eventListeners[c]||(_.eventListeners[c]=[]),_.eventListeners[c].push(v));return _}_toKonvaCanvas(o){o=o||{};var l=this.getClientRect(),c=this.getStage(),d=void 0!==o.x?o.x:Math.floor(l.x),p=void 0!==o.y?o.y:Math.floor(l.y),m=o.pixelRatio||1,v=new si({width:o.width||Math.ceil(l.width)||(c?c.width():0),height:o.height||Math.ceil(l.height)||(c?c.height():0),pixelRatio:m}),_=v.getContext();return!1===o.imageSmoothingEnabled&&(_._context.imageSmoothingEnabled=!1),_.save(),(d||p)&&_.translate(-1*d,-1*p),this.drawScene(v),_.restore(),v}toCanvas(o){return this._toKonvaCanvas(o)._canvas}toDataURL(o){var l=(o=o||{}).mimeType||null,c=o.quality||null,d=this._toKonvaCanvas(o).toDataURL(l,c);return o.callback&&o.callback(d),d}toImage(o){return new Promise((l,c)=>{try{const d=o?.callback;d&&delete o.callback,x._urlToImage(this.toDataURL(o),function(p){l(p),d?.(p)})}catch(d){c(d)}})}toBlob(o){return new Promise((l,c)=>{try{const d=o?.callback;d&&delete o.callback,this.toCanvas(o).toBlob(p=>{l(p),d?.(p)})}catch(d){c(d)}})}setSize(o){return this.width(o.width),this.height(o.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Q.dragDistance}_off(o,l,c){var p,m,d=this.eventListeners[o];for(p=0;p<d.length;p++)if(!("konva"===(m=d[p].name)&&"konva"!==l||l&&m!==l||c&&c!==d[p].handler)){if(d.splice(p,1),0===d.length){delete this.eventListeners[o];break}p--}}_fireChangeEvent(o,l,c){this._fire(o+"Change",{oldVal:l,newVal:c})}addName(o){if(!this.hasName(o)){var l=this.name();this.name(l?l+" "+o:o)}return this}hasName(o){if(!o)return!1;const l=this.name();return!!l&&-1!==(l||"").split(/\s/g).indexOf(o)}removeName(o){var l=(this.name()||"").split(/\s/g),c=l.indexOf(o);return-1!==c&&(l.splice(c,1),this.name(l.join(" "))),this}setAttr(o,l){var c=this["set"+x._capitalize(o)];return x._isFunction(c)?c.call(this,l):this._setAttr(o,l),this}_requestDraw(){Q.autoDrawEnabled&&(this.getLayer()||this.getStage())?.batchDraw()}_setAttr(o,l){var c=this.attrs[o];c===l&&!x.isObject(l)||(null==l?delete this.attrs[o]:this.attrs[o]=l,this._shouldFireChangeEvents&&this._fireChangeEvent(o,c,l),this._requestDraw())}_setComponentAttr(o,l,c){var d;void 0!==c&&((d=this.attrs[o])||(this.attrs[o]=this.getAttr(o)),this.attrs[o][l]=c,this._fireChangeEvent(o,d,c))}_fireAndBubble(o,l,c){if(l&&"Shape"===this.nodeType&&(l.target=this),o!==Zu&&o!==La||!(c&&(this===c||this.isAncestorOf&&this.isAncestorOf(c))||"Stage"===this.nodeType&&!c)){this._fire(o,l);var p=(o===Zu||o===La)&&c&&c.isAncestorOf&&c.isAncestorOf(this)&&!c.isAncestorOf(this.parent);(l&&!l.cancelBubble||!l)&&this.parent&&this.parent.isListening()&&!p&&(c&&c.parent?this._fireAndBubble.call(this.parent,o,l,c):this._fireAndBubble.call(this.parent,o,l))}}_getProtoListeners(o){let l=this._cache.get(Hi);if(!l){l={};let d=Object.getPrototypeOf(this);for(;d;)if(d.eventListeners){for(var c in d.eventListeners)l[c]=d.eventListeners[c].concat(l[c]||[]);d=Object.getPrototypeOf(d)}else d=Object.getPrototypeOf(d);this._cache.set(Hi,l)}return l[o]}_fire(o,l){(l=l||{}).currentTarget=this,l.type=o;const c=this._getProtoListeners(o);if(c)for(var d=0;d<c.length;d++)c[d].handler.call(this,l);const p=this.eventListeners[o];if(p)for(d=0;d<p.length;d++)p[d].handler.call(this,l)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(o){var l=o?o.pointerId:void 0,c=this.getStage(),d=this.getAbsolutePosition(),p=c._getPointerById(l)||c._changedPointerPositions[0]||d;Le._dragElements.set(this._id,{node:this,startPointerPos:p,offset:{x:p.x-d.x,y:p.y-d.y},dragStatus:"ready",pointerId:l})}startDrag(o,l=!0){Le._dragElements.has(this._id)||this._createDragElement(o),Le._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:o&&o.evt},l)}_setDragPosition(o,l){const c=this.getStage()._getPointerById(l.pointerId);if(c){var d={x:c.x-l.offset.x,y:c.y-l.offset.y},p=this.dragBoundFunc();if(void 0!==p){const m=p.call(this,d,o);m?d=m:x.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==d.x||this._lastPos.y!==d.y)&&(this.setAbsolutePosition(d),this._requestDraw()),this._lastPos=d}}stopDrag(o){const l=Le._dragElements.get(this._id);l&&(l.dragStatus="stopped"),Le._endDragBefore(o),Le._endDragAfter(o)}setDraggable(o){this._setAttr("draggable",o),this._dragChange()}isDragging(){const o=Le._dragElements.get(this._id);return!!o&&"dragging"===o.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(o){if((void 0===o.evt.button||Q.dragButtons.indexOf(o.evt.button)>=0)&&!this.isDragging()){var d=!1;Le._dragElements.forEach(p=>{this.isAncestorOf(p.node)&&(d=!0)}),d||this._createDragElement(o)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const l=Le._dragElements.get(this._id),d=l&&"ready"===l.dragStatus;l&&"dragging"===l.dragStatus?this.stopDrag():d&&Le._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(o={x:0,y:0}){const l=this.getStage();if(!l)return!1;const c={x:-o.x,y:-o.y,width:l.width()+2*o.x,height:l.height()+2*o.y};return x.haveIntersection(c,this.getClientRect())}static create(o,l){return x._isString(o)&&(o=JSON.parse(o)),this._createNode(o,l)}static _createNode(o,l){var p,m,v,c=G.prototype.getClassName.call(o),d=o.children;if(l&&(o.attrs.container=l),Q[c]||(x.warn('Can not find a node with class name "'+c+'". Fallback to "Shape".'),c="Shape"),p=new(0,Q[c])(o.attrs),d)for(m=d.length,v=0;v<m;v++)p.add(G._createNode(d[v]));return p}}G.prototype.nodeType="Node",G.prototype._attrsAffectingSize=[],G.prototype.eventListeners={},G.prototype.on.call(G.prototype,ja,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(Sn),this._clearSelfAndDescendantCache(Hn))}),G.prototype.on.call(G.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Ui)}),G.prototype.on.call(G.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(so)}),G.prototype.on.call(G.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(oi)});const $e=M.addGetterSetter;$e(G,"zIndex"),$e(G,"absolutePosition"),$e(G,"position"),$e(G,"x",0,V()),$e(G,"y",0,V()),$e(G,"globalCompositeOperation","source-over",zt()),$e(G,"opacity",1,V()),$e(G,"name","",zt()),$e(G,"id","",zt()),$e(G,"rotation",0,V()),M.addComponentsGetterSetter(G,"scale",["x","y"]),$e(G,"scaleX",1,V()),$e(G,"scaleY",1,V()),M.addComponentsGetterSetter(G,"skew",["x","y"]),$e(G,"skewX",0,V()),$e(G,"skewY",0,V()),M.addComponentsGetterSetter(G,"offset",["x","y"]),$e(G,"offsetX",0,V()),$e(G,"offsetY",0,V()),$e(G,"dragDistance",null,V()),$e(G,"width",0,V()),$e(G,"height",0,V()),$e(G,"listening",!0,Wt()),$e(G,"preventDefault",!0,Wt()),$e(G,"filters",null,function(f){return this._filterUpToDate=!1,f}),$e(G,"visible",!0,Wt()),$e(G,"transformsEnabled","all",zt()),$e(G,"size"),$e(G,"dragBoundFunc"),$e(G,"draggable",!1,Wt()),M.backCompat(G,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Rt extends G{constructor(){super(...arguments),this.children=[]}getChildren(o){if(!o)return this.children||[];var c=[];return(this.children||[]).forEach(function(d){o(d)&&c.push(d)}),c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(0===o.length)return this;if(o.length>1){for(var l=0;l<o.length;l++)this.add(o[l]);return this}const c=o[0];return c.getParent()?(c.moveTo(this),this):(this._validateAdd(c),c.index=this.getChildren().length,c.parent=this,c._clearCaches(),this.getChildren().push(c),this._fire("add",{child:c}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){var l=this._generalFind(o,!0);return l.length>0?l[0]:void 0}_generalFind(o,l){var c=[];return this._descendants(d=>{const p=d._isMatch(o);return p&&c.push(d),!(!p||!l)}),c}_descendants(o){let l=!1;const c=this.getChildren();for(const d of c){if(l=o(d),l)return!0;if(d.hasChildren()&&(l=d._descendants(o),l))return!0}return!1}toObject(){var o=G.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(l=>{o.children.push(l.toObject())}),o}isAncestorOf(o){for(var l=o.getParent();l;){if(l._id===this._id)return!0;l=l.getParent()}return!1}clone(o){var l=G.prototype.clone.call(this,o);return this.getChildren().forEach(function(c){l.add(c.clone())}),l}getAllIntersections(o){var l=[];return this.find("Shape").forEach(function(c){c.isVisible()&&c.intersects(o)&&l.push(c)}),l}_clearSelfAndDescendantCache(o){var l;super._clearSelfAndDescendantCache(o),!this.isCached()&&(null===(l=this.children)||void 0===l||l.forEach(function(c){c._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;null===(o=this.children)||void 0===o||o.forEach(function(l,c){l.index=c}),this._requestDraw()}drawScene(o,l){var c=this.getLayer(),d=o||c&&c.getCanvas(),p=d&&d.getContext(),m=this._getCanvasCache(),v=m&&m.scene,_=d&&d.isCache;if(!this.isVisible()&&!_)return this;if(v){p.save();var C=this.getAbsoluteTransform(l).getMatrix();p.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(p),p.restore()}else this._drawChildren("drawScene",d,l);return this}drawHit(o,l){if(!this.shouldDrawHit(l))return this;var c=this.getLayer(),d=o||c&&c.hitCanvas,p=d&&d.getContext(),m=this._getCanvasCache();if(m&&m.hit){p.save();var _=this.getAbsoluteTransform(l).getMatrix();p.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(p),p.restore()}else this._drawChildren("drawHit",d,l);return this}_drawChildren(o,l,c){var d,p=l&&l.getContext(),m=this.clipWidth(),v=this.clipHeight(),_=this.clipFunc(),C=m&&v||_;const w=c===this;if(C){p.save();var E=this.getAbsoluteTransform(c),I=E.getMatrix();if(p.transform(I[0],I[1],I[2],I[3],I[4],I[5]),p.beginPath(),_)_.call(this,p,this);else{var A=this.clipX(),b=this.clipY();p.rect(A,b,m,v)}p.clip(),I=E.copy().invert().getMatrix(),p.transform(I[0],I[1],I[2],I[3],I[4],I[5])}var O=!w&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===o;O&&(p.save(),p._applyGlobalCompositeOperation(this)),null===(d=this.children)||void 0===d||d.forEach(function(P){P[o](l,c)}),O&&p.restore(),C&&p.restore()}getClientRect(o){var l,p,m,v,_,C,c=(o=o||{}).skipTransform,d=o.relativeTo,w=this;null===(l=this.children)||void 0===l||l.forEach(function(O){if(O.visible()){var P=O.getClientRect({relativeTo:w,skipShadow:o.skipShadow,skipStroke:o.skipStroke});0===P.width&&0===P.height||(void 0===p?(p=P.x,m=P.y,v=P.x+P.width,_=P.y+P.height):(p=Math.min(p,P.x),m=Math.min(m,P.y),v=Math.max(v,P.x+P.width),_=Math.max(_,P.y+P.height)))}});for(var E=this.find("Shape"),I=!1,A=0;A<E.length;A++)if(E[A]._isVisible(this)){I=!0;break}return C=I&&void 0!==p?{x:p,y:m,width:v-p,height:_-m}:{x:0,y:0,width:0,height:0},c?C:this._transformedRect(C,d)}}M.addComponentsGetterSetter(Rt,"clip",["x","y","width","height"]),M.addGetterSetter(Rt,"clipX",void 0,V()),M.addGetterSetter(Rt,"clipY",void 0,V()),M.addGetterSetter(Rt,"clipWidth",void 0,V()),M.addGetterSetter(Rt,"clipHeight",void 0,V()),M.addGetterSetter(Rt,"clipFunc");const xr=new Map,ao=void 0!==Q._global.PointerEvent;function jt(f){return xr.get(f)}function lo(f){return{evt:f,pointerId:f.pointerId}}function Ua(f,o){return xr.get(f)===o}function $a(f,o){ai(f),o.getStage()&&(xr.set(f,o),ao&&o._fire("gotpointercapture",lo(new PointerEvent("gotpointercapture"))))}function ai(f,o){const l=xr.get(f);l&&(l.getStage(),xr.delete(f),ao&&l._fire("lostpointercapture",lo(new PointerEvent("lostpointercapture"))))}var za="mouseleave",ht="mouseover",sr="mouseenter",Jt="mousemove",rc="mousedown",Wa="mouseup",li="pointermove",or="pointerdown",Rr="pointerup",En="pointercancel",ui="pointerout",ci="pointerleave",$i="pointerover",Vi="pointerenter",uo="contextmenu",qa="touchstart",co="touchend",Ya="touchmove",Ka="touchcancel",Ze="wheel",oc=[[sr,"_pointerenter"],[rc,"_pointerdown"],[Jt,"_pointermove"],[Wa,"_pointerup"],[za,"_pointerleave"],[qa,"_pointerdown"],[Ya,"_pointermove"],[co,"_pointerup"],[Ka,"_pointercancel"],[ht,"_pointerover"],[Ze,"_wheel"],[uo,"_contextmenu"],[or,"_pointerdown"],[li,"_pointermove"],[Rr,"_pointerup"],[En,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const di={mouse:{[ui]:"mouseout",[ci]:za,[$i]:ht,[Vi]:sr,[li]:Jt,[or]:rc,[Rr]:Wa,[En]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[ui]:"touchout",[ci]:"touchleave",[$i]:"touchover",[Vi]:"touchenter",[li]:Ya,[or]:qa,[Rr]:co,[En]:Ka,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[ui]:ui,[ci]:ci,[$i]:$i,[Vi]:Vi,[li]:li,[or]:or,[Rr]:Rr,[En]:En,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Be=f=>f.indexOf("pointer")>=0?"pointer":f.indexOf("touch")>=0?"touch":"mouse",Un=f=>{const o=Be(f);return"pointer"===o?Q.pointerEventsEnabled&&di.pointer:"touch"===o?di.touch:"mouse"===o?di.mouse:void 0};function Ge(f={}){return(f.clipFunc||f.clipWidth||f.clipHeight)&&x.warn("Stage does not support clipping. Please use clip for Layers or Groups."),f}const Gi=[];class Pr extends Rt{constructor(o){super(Ge(o)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Gi.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ge(this.attrs)}),this._checkVisibility()}_validateAdd(o){const l="Layer"===o.getType(),c="FastLayer"===o.getType();l||c||x.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const o=this.visible()?"":"none";this.content.style.display=o}setContainer(o){if("string"==typeof o){if("."===o.charAt(0)){var l=o.slice(1);o=document.getElementsByClassName(l)[0]}else{var c;c="#"!==o.charAt(0)?o:o.slice(1),o=document.getElementById(c)}if(!o)throw"Can not find container in document with id "+c}return this._setAttr("container",o),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),o.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var c,o=this.children,l=o.length;for(c=0;c<l;c++)o[c].clear();return this}clone(o){return o||(o={}),o.container=typeof document<"u"&&document.createElement("div"),Rt.prototype.clone.call(this,o)}destroy(){super.destroy();var o=this.content;o&&x._isInDocument(o)&&this.container().removeChild(o);var l=Gi.indexOf(this);return l>-1&&Gi.splice(l,1),x.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const o=this._pointerPositions[0]||this._changedPointerPositions[0];return o?{x:o.x,y:o.y}:(x.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(o){return this._pointerPositions.find(l=>l.id===o)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(o){(o=o||{}).x=o.x||0,o.y=o.y||0,o.width=o.width||this.width(),o.height=o.height||this.height();var l=new si({width:o.width,height:o.height,pixelRatio:o.pixelRatio||1}),c=l.getContext()._context,d=this.children;return(o.x||o.y)&&c.translate(-1*o.x,-1*o.y),d.forEach(function(p){if(p.isVisible()){var m=p._toKonvaCanvas(o);c.drawImage(m._canvas,o.x,o.y,m.getWidth()/m.getPixelRatio(),m.getHeight()/m.getPixelRatio())}}),l}getIntersection(o){if(!o)return null;var p,l=this.children;for(p=l.length-1;p>=0;p--){const m=l[p].getIntersection(o);if(m)return m}return null}_resizeDOM(){var o=this.width(),l=this.height();this.content&&(this.content.style.width=o+"px",this.content.style.height=l+"px"),this.bufferCanvas.setSize(o,l),this.bufferHitCanvas.setSize(o,l),this.children.forEach(c=>{c.setSize({width:o,height:l}),c.draw()})}add(o,...l){if(arguments.length>1){for(var c=0;c<arguments.length;c++)this.add(arguments[c]);return this}super.add(o);var d=this.children.length;return d>5&&x.warn("The stage has "+d+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),o.setSize({width:this.width(),height:this.height()}),o.draw(),Q.isBrowser&&this.content.appendChild(o.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(o){return Ua(o,this)}setPointerCapture(o){$a(o,this)}releaseCapture(o){ai(o)}getLayers(){return this.children}_bindContentEvents(){Q.isBrowser&&oc.forEach(([o,l])=>{this.content.addEventListener(o,c=>{this[l](c)},{passive:!1})})}_pointerenter(o){this.setPointersPositions(o);const l=Un(o.type);this._fire(l.pointerenter,{evt:o,target:this,currentTarget:this})}_pointerover(o){this.setPointersPositions(o);const l=Un(o.type);this._fire(l.pointerover,{evt:o,target:this,currentTarget:this})}_getTargetShape(o){let l=this[o+"targetShape"];return l&&!l.getStage()&&(l=null),l}_pointerleave(o){const l=Un(o.type),c=Be(o.type);if(l){this.setPointersPositions(o);var d=this._getTargetShape(c),p=!Le.isDragging||Q.hitOnDragEnabled;d&&p?(d._fireAndBubble(l.pointerout,{evt:o}),d._fireAndBubble(l.pointerleave,{evt:o}),this._fire(l.pointerleave,{evt:o,target:this,currentTarget:this}),this[c+"targetShape"]=null):p&&(this._fire(l.pointerleave,{evt:o,target:this,currentTarget:this}),this._fire(l.pointerout,{evt:o,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(o){const l=Un(o.type),c=Be(o.type);if(l){this.setPointersPositions(o);var d=!1;this._changedPointerPositions.forEach(p=>{var m=this.getIntersection(p);if(Le.justDragged=!1,Q["_"+c+"ListenClick"]=!0,!m||!m.isListening())return;Q.capturePointerEventsEnabled&&m.setPointerCapture(p.id),this[c+"ClickStartShape"]=m,m._fireAndBubble(l.pointerdown,{evt:o,pointerId:p.id}),d=!0;const _=o.type.indexOf("touch")>=0;m.preventDefault()&&o.cancelable&&_&&o.preventDefault()}),d||this._fire(l.pointerdown,{evt:o,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(o){const l=Un(o.type),c=Be(o.type);if(!l)return;if(Le.isDragging&&Le.node.preventDefault()&&o.cancelable&&o.preventDefault(),this.setPointersPositions(o),Le.isDragging&&!Q.hitOnDragEnabled)return;var p={};let m=!1;var v=this._getTargetShape(c);this._changedPointerPositions.forEach(_=>{const C=jt(_.id)||this.getIntersection(_),w=_.id,E={evt:o,pointerId:w};var I=v!==C;if(I&&v&&(v._fireAndBubble(l.pointerout,Object.assign({},E),C),v._fireAndBubble(l.pointerleave,Object.assign({},E),C)),C){if(p[C._id])return;p[C._id]=!0}C&&C.isListening()?(m=!0,I&&(C._fireAndBubble(l.pointerover,Object.assign({},E),v),C._fireAndBubble(l.pointerenter,Object.assign({},E),v),this[c+"targetShape"]=C),C._fireAndBubble(l.pointermove,Object.assign({},E))):v&&(this._fire(l.pointerover,{evt:o,target:this,currentTarget:this,pointerId:w}),this[c+"targetShape"]=null)}),m||this._fire(l.pointermove,{evt:o,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(o){const l=Un(o.type),c=Be(o.type);if(!l)return;this.setPointersPositions(o);const d=this[c+"ClickStartShape"],p=this[c+"ClickEndShape"];var m={};let v=!1;this._changedPointerPositions.forEach(_=>{const C=jt(_.id)||this.getIntersection(_);if(C){if(C.releaseCapture(_.id),m[C._id])return;m[C._id]=!0}const w=_.id,E={evt:o,pointerId:w};let I=!1;Q["_"+c+"InDblClickWindow"]?(I=!0,clearTimeout(this[c+"DblTimeout"])):Le.justDragged||(Q["_"+c+"InDblClickWindow"]=!0,clearTimeout(this[c+"DblTimeout"])),this[c+"DblTimeout"]=setTimeout(function(){Q["_"+c+"InDblClickWindow"]=!1},Q.dblClickWindow),C&&C.isListening()?(v=!0,this[c+"ClickEndShape"]=C,C._fireAndBubble(l.pointerup,Object.assign({},E)),Q["_"+c+"ListenClick"]&&d&&d===C&&(C._fireAndBubble(l.pointerclick,Object.assign({},E)),I&&p&&p===C&&C._fireAndBubble(l.pointerdblclick,Object.assign({},E)))):(this[c+"ClickEndShape"]=null,Q["_"+c+"ListenClick"]&&this._fire(l.pointerclick,{evt:o,target:this,currentTarget:this,pointerId:w}),I&&this._fire(l.pointerdblclick,{evt:o,target:this,currentTarget:this,pointerId:w}))}),v||this._fire(l.pointerup,{evt:o,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Q["_"+c+"ListenClick"]=!1,o.cancelable&&"touch"!==c&&o.preventDefault()}_contextmenu(o){this.setPointersPositions(o);var l=this.getIntersection(this.getPointerPosition());l&&l.isListening()?l._fireAndBubble(uo,{evt:o}):this._fire(uo,{evt:o,target:this,currentTarget:this})}_wheel(o){this.setPointersPositions(o);var l=this.getIntersection(this.getPointerPosition());l&&l.isListening()?l._fireAndBubble(Ze,{evt:o}):this._fire(Ze,{evt:o,target:this,currentTarget:this})}_pointercancel(o){this.setPointersPositions(o);const l=jt(o.pointerId)||this.getIntersection(this.getPointerPosition());l&&l._fireAndBubble(Rr,lo(o)),ai(o.pointerId)}_lostpointercapture(o){ai(o.pointerId)}setPointersPositions(o){var l=this._getContentPosition(),c=null,d=null;void 0!==(o=o||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(o.touches,p=>{this._pointerPositions.push({id:p.identifier,x:(p.clientX-l.left)/l.scaleX,y:(p.clientY-l.top)/l.scaleY})}),Array.prototype.forEach.call(o.changedTouches||o.touches,p=>{this._changedPointerPositions.push({id:p.identifier,x:(p.clientX-l.left)/l.scaleX,y:(p.clientY-l.top)/l.scaleY})})):(this.pointerPos={x:c=(o.clientX-l.left)/l.scaleX,y:d=(o.clientY-l.top)/l.scaleY},this._pointerPositions=[{x:c,y:d,id:x._getFirstPointerId(o)}],this._changedPointerPositions=[{x:c,y:d,id:x._getFirstPointerId(o)}])}_setPointerPosition(o){x.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(o)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var o=this.content.getBoundingClientRect();return{top:o.top,left:o.left,scaleX:o.width/this.content.clientWidth||1,scaleY:o.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new si({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ji({pixelRatio:1,width:this.width(),height:this.height()}),Q.isBrowser){var o=this.container();if(!o)throw"Stage has no container. A container is required.";o.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),o.appendChild(this.content),this._resizeDOM()}}cache(){return x.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(o){o.batchDraw()}),this}}Pr.prototype.nodeType="Stage",Re(Pr),M.addGetterSetter(Pr,"container");var ae="hasShadow",zi="shadowRGBA",Wi="patternImage",ac="linearGradient",fo="radialGradient";let W;function Or(){return W||(W=x.createCanvasElement().getContext("2d"),W)}const fe={};class B extends G{constructor(o){let l;for(super(o);l=x.getRandomColor(),!l||l in fe;);this.colorKey=l,fe[l]=this}getContext(){return x.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return x.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ae,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Wi,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const l=Or().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(l&&l.setTransform){const c=new xt;c.translate(this.fillPatternX(),this.fillPatternY()),c.rotate(Q.getAngle(this.fillPatternRotation())),c.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),c.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const d=c.getMatrix(),p=typeof DOMMatrix>"u"?{a:d[0],b:d[1],c:d[2],d:d[3],e:d[4],f:d[5]}:new DOMMatrix(d);l.setTransform(p)}return l}}_getLinearGradient(){return this._getCache(ac,this.__getLinearGradient)}__getLinearGradient(){var o=this.fillLinearGradientColorStops();if(o){for(var l=Or(),c=this.fillLinearGradientStartPoint(),d=this.fillLinearGradientEndPoint(),p=l.createLinearGradient(c.x,c.y,d.x,d.y),m=0;m<o.length;m+=2)p.addColorStop(o[m],o[m+1]);return p}}_getRadialGradient(){return this._getCache(fo,this.__getRadialGradient)}__getRadialGradient(){var o=this.fillRadialGradientColorStops();if(o){for(var l=Or(),c=this.fillRadialGradientStartPoint(),d=this.fillRadialGradientEndPoint(),p=l.createRadialGradient(c.x,c.y,this.fillRadialGradientStartRadius(),d.x,d.y,this.fillRadialGradientEndRadius()),m=0;m<o.length;m+=2)p.addColorStop(o[m],o[m+1]);return p}}getShadowRGBA(){return this._getCache(zi,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var o=x.colorToRGBA(this.shadowColor());if(o)return"rgba("+o.r+","+o.g+","+o.b+","+o.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const o=this.hitStrokeWidth();return"auto"===o?this.hasStroke():this.strokeEnabled()&&!!o}intersects(o){var c=this.getStage().bufferHitCanvas;return c.getContext().clear(),this.drawHit(c,null,!0),c.context.getImageData(Math.round(o.x),Math.round(o.y),1,1).data[3]>0}destroy(){return G.prototype.destroy.call(this),delete fe[this.colorKey],delete this.colorKey,this}_useBufferCanvas(o){var l;if(!this.getStage()||null!==(l=this.attrs.perfectDrawEnabled)&&void 0!==l&&!l)return!1;const d=o||this.hasFill(),p=this.hasStroke(),m=1!==this.getAbsoluteOpacity();if(d&&p&&m)return!0;const v=this.hasShadow(),_=this.shadowForStrokeEnabled();return!!(d&&p&&v&&_)}setStrokeHitEnabled(o){x.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(o?"auto":0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var o=this.size();return{x:this._centroid?-o.width/2:0,y:this._centroid?-o.height/2:0,width:o.width,height:o.height}}getClientRect(o={}){const l=o.skipTransform,c=o.relativeTo,d=this.getSelfRect(),m=!o.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,v=d.width+m,_=d.height+m,C=!o.skipShadow&&this.hasShadow(),w=C?this.shadowOffsetX():0,E=C?this.shadowOffsetY():0,I=v+Math.abs(w),A=_+Math.abs(E),b=C&&this.shadowBlur()||0,z={width:I+2*b,height:A+2*b,x:-(m/2+b)+Math.min(w,0)+d.x,y:-(m/2+b)+Math.min(E,0)+d.y};return l?z:this._transformedRect(z,c)}drawScene(o,l){var w,E,c=this.getLayer(),d=o||c.getCanvas(),p=d.getContext(),m=this._getCanvasCache(),v=this.getSceneFunc(),_=this.hasShadow(),I=d.isCache,A=l===this;if(!this.isVisible()&&!A)return this;if(m){p.save();var b=this.getAbsoluteTransform(l).getMatrix();return p.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedSceneCanvas(p),p.restore(),this}if(!v)return this;if(p.save(),this._useBufferCanvas()&&!I){(E=(w=this.getStage().bufferCanvas).getContext()).clear(),E.save(),E._applyLineJoin(this);var O=this.getAbsoluteTransform(l).getMatrix();E.transform(O[0],O[1],O[2],O[3],O[4],O[5]),v.call(this,E,this),E.restore();var P=w.pixelRatio;_&&p._applyShadow(this),p._applyOpacity(this),p._applyGlobalCompositeOperation(this),p.drawImage(w._canvas,0,0,w.width/P,w.height/P)}else p._applyLineJoin(this),A||(O=this.getAbsoluteTransform(l).getMatrix(),p.transform(O[0],O[1],O[2],O[3],O[4],O[5]),p._applyOpacity(this),p._applyGlobalCompositeOperation(this)),_&&p._applyShadow(this),v.call(this,p,this);return p.restore(),this}drawHit(o,l,c=!1){if(!this.shouldDrawHit(l,c))return this;var d=this.getLayer(),p=o||d.hitCanvas,m=p&&p.getContext(),v=this.hitFunc()||this.sceneFunc(),_=this._getCanvasCache(),C=_&&_.hit;if(this.colorKey||x.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),C){m.save();var w=this.getAbsoluteTransform(l).getMatrix();return m.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(m),m.restore(),this}if(!v)return this;if(m.save(),m._applyLineJoin(this),this!==l){var I=this.getAbsoluteTransform(l).getMatrix();m.transform(I[0],I[1],I[2],I[3],I[4],I[5])}return v.call(this,m,this),m.restore(),this}drawHitFromCache(o=0){var _,C,w,E,I,l=this._getCanvasCache(),c=this._getCachedSceneCanvas(),d=l.hit,p=d.getContext(),m=d.getWidth(),v=d.getHeight();p.clear(),p.drawImage(c._canvas,0,0,m,v);try{for(w=(C=(_=p.getImageData(0,0,m,v)).data).length,E=x._hexToRgb(this.colorKey),I=0;I<w;I+=4)C[I+3]>o?(C[I]=E.r,C[I+1]=E.g,C[I+2]=E.b,C[I+3]=255):C[I+3]=0;p.putImageData(_,0,0)}catch(b){x.error("Unable to draw hit graph from cached scene canvas. "+b.message)}return this}hasPointerCapture(o){return Ua(o,this)}setPointerCapture(o){$a(o,this)}releaseCapture(o){ai(o)}}B.prototype._fillFunc=function He(f){f.fill()},B.prototype._strokeFunc=function lc(f){f.stroke()},B.prototype._fillFuncHit=function Zf(f){f.fill()},B.prototype._strokeFuncHit=function uc(f){f.stroke()},B.prototype._centroid=!1,B.prototype.nodeType="Shape",Re(B),B.prototype.eventListeners={},B.prototype.on.call(B.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function qi(){this._clearCache(ae)}),B.prototype.on.call(B.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function Ht(){this._clearCache(zi)}),B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function Jf(){this._clearCache(Wi)}),B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function cc(){this._clearCache(ac)}),B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function ep(){this._clearCache(fo)}),M.addGetterSetter(B,"stroke",void 0,Na()),M.addGetterSetter(B,"strokeWidth",2,V()),M.addGetterSetter(B,"fillAfterStrokeEnabled",!1),M.addGetterSetter(B,"hitStrokeWidth","auto",ni()),M.addGetterSetter(B,"strokeHitEnabled",!0,Wt()),M.addGetterSetter(B,"perfectDrawEnabled",!0,Wt()),M.addGetterSetter(B,"shadowForStrokeEnabled",!0,Wt()),M.addGetterSetter(B,"lineJoin"),M.addGetterSetter(B,"lineCap"),M.addGetterSetter(B,"sceneFunc"),M.addGetterSetter(B,"hitFunc"),M.addGetterSetter(B,"dash"),M.addGetterSetter(B,"dashOffset",0,V()),M.addGetterSetter(B,"shadowColor",void 0,zt()),M.addGetterSetter(B,"shadowBlur",0,V()),M.addGetterSetter(B,"shadowOpacity",1,V()),M.addComponentsGetterSetter(B,"shadowOffset",["x","y"]),M.addGetterSetter(B,"shadowOffsetX",0,V()),M.addGetterSetter(B,"shadowOffsetY",0,V()),M.addGetterSetter(B,"fillPatternImage"),M.addGetterSetter(B,"fill",void 0,Na()),M.addGetterSetter(B,"fillPatternX",0,V()),M.addGetterSetter(B,"fillPatternY",0,V()),M.addGetterSetter(B,"fillLinearGradientColorStops"),M.addGetterSetter(B,"strokeLinearGradientColorStops"),M.addGetterSetter(B,"fillRadialGradientStartRadius",0),M.addGetterSetter(B,"fillRadialGradientEndRadius",0),M.addGetterSetter(B,"fillRadialGradientColorStops"),M.addGetterSetter(B,"fillPatternRepeat","repeat"),M.addGetterSetter(B,"fillEnabled",!0),M.addGetterSetter(B,"strokeEnabled",!0),M.addGetterSetter(B,"shadowEnabled",!0),M.addGetterSetter(B,"dashEnabled",!0),M.addGetterSetter(B,"strokeScaleEnabled",!0),M.addGetterSetter(B,"fillPriority","color"),M.addComponentsGetterSetter(B,"fillPatternOffset",["x","y"]),M.addGetterSetter(B,"fillPatternOffsetX",0,V()),M.addGetterSetter(B,"fillPatternOffsetY",0,V()),M.addComponentsGetterSetter(B,"fillPatternScale",["x","y"]),M.addGetterSetter(B,"fillPatternScaleX",1,V()),M.addGetterSetter(B,"fillPatternScaleY",1,V()),M.addComponentsGetterSetter(B,"fillLinearGradientStartPoint",["x","y"]),M.addComponentsGetterSetter(B,"strokeLinearGradientStartPoint",["x","y"]),M.addGetterSetter(B,"fillLinearGradientStartPointX",0),M.addGetterSetter(B,"strokeLinearGradientStartPointX",0),M.addGetterSetter(B,"fillLinearGradientStartPointY",0),M.addGetterSetter(B,"strokeLinearGradientStartPointY",0),M.addComponentsGetterSetter(B,"fillLinearGradientEndPoint",["x","y"]),M.addComponentsGetterSetter(B,"strokeLinearGradientEndPoint",["x","y"]),M.addGetterSetter(B,"fillLinearGradientEndPointX",0),M.addGetterSetter(B,"strokeLinearGradientEndPointX",0),M.addGetterSetter(B,"fillLinearGradientEndPointY",0),M.addGetterSetter(B,"strokeLinearGradientEndPointY",0),M.addComponentsGetterSetter(B,"fillRadialGradientStartPoint",["x","y"]),M.addGetterSetter(B,"fillRadialGradientStartPointX",0),M.addGetterSetter(B,"fillRadialGradientStartPointY",0),M.addComponentsGetterSetter(B,"fillRadialGradientEndPoint",["x","y"]),M.addGetterSetter(B,"fillRadialGradientEndPointX",0),M.addGetterSetter(B,"fillRadialGradientEndPointY",0),M.addGetterSetter(B,"fillPatternRotation",0),M.backCompat(B,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var dc=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],hc=dc.length;class Nr extends Rt{constructor(o){super(o),this.canvas=new si,this.hitCanvas=new ji({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(o){return this.getContext().clear(o),this.getHitCanvas().getContext().clear(o),this}setZIndex(o){super.setZIndex(o);var l=this.getStage();return l&&l.content&&(l.content.removeChild(this.getNativeCanvasElement()),o<l.children.length-1?l.content.insertBefore(this.getNativeCanvasElement(),l.children[o+1].getCanvas()._canvas):l.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){G.prototype.moveToTop.call(this);var o=this.getStage();return o&&o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!G.prototype.moveUp.call(this))return!1;var l=this.getStage();return!(!l||!l.content||(l.content.removeChild(this.getNativeCanvasElement()),this.index<l.children.length-1?l.content.insertBefore(this.getNativeCanvasElement(),l.children[this.index+1].getCanvas()._canvas):l.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(G.prototype.moveDown.call(this)){var o=this.getStage();if(o){var l=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),l[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(G.prototype.moveToBottom.call(this)){var o=this.getStage();if(o){var l=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),l[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var o=this.getNativeCanvasElement();return G.prototype.remove.call(this),o&&o.parentNode&&x._isInDocument(o)&&o.parentNode.removeChild(o),this}getStage(){return this.parent}setSize({width:o,height:l}){return this.canvas.setSize(o,l),this.hitCanvas.setSize(o,l),this._setSmoothEnabled(),this}_validateAdd(o){var l=o.getType();"Group"!==l&&"Shape"!==l&&x.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(o){return(o=o||{}).width=o.width||this.getWidth(),o.height=o.height||this.getHeight(),o.x=void 0!==o.x?o.x:this.x(),o.y=void 0!==o.y?o.y:this.y(),G.prototype._toKonvaCanvas.call(this,o)}_checkVisibility(){this.canvas._canvas.style.display=this.visible()?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){x.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){x.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,x.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(o){if(!this.isListening()||!this.isVisible())return null;for(var l=1,c=!1;;){for(let d=0;d<hc;d++){const p=dc[d],m=this._getIntersection({x:o.x+p.x*l,y:o.y+p.y*l}),v=m.shape;if(v)return v;if(c=!!m.antialiased,!m.antialiased)break}if(!c)return null;l+=1}}_getIntersection(o){const l=this.hitCanvas.pixelRatio,c=this.hitCanvas.context.getImageData(Math.round(o.x*l),Math.round(o.y*l),1,1).data,d=c[3];if(255===d){const p=x._rgbToHex(c[0],c[1],c[2]),m=fe["#"+p];return m?{shape:m}:{antialiased:!0}}return d>0?{antialiased:!0}:{}}drawScene(o,l){var c=this.getLayer(),d=o||c&&c.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&d.getContext().clear(),Rt.prototype.drawScene.call(this,d,l),this._fire("draw",{node:this}),this}drawHit(o,l){var c=this.getLayer(),d=o||c&&c.hitCanvas;return c&&c.clearBeforeDraw()&&c.getHitCanvas().getContext().clear(),Rt.prototype.drawHit.call(this,d,l),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(o){x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(o)}getHitGraphEnabled(o){return x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var o=this.parent;this.hitCanvas._canvas.parentNode?o.content.removeChild(this.hitCanvas._canvas):o.content.appendChild(this.hitCanvas._canvas)}}destroy(){return x.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Nr.prototype.nodeType="Layer",Re(Nr),M.addGetterSetter(Nr,"imageSmoothingEnabled",!0),M.addGetterSetter(Nr,"clearBeforeDraw",!0),M.addGetterSetter(Nr,"hitGraphEnabled",!0,Wt());class po extends Nr{constructor(o){super(o),this.listening(!1),x.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}po.prototype.nodeType="FastLayer",Re(po);class hi extends Rt{_validateAdd(o){var l=o.getType();"Group"!==l&&"Shape"!==l&&x.throw("You may only add groups and shapes to groups.")}}hi.prototype.nodeType="Group",Re(hi);var Pt=Bn.performance&&Bn.performance.now?function(){return Bn.performance.now()}:function(){return(new Date).getTime()};let Ne=(()=>{class f{constructor(l,c){this.id=f.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Pt(),frameRate:0},this.func=l,this.setLayers(c)}setLayers(l){return this.layers=l?l.length>0?l:[l]:[],this}getLayers(){return this.layers}addLayer(l){var p,c=this.layers,d=c.length;for(p=0;p<d;p++)if(c[p]._id===l._id)return!1;return this.layers.push(l),!0}isRunning(){var p,c=f.animations,d=c.length;for(p=0;p<d;p++)if(c[p].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Pt(),f._addAnimation(this),this}stop(){return f._removeAnimation(this),this}_updateFrameObject(l){this.frame.timeDiff=l-this.frame.lastTime,this.frame.lastTime=l,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(l){this.animations.push(l),this._handleAnimation()}static _removeAnimation(l){var m,c=l.id,d=this.animations,p=d.length;for(m=0;m<p;m++)if(d[m].id===c){this.animations.splice(m,1);break}}static _runFrames(){var d,p,m,v,_,C,w,E,l={},c=this.animations;for(v=0;v<c.length;v++)if(p=(d=c[v]).layers,m=d.func,d._updateFrameObject(Pt()),C=p.length,!m||!1!==m.call(d,d.frame))for(_=0;_<C;_++)void 0!==(w=p[_])._id&&(l[w._id]=w);for(E in l)l.hasOwnProperty(E)&&l[E].batchDraw()}static _animationLoop(){var l=f;l.animations.length?(l._runFrames(),x.requestAnimFrame(l._animationLoop)):l.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,x.requestAnimFrame(this._animationLoop))}}return f.animations=[],f.animIdCounter=0,f.animRunning=!1,f})();var ip={node:1,duration:1,easing:1,onFinish:1,yoyo:1},op=0,cn=["fill","stroke","shadowColor"];class Yi{constructor(o,l,c,d,p,m,v){this.prop=o,this.propFunc=l,this.begin=d,this._pos=d,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=p-this.begin,this.pause()}fire(o){var l=this[o];l&&l()}setTime(o){o>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():o<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=o,this.update())}getTime(){return this._time}setPosition(o){this.prevPos=this._pos,this.propFunc(o),this._pos=o}getPosition(o){return void 0===o&&(o=this._time),this.func(o,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(o){this.pause(),this._time=o,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var o=this.getTimer()-this._startTime;2===this.state?this.setTime(o):3===this.state&&this.setTime(this.duration-o)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}let Xa=(()=>{class f{constructor(l){var m,C,c=this,d=l.node,p=d._id,v=l.easing||kr.Linear,_=!!l.yoyo;m=typeof l.duration>"u"?.3:0===l.duration?.001:l.duration,this.node=d,this._id=op++;var w=d.getLayer()||(d instanceof Q.Stage?d.getLayers():null);for(C in w||x.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Ne(function(){c.tween.onEnterFrame()},w),this.tween=new Yi(C,function(E){c._tweenFunc(E)},v,0,1,1e3*m,_),this._addListeners(),f.attrs[p]||(f.attrs[p]={}),f.attrs[p][this._id]||(f.attrs[p][this._id]={}),f.tweens[p]||(f.tweens[p]={}),l)void 0===ip[C]&&this._addAttr(C,l[C]);this.reset(),this.onFinish=l.onFinish,this.onReset=l.onReset,this.onUpdate=l.onUpdate}_addAttr(l,c){var m,v,_,C,w,E,I,A,d=this.node,p=d._id;if((_=f.tweens[p][l])&&delete f.attrs[p][_][l],m=d.getAttr(l),x._isArray(c))if(v=[],w=Math.max(c.length,m.length),"points"===l&&c.length!==m.length&&(c.length>m.length?(I=m,m=x._prepareArrayForTween(m,c,d.closed())):(E=c,c=x._prepareArrayForTween(c,m,d.closed()))),0===l.indexOf("fill"))for(C=0;C<w;C++)if(C%2==0)v.push(c[C]-m[C]);else{var b=x.colorToRGBA(m[C]);A=x.colorToRGBA(c[C]),m[C]=b,v.push({r:A.r-b.r,g:A.g-b.g,b:A.b-b.b,a:A.a-b.a})}else for(C=0;C<w;C++)v.push(c[C]-m[C]);else-1!==cn.indexOf(l)?(m=x.colorToRGBA(m),v={r:(A=x.colorToRGBA(c)).r-m.r,g:A.g-m.g,b:A.b-m.b,a:A.a-m.a}):v=c-m;f.attrs[p][this._id][l]={start:m,diff:v,end:c,trueEnd:E,trueStart:I},f.tweens[p][l]=this._id}_tweenFunc(l){var p,m,v,_,C,w,E,I,c=this.node,d=f.attrs[c._id][this._id];for(p in d){if(_=(m=d[p]).diff,I=m.end,x._isArray(v=m.start))if(C=[],E=Math.max(v.length,I.length),0===p.indexOf("fill"))for(w=0;w<E;w++)C.push(w%2==0?(v[w]||0)+_[w]*l:"rgba("+Math.round(v[w].r+_[w].r*l)+","+Math.round(v[w].g+_[w].g*l)+","+Math.round(v[w].b+_[w].b*l)+","+(v[w].a+_[w].a*l)+")");else for(w=0;w<E;w++)C.push((v[w]||0)+_[w]*l);else C=-1!==cn.indexOf(p)?"rgba("+Math.round(v.r+_.r*l)+","+Math.round(v.g+_.g*l)+","+Math.round(v.b+_.b*l)+","+(v.a+_.a*l)+")":v+_*l;c.setAttr(p,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var l=this.node,c=f.attrs[l._id][this._id];c.points&&c.points.trueEnd&&l.setAttr("points",c.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var l=this.node,c=f.attrs[l._id][this._id];c.points&&c.points.trueStart&&l.points(c.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(l){return this.tween.seek(1e3*l),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var p,l=this.node._id,c=this._id,d=f.tweens[l];for(p in this.pause(),d)delete f.tweens[l][p];delete f.attrs[l][c]}}return f.attrs={},f.tweens={},f})();G.prototype.to=function(f){var o=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),o&&o()},new Xa(f).play()};const kr={BackEaseIn(f,o,l,c){var d=1.70158;return l*(f/=c)*f*((d+1)*f-d)+o},BackEaseOut(f,o,l,c){var d=1.70158;return l*((f=f/c-1)*f*((d+1)*f+d)+1)+o},BackEaseInOut(f,o,l,c){var d=1.70158;return(f/=c/2)<1?l/2*(f*f*((1+(d*=1.525))*f-d))+o:l/2*((f-=2)*f*((1+(d*=1.525))*f+d)+2)+o},ElasticEaseIn(f,o,l,c,d,p){var m=0;return 0===f?o:1==(f/=c)?o+l:(p||(p=.3*c),!d||d<Math.abs(l)?(d=l,m=p/4):m=p/(2*Math.PI)*Math.asin(l/d),-d*Math.pow(2,10*(f-=1))*Math.sin((f*c-m)*(2*Math.PI)/p)+o)},ElasticEaseOut(f,o,l,c,d,p){var m=0;return 0===f?o:1==(f/=c)?o+l:(p||(p=.3*c),!d||d<Math.abs(l)?(d=l,m=p/4):m=p/(2*Math.PI)*Math.asin(l/d),d*Math.pow(2,-10*f)*Math.sin((f*c-m)*(2*Math.PI)/p)+l+o)},ElasticEaseInOut(f,o,l,c,d,p){var m=0;return 0===f?o:2==(f/=c/2)?o+l:(p||(p=c*(.3*1.5)),!d||d<Math.abs(l)?(d=l,m=p/4):m=p/(2*Math.PI)*Math.asin(l/d),f<1?d*Math.pow(2,10*(f-=1))*Math.sin((f*c-m)*(2*Math.PI)/p)*-.5+o:d*Math.pow(2,-10*(f-=1))*Math.sin((f*c-m)*(2*Math.PI)/p)*.5+l+o)},BounceEaseOut:(f,o,l,c)=>(f/=c)<1/2.75?l*(7.5625*f*f)+o:f<2/2.75?l*(7.5625*(f-=1.5/2.75)*f+.75)+o:f<2.5/2.75?l*(7.5625*(f-=2.25/2.75)*f+.9375)+o:l*(7.5625*(f-=2.625/2.75)*f+.984375)+o,BounceEaseIn:(f,o,l,c)=>l-kr.BounceEaseOut(c-f,0,l,c)+o,BounceEaseInOut:(f,o,l,c)=>f<c/2?.5*kr.BounceEaseIn(2*f,0,l,c)+o:.5*kr.BounceEaseOut(2*f-c,0,l,c)+.5*l+o,EaseIn:(f,o,l,c)=>l*(f/=c)*f+o,EaseOut:(f,o,l,c)=>-l*(f/=c)*(f-2)+o,EaseInOut:(f,o,l,c)=>(f/=c/2)<1?l/2*f*f+o:-l/2*(--f*(f-2)-1)+o,StrongEaseIn:(f,o,l,c)=>l*(f/=c)*f*f*f*f+o,StrongEaseOut:(f,o,l,c)=>l*((f=f/c-1)*f*f*f*f+1)+o,StrongEaseInOut:(f,o,l,c)=>(f/=c/2)<1?l/2*f*f*f*f*f+o:l/2*((f-=2)*f*f*f*f+2)+o,Linear:(f,o,l,c)=>l*f/c+o},Qa=x._assign(Q,{Util:x,Transform:xt,Node:G,Container:Rt,Stage:Pr,stages:Gi,Layer:Nr,FastLayer:po,Group:hi,DD:Le,Shape:B,shapes:fe,Animation:Ne,Tween:Xa,Easings:kr,Context:ro,Canvas:Bi});class dn extends B{_sceneFunc(o){var l=Q.getAngle(this.angle()),c=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,c),o.arc(0,0,this.innerRadius(),l,0,!c),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),c=this.clockwise(),d=Q.getAngle(c?360-this.angle():this.angle()),p=Math.cos(Math.min(d,Math.PI)),v=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),_=Math.sin(Math.min(d,Math.PI/2)),C=p*(p>0?o:l),E=v*(v>0?o:l),I=_*(_>0?l:o);return{x:C,y:c?-1*I:E,width:1*l-C,height:I-E}}}function Fr(f,o,l,c,d,p,m){var v=Math.sqrt(Math.pow(l-f,2)+Math.pow(c-o,2)),_=Math.sqrt(Math.pow(d-l,2)+Math.pow(p-c,2)),C=m*v/(v+_),w=m*_/(v+_);return[l-C*(d-f),c-C*(p-o),l+w*(d-f),c+w*(p-o)]}function Ki(f,o){var d,p,l=f.length,c=[];for(d=2;d<l-2;d+=2)p=Fr(f[d-2],f[d-1],f[d],f[d+1],f[d+2],f[d+3],o),!isNaN(p[0])&&(c.push(p[0]),c.push(p[1]),c.push(f[d]),c.push(f[d+1]),c.push(p[2]),c.push(p[3]));return c}dn.prototype._centroid=!0,dn.prototype.className="Arc",dn.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Re(dn),M.addGetterSetter(dn,"innerRadius",0,V()),M.addGetterSetter(dn,"outerRadius",0,V()),M.addGetterSetter(dn,"angle",0,V()),M.addGetterSetter(dn,"clockwise",!1,Wt());class hn extends B{constructor(o){super(o),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(o){var v,_,C,l=this.points(),c=l.length,d=this.tension(),p=this.closed(),m=this.bezier();if(c){if(o.beginPath(),o.moveTo(l[0],l[1]),0!==d&&c>4){for(_=(v=this.getTensionPoints()).length,C=p?0:4,p||o.quadraticCurveTo(v[0],v[1],v[2],v[3]);C<_-2;)o.bezierCurveTo(v[C++],v[C++],v[C++],v[C++],v[C++],v[C++]);p||o.quadraticCurveTo(v[_-2],v[_-1],l[c-2],l[c-1])}else if(m)for(C=2;C<c;)o.bezierCurveTo(l[C++],l[C++],l[C++],l[C++],l[C++],l[C++]);else for(C=2;C<c;C+=2)o.lineTo(l[C],l[C+1]);p?(o.closePath(),o.fillStrokeShape(this)):o.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Ki(this.points(),this.tension())}_getTensionPointsClosed(){var o=this.points(),l=o.length,c=this.tension(),d=Fr(o[l-2],o[l-1],o[0],o[1],o[2],o[3],c),p=Fr(o[l-4],o[l-3],o[l-2],o[l-1],o[0],o[1],c),m=Ki(o,c);return[d[2],d[3]].concat(m).concat([p[0],p[1],o[l-2],o[l-1],p[2],p[3],d[0],d[1],o[0],o[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var o=this.points();if(o.length<4)return{x:o[0]||0,y:o[1]||0,width:0,height:0};for(var m,v,l=(o=0!==this.tension()?[o[0],o[1],...this._getTensionPoints(),o[o.length-2],o[o.length-1]]:this.points())[0],c=o[0],d=o[1],p=o[1],_=0;_<o.length/2;_++)m=o[2*_],v=o[2*_+1],l=Math.min(l,m),c=Math.max(c,m),d=Math.min(d,v),p=Math.max(p,v);return{x:l,y:d,width:c-l,height:p-d}}}hn.prototype.className="Line",hn.prototype._attrsAffectingSize=["points","bezier","tension"],Re(hn),M.addGetterSetter(hn,"closed",!1),M.addGetterSetter(hn,"bezier",!1),M.addGetterSetter(hn,"tension",0,V()),M.addGetterSetter(hn,"points",[],function st(){if(Q.isUnminified)return function(f,o){const l=Int8Array?Object.getPrototypeOf(Int8Array):null;return l&&f instanceof l||(x._isArray(f)?f.forEach(function(c){x._isNumber(c)||x.warn('"'+o+'" attribute has non numeric element '+c+". Make sure that all elements are numbers.")}):x.warn(Bt(f)+' is a not valid value for "'+o+'" attribute. The value should be a array of numbers.')),f}}());class Ve extends B{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this.dataArray=Ve.parsePathData(this.data()),this.pathLength=0;for(var l=0;l<this.dataArray.length;++l)this.pathLength+=this.dataArray[l].pathLength;this.on("dataChange.konva",function(){this.dataArray=Ve.parsePathData(this.data()),this.pathLength=0;for(var c=0;c<this.dataArray.length;++c)this.pathLength+=this.dataArray[c].pathLength})}_sceneFunc(o){var l=this.dataArray;o.beginPath();for(var c=!1,d=0;d<l.length;d++){var m=l[d].points;switch(l[d].command){case"L":o.lineTo(m[0],m[1]);break;case"M":o.moveTo(m[0],m[1]);break;case"C":o.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);break;case"Q":o.quadraticCurveTo(m[0],m[1],m[2],m[3]);break;case"A":var v=m[0],_=m[1],C=m[2],w=m[3],E=m[4],I=m[5],A=m[6],b=m[7],O=C>w?C:w,P=C>w?1:C/w,z=C>w?w/C:1;o.translate(v,_),o.rotate(A),o.scale(P,z),o.arc(0,0,O,E,E+I,1-b),o.scale(1/P,1/z),o.rotate(-A),o.translate(-v,-_);break;case"z":c=!0,o.closePath()}}c||this.hasFill()?o.fillStrokeShape(this):o.strokeShape(this)}getSelfRect(){var o=[];this.dataArray.forEach(function(C){if("A"===C.command){var w=C.points[4],E=C.points[5],I=C.points[4]+E,A=Math.PI/180;if(Math.abs(w-I)<A&&(A=Math.abs(w-I)),E<0)for(let b=w-A;b>I;b-=A){const O=Ve.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],b,0);o.push(O.x,O.y)}else for(let b=w+A;b<I;b+=A){const O=Ve.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],b,0);o.push(O.x,O.y)}}else if("C"===C.command)for(let b=0;b<=1;b+=.01){const O=Ve.getPointOnCubicBezier(b,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);o.push(O.x,O.y)}else o=o.concat(C.points)});for(var m,v,l=o[0],c=o[0],d=o[1],p=o[1],_=0;_<o.length/2;_++)m=o[2*_],v=o[2*_+1],isNaN(m)||(l=Math.min(l,m),c=Math.max(c,m)),isNaN(v)||(d=Math.min(d,v),p=Math.max(p,v));return{x:l,y:d,width:c-l,height:p-d}}getLength(){return this.pathLength}getPointAtLength(o){var l,c=0,d=this.dataArray.length;if(!d)return null;for(;c<d&&o>this.dataArray[c].pathLength;)o-=this.dataArray[c].pathLength,++c;if(c===d)return{x:(l=this.dataArray[c-1].points.slice(-2))[0],y:l[1]};if(o<.01)return{x:(l=this.dataArray[c].points.slice(0,2))[0],y:l[1]};var p=this.dataArray[c],m=p.points;switch(p.command){case"L":return Ve.getPointOnLine(o,p.start.x,p.start.y,m[0],m[1]);case"C":return Ve.getPointOnCubicBezier(o/p.pathLength,p.start.x,p.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Ve.getPointOnQuadraticBezier(o/p.pathLength,p.start.x,p.start.y,m[0],m[1],m[2],m[3]);case"A":var E=m[4];return Ve.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],E+=m[5]*o/p.pathLength,m[6])}return null}static getLineLength(o,l,c,d){return Math.sqrt((c-o)*(c-o)+(d-l)*(d-l))}static getPointOnLine(o,l,c,d,p,m,v){void 0===m&&(m=l),void 0===v&&(v=c);var _=(p-c)/(d-l+1e-8),C=Math.sqrt(o*o/(1+_*_));d<l&&(C*=-1);var E,w=_*C;if(d===l)E={x:m,y:v+w};else if((v-c)/(m-l+1e-8)===_)E={x:m+C,y:v+w};else{var I,A,b=this.getLineLength(l,c,d,p),O=(m-l)*(d-l)+(v-c)*(p-c),P=this.getLineLength(m,v,I=l+(O/=b*b)*(d-l),A=c+O*(p-c)),z=Math.sqrt(o*o-P*P);C=Math.sqrt(z*z/(1+_*_)),d<l&&(C*=-1),E={x:I+C,y:A+(w=_*C)}}return E}static getPointOnCubicBezier(o,l,c,d,p,m,v,_,C){function w(P){return P*P*P}function E(P){return 3*P*P*(1-P)}function I(P){return 3*P*(1-P)*(1-P)}function A(P){return(1-P)*(1-P)*(1-P)}return{x:_*w(o)+m*E(o)+d*I(o)+l*A(o),y:C*w(o)+v*E(o)+p*I(o)+c*A(o)}}static getPointOnQuadraticBezier(o,l,c,d,p,m,v){function _(A){return A*A}function C(A){return 2*A*(1-A)}function w(A){return(1-A)*(1-A)}return{x:m*_(o)+d*C(o)+l*w(o),y:v*_(o)+p*C(o)+c*w(o)}}static getPointOnEllipticalArc(o,l,c,d,p,m){var v=Math.cos(m),_=Math.sin(m),C_x=c*Math.cos(p),C_y=d*Math.sin(p);return{x:o+(C_x*v-C_y*_),y:l+(C_x*_+C_y*v)}}static parsePathData(o){if(!o)return[];var l=o,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];l=l.replace(new RegExp(" ","g"),",");for(var d=0;d<c.length;d++)l=l.replace(new RegExp(c[d],"g"),"|"+c[d]);var E,p=l.split("|"),m=[],v=[],_=0,C=0,w=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(d=1;d<p.length;d++){var I=p[d],A=I.charAt(0);for(I=I.slice(1),v.length=0;E=w.exec(I);)v.push(E[0]);for(var b=[],O=0,P=v.length;O<P;O++)if("00"!==v[O]){var z=parseFloat(v[O]);isNaN(z)?b.push(0):b.push(z)}else b.push(0,0);for(;b.length>0&&!isNaN(b[0]);){var q,Y,te,ie,J,se,we,oe,be,Nt,j=null,H=[],$=_,ne=C;switch(A){case"l":_+=b.shift(),C+=b.shift(),j="L",H.push(_,C);break;case"L":_=b.shift(),C=b.shift(),H.push(_,C);break;case"m":var Pe=b.shift(),ot=b.shift();if(_+=Pe,C+=ot,j="M",m.length>2&&"z"===m[m.length-1].command)for(var et=m.length-2;et>=0;et--)if("M"===m[et].command){_=m[et].points[0]+Pe,C=m[et].points[1]+ot;break}H.push(_,C),A="l";break;case"M":_=b.shift(),C=b.shift(),j="M",H.push(_,C),A="L";break;case"h":_+=b.shift(),j="L",H.push(_,C);break;case"H":_=b.shift(),j="L",H.push(_,C);break;case"v":C+=b.shift(),j="L",H.push(_,C);break;case"V":C=b.shift(),j="L",H.push(_,C);break;case"C":H.push(b.shift(),b.shift(),b.shift(),b.shift()),_=b.shift(),C=b.shift(),H.push(_,C);break;case"c":H.push(_+b.shift(),C+b.shift(),_+b.shift(),C+b.shift()),_+=b.shift(),C+=b.shift(),j="C",H.push(_,C);break;case"S":Y=_,te=C,"C"===(q=m[m.length-1]).command&&(Y=_+(_-q.points[2]),te=C+(C-q.points[3])),H.push(Y,te,b.shift(),b.shift()),_=b.shift(),C=b.shift(),j="C",H.push(_,C);break;case"s":Y=_,te=C,"C"===(q=m[m.length-1]).command&&(Y=_+(_-q.points[2]),te=C+(C-q.points[3])),H.push(Y,te,_+b.shift(),C+b.shift()),_+=b.shift(),C+=b.shift(),j="C",H.push(_,C);break;case"Q":H.push(b.shift(),b.shift()),_=b.shift(),C=b.shift(),H.push(_,C);break;case"q":H.push(_+b.shift(),C+b.shift()),_+=b.shift(),C+=b.shift(),j="Q",H.push(_,C);break;case"T":Y=_,te=C,"Q"===(q=m[m.length-1]).command&&(Y=_+(_-q.points[0]),te=C+(C-q.points[1])),_=b.shift(),C=b.shift(),j="Q",H.push(Y,te,_,C);break;case"t":Y=_,te=C,"Q"===(q=m[m.length-1]).command&&(Y=_+(_-q.points[0]),te=C+(C-q.points[1])),_+=b.shift(),C+=b.shift(),j="Q",H.push(Y,te,_,C);break;case"A":ie=b.shift(),J=b.shift(),se=b.shift(),we=b.shift(),oe=b.shift(),be=_,Nt=C,_=b.shift(),C=b.shift(),j="A",H=this.convertEndpointToCenterParameterization(be,Nt,_,C,we,oe,ie,J,se);break;case"a":ie=b.shift(),J=b.shift(),se=b.shift(),we=b.shift(),oe=b.shift(),be=_,Nt=C,_+=b.shift(),C+=b.shift(),j="A",H=this.convertEndpointToCenterParameterization(be,Nt,_,C,we,oe,ie,J,se)}m.push({command:j||A,points:H,start:{x:$,y:ne},pathLength:this.calcLength($,ne,j||A,H)})}("z"===A||"Z"===A)&&m.push({command:"z",points:[],start:void 0,pathLength:0})}return m}static calcLength(o,l,c,d){var p,m,v,_,C=Ve;switch(c){case"L":return C.getLineLength(o,l,d[0],d[1]);case"C":for(p=0,m=C.getPointOnCubicBezier(0,o,l,d[0],d[1],d[2],d[3],d[4],d[5]),_=.01;_<=1;_+=.01)v=C.getPointOnCubicBezier(_,o,l,d[0],d[1],d[2],d[3],d[4],d[5]),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;return p;case"Q":for(p=0,m=C.getPointOnQuadraticBezier(0,o,l,d[0],d[1],d[2],d[3]),_=.01;_<=1;_+=.01)v=C.getPointOnQuadraticBezier(_,o,l,d[0],d[1],d[2],d[3]),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;return p;case"A":p=0;var w=d[4],E=d[5],I=d[4]+E,A=Math.PI/180;if(Math.abs(w-I)<A&&(A=Math.abs(w-I)),m=C.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],w,0),E<0)for(_=w-A;_>I;_-=A)v=C.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],_,0),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;else for(_=w+A;_<I;_+=A)v=C.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],_,0),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;return v=C.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],I,0),p+C.getLineLength(m.x,m.y,v.x,v.y)}return 0}static convertEndpointToCenterParameterization(o,l,c,d,p,m,v,_,C){var w=C*(Math.PI/180),E=Math.cos(w)*(o-c)/2+Math.sin(w)*(l-d)/2,I=-1*Math.sin(w)*(o-c)/2+Math.cos(w)*(l-d)/2,A=E*E/(v*v)+I*I/(_*_);A>1&&(v*=Math.sqrt(A),_*=Math.sqrt(A));var b=Math.sqrt((v*v*(_*_)-v*v*(I*I)-_*_*(E*E))/(v*v*(I*I)+_*_*(E*E)));p===m&&(b*=-1),isNaN(b)&&(b=0);var O=b*v*I/_,P=b*-_*E/v,z=(o+c)/2+Math.cos(w)*O-Math.sin(w)*P,j=(l+d)/2+Math.sin(w)*O+Math.cos(w)*P,H=function(J){return Math.sqrt(J[0]*J[0]+J[1]*J[1])},$=function(J,se){return(J[0]*se[0]+J[1]*se[1])/(H(J)*H(se))},ne=function(J,se){return(J[0]*se[1]<J[1]*se[0]?-1:1)*Math.acos($(J,se))},q=ne([1,0],[(E-O)/v,(I-P)/_]),Y=[(E-O)/v,(I-P)/_],te=[(-1*E-O)/v,(-1*I-P)/_],ie=ne(Y,te);return $(Y,te)<=-1&&(ie=Math.PI),$(Y,te)>=1&&(ie=0),0===m&&ie>0&&(ie-=2*Math.PI),1===m&&ie<0&&(ie+=2*Math.PI),[z,j,v,_,q,ie,w,m]}}Ve.prototype.className="Path",Ve.prototype._attrsAffectingSize=["data"],Re(Ve),M.addGetterSetter(Ve,"data");class re extends hn{_sceneFunc(o){super._sceneFunc(o);var l=2*Math.PI,c=this.points(),d=c,p=0!==this.tension()&&c.length>4;p&&(d=this.getTensionPoints());var _,C,m=this.pointerLength(),v=c.length;if(p){const I=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],c[v-2],c[v-1]],A=Ve.calcLength(d[d.length-4],d[d.length-3],"C",I),b=Ve.getPointOnQuadraticBezier(Math.min(1,1-m/A),I[0],I[1],I[2],I[3],I[4],I[5]);_=c[v-2]-b.x,C=c[v-1]-b.y}else _=c[v-2]-c[v-4],C=c[v-1]-c[v-3];var w=(Math.atan2(C,_)+l)%l,E=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(c[v-2],c[v-1]),o.rotate(w),o.moveTo(0,0),o.lineTo(-m,E/2),o.lineTo(-m,-E/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(c[0],c[1]),p?(_=(d[0]+d[2])/2-c[0],C=(d[1]+d[3])/2-c[1]):(_=c[2]-c[0],C=c[3]-c[1]),o.rotate((Math.atan2(-C,-_)+l)%l),o.moveTo(0,0),o.lineTo(-m,E/2),o.lineTo(-m,-E/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){var l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x-l,y:o.y-l,width:o.width+2*l,height:o.height+2*l}}}re.prototype.className="Arrow",Re(re),M.addGetterSetter(re,"pointerLength",10,V()),M.addGetterSetter(re,"pointerWidth",10,V()),M.addGetterSetter(re,"pointerAtBeginning",!1),M.addGetterSetter(re,"pointerAtEnding",!0);class $n extends B{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}$n.prototype._centroid=!0,$n.prototype.className="Circle",$n.prototype._attrsAffectingSize=["radius"],Re($n),M.addGetterSetter($n,"radius",0,V());class Vn extends B{_sceneFunc(o){var l=this.radiusX(),c=this.radiusY();o.beginPath(),o.save(),l!==c&&o.scale(1,c/l),o.arc(0,0,l,0,2*Math.PI,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}}Vn.prototype.className="Ellipse",Vn.prototype._centroid=!0,Vn.prototype._attrsAffectingSize=["radiusX","radiusY"],Re(Vn),M.addComponentsGetterSetter(Vn,"radius",["x","y"]),M.addGetterSetter(Vn,"radiusX",0,V()),M.addGetterSetter(Vn,"radiusY",0,V());class Xe extends B{constructor(o){super(o),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&4===o.readyState||o&&o.addEventListener&&o.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),c=this.getHeight(),d=this.cornerRadius(),p=this.attrs.image;let m;if(p){const v=this.attrs.cropWidth,_=this.attrs.cropHeight;m=v&&_?[p,this.cropX(),this.cropY(),v,_,0,0,l,c]:[p,0,0,l,c]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?x.drawRoundedRectPath(o,l,c,d):o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)),p&&(d&&o.clip(),o.drawImage.apply(o,m))}_hitFunc(o){var l=this.width(),c=this.height(),d=this.cornerRadius();o.beginPath(),d?x.drawRoundedRectPath(o,l,c,d):o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return null!==(o=this.attrs.width)&&void 0!==o?o:null===(l=this.image())||void 0===l?void 0:l.width}getHeight(){var o,l;return null!==(o=this.attrs.height)&&void 0!==o?o:null===(l=this.image())||void 0===l?void 0:l.height}static fromURL(o,l,c=null){var d=x.createImageElement();d.onload=function(){var p=new Xe({image:d});l(p)},d.onerror=c,d.crossOrigin="Anonymous",d.src=o}}Xe.prototype.className="Image",Re(Xe),M.addGetterSetter(Xe,"cornerRadius",0,eo(4)),M.addGetterSetter(Xe,"image"),M.addComponentsGetterSetter(Xe,"crop",["x","y","width","height"]),M.addGetterSetter(Xe,"cropX",0,V()),M.addGetterSetter(Xe,"cropY",0,V()),M.addGetterSetter(Xe,"cropWidth",0,V()),M.addGetterSetter(Xe,"cropHeight",0,V());var go=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Ja="right",el="down",ar="left",mo=go.length;class Lr extends hi{constructor(o){super(o),this.on("add.konva",function(l){this._addListeners(l.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(o){var c,l=this,d=function(){l._sync()};for(c=0;c<mo;c++)o.on(go[c]+"Change.konva",d)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var c,d,p,m,v,_,C,o=this.getText(),l=this.getTag();if(o&&l){switch(c=o.width(),d=o.height(),p=l.pointerDirection(),m=l.pointerWidth(),C=l.pointerHeight(),v=0,_=0,p){case"up":v=c/2,_=-1*C;break;case Ja:v=c+m,_=d/2;break;case el:v=c/2,_=d+C;break;case ar:v=-1*m,_=d/2}l.setAttrs({x:-1*v,y:-1*_,width:c,height:d}),o.setAttrs({x:-1*v,y:-1*_})}}}Lr.prototype.className="Label",Re(Lr);class lr extends B{_sceneFunc(o){var l=this.width(),c=this.height(),d=this.pointerDirection(),p=this.pointerWidth(),m=this.pointerHeight(),v=this.cornerRadius();let _=0,C=0,w=0,E=0;"number"==typeof v?_=C=w=E=Math.min(v,l/2,c/2):(_=Math.min(v[0]||0,l/2,c/2),C=Math.min(v[1]||0,l/2,c/2),E=Math.min(v[2]||0,l/2,c/2),w=Math.min(v[3]||0,l/2,c/2)),o.beginPath(),o.moveTo(_,0),"up"===d&&(o.lineTo((l-p)/2,0),o.lineTo(l/2,-1*m),o.lineTo((l+p)/2,0)),o.lineTo(l-C,0),o.arc(l-C,C,C,3*Math.PI/2,0,!1),d===Ja&&(o.lineTo(l,(c-m)/2),o.lineTo(l+p,c/2),o.lineTo(l,(c+m)/2)),o.lineTo(l,c-E),o.arc(l-E,c-E,E,0,Math.PI/2,!1),d===el&&(o.lineTo((l+p)/2,c),o.lineTo(l/2,c+m),o.lineTo((l-p)/2,c)),o.lineTo(w,c),o.arc(w,c-w,w,Math.PI/2,Math.PI,!1),d===ar&&(o.lineTo(0,(c+m)/2),o.lineTo(-1*p,c/2),o.lineTo(0,(c-m)/2)),o.lineTo(0,_),o.arc(_,_,_,Math.PI,3*Math.PI/2,!1),o.closePath(),o.fillStrokeShape(this)}getSelfRect(){var o=0,l=0,c=this.pointerWidth(),d=this.pointerHeight(),p=this.pointerDirection(),m=this.width(),v=this.height();return"up"===p?(l-=d,v+=d):p===el?v+=d:p===ar?(o-=1.5*c,m+=c):p===Ja&&(m+=1.5*c),{x:o,y:l,width:m,height:v}}}lr.prototype.className="Tag",Re(lr),M.addGetterSetter(lr,"pointerDirection","none"),M.addGetterSetter(lr,"pointerWidth",0,V()),M.addGetterSetter(lr,"pointerHeight",0,V()),M.addGetterSetter(lr,"cornerRadius",0,eo(4));class fi extends B{_sceneFunc(o){var l=this.cornerRadius(),c=this.width(),d=this.height();o.beginPath(),l?x.drawRoundedRectPath(o,c,d,l):o.rect(0,0,c,d),o.closePath(),o.fillStrokeShape(this)}}fi.prototype.className="Rect",Re(fi),M.addGetterSetter(fi,"cornerRadius",0,eo(4));class ur extends B{_sceneFunc(o){const l=this._getPoints();o.beginPath(),o.moveTo(l[0].x,l[0].y);for(var c=1;c<l.length;c++)o.lineTo(l[c].x,l[c].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,l=this.attrs.radius||0,c=[];for(var d=0;d<o;d++)c.push({x:l*Math.sin(2*d*Math.PI/o),y:-1*l*Math.cos(2*d*Math.PI/o)});return c}getSelfRect(){const o=this._getPoints();var l=o[0].x,c=o[0].y,d=o[0].x,p=o[0].y;return o.forEach(m=>{l=Math.min(l,m.x),c=Math.max(c,m.x),d=Math.min(d,m.y),p=Math.max(p,m.y)}),{x:l,y:d,width:c-l,height:p-d}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}ur.prototype.className="RegularPolygon",ur.prototype._centroid=!0,ur.prototype._attrsAffectingSize=["radius"],Re(ur),M.addGetterSetter(ur,"radius",0,V()),M.addGetterSetter(ur,"sides",0,V());var vo=2*Math.PI;class en extends B{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,vo,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),vo,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}en.prototype.className="Ring",en.prototype._centroid=!0,en.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Re(en),M.addGetterSetter(en,"innerRadius",0,V()),M.addGetterSetter(en,"outerRadius",0,V());class St extends B{constructor(o){super(o),this._updated=!0,this.anim=new Ne(()=>{var l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){var l=this.animation(),c=this.frameIndex(),d=4*c,p=this.animations()[l],m=this.frameOffsets(),v=p[d+0],_=p[d+1],C=p[d+2],w=p[d+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,C,w),o.closePath(),o.fillStrokeShape(this)),E)if(m){var I=m[l],A=2*c;o.drawImage(E,v,_,C,w,I[A+0],I[A+1],C,w)}else o.drawImage(E,v,_,C,w,0,0,C,w)}_hitFunc(o){var l=this.animation(),c=this.frameIndex(),d=4*c,p=this.animations()[l],m=this.frameOffsets(),v=p[d+2],_=p[d+3];if(o.beginPath(),m){var C=m[l],w=2*c;o.rect(C[w+0],C[w+1],v,_)}else o.rect(0,0,v,_);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var o=this.frameIndex(),l=this.animation(),c=this.animations();this.frameIndex(o<c[l].length/4-1?o+1:0)}}St.prototype.className="Sprite",Re(St),M.addGetterSetter(St,"animation"),M.addGetterSetter(St,"animations"),M.addGetterSetter(St,"frameOffsets"),M.addGetterSetter(St,"image"),M.addGetterSetter(St,"frameIndex",0,V()),M.addGetterSetter(St,"frameRate",17,V()),M.backCompat(St,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Gn extends B{_sceneFunc(o){var l=this.innerRadius(),c=this.outerRadius(),d=this.numPoints();o.beginPath(),o.moveTo(0,0-c);for(var p=1;p<2*d;p++){var m=p%2==0?c:l,v=m*Math.sin(p*Math.PI/d),_=-1*m*Math.cos(p*Math.PI/d);o.lineTo(v,_)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}function le(f){return Array.from(f)}Gn.prototype.className="Star",Gn.prototype._centroid=!0,Gn.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Re(Gn),M.addGetterSetter(Gn,"numPoints",5,V()),M.addGetterSetter(Gn,"innerRadius",0,V()),M.addGetterSetter(Gn,"outerRadius",0,V());var Qi,cr="auto",zn="justify",pi="2d",dr=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],gc=dr.length;function mn(){return Qi||(Qi=x.createCanvasElement().getContext(pi))}class Ee extends B{constructor(o){super(function bt(f){return!(f=f||{}).fillLinearGradientColorStops&&!f.fillRadialGradientColorStops&&!f.fillPatternImage&&(f.fill=f.fill||"black"),f}(o)),this._partialTextX=0,this._partialTextY=0;for(var l=0;l<gc;l++)this.on(dr[l]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(o){var l=this.textArr,c=l.length;if(this.text()){var P,d=this.padding(),p=this.fontSize(),m=this.lineHeight()*p,v=this.verticalAlign(),_=0,C=this.align(),w=this.getWidth(),E=this.letterSpacing(),I=this.fill(),A=this.textDecoration(),b=-1!==A.indexOf("underline"),O=-1!==A.indexOf("line-through"),z=0,j=(z=m/2,0),H=0;for(o.setAttr("font",this._getContextFont()),o.setAttr("textBaseline","middle"),o.setAttr("textAlign","left"),"middle"===v?_=(this.getHeight()-c*m-2*d)/2:"bottom"===v&&(_=this.getHeight()-c*m-2*d),o.translate(d,_+d),P=0;P<c;P++){j=0,H=0;var te,ie,J,$=l[P],ne=$.text,q=$.width,Y=$.lastInParagraph;if(o.save(),"right"===C?j+=w-q-2*d:"center"===C&&(j+=(w-q-2*d)/2),b){o.save(),o.beginPath(),o.moveTo(j,z+H+Math.round(p/2)),ie=0==(te=ne.split(" ").length-1),J=C!==zn||Y?q:w-2*d,o.lineTo(j+Math.round(J),z+H+Math.round(p/2)),o.lineWidth=p/15;const Pe=this._getLinearGradient();o.strokeStyle=Pe||I,o.stroke(),o.restore()}if(O){o.save(),o.beginPath(),o.moveTo(j,z+H),ie=0==(te=ne.split(" ").length-1),J=C===zn&&Y&&!ie?w-2*d:q,o.lineTo(j+Math.round(J),z+H),o.lineWidth=p/15;const Pe=this._getLinearGradient();o.strokeStyle=Pe||I,o.stroke(),o.restore()}if(0!==E||C===zn){te=ne.split(" ").length-1;for(var se=le(ne),we=0;we<se.length;we++){var oe=se[we];" "===oe&&!Y&&C===zn&&(j+=(w-2*d-q)/te),this._partialTextX=j,this._partialTextY=z+H,this._partialText=oe,o.fillStrokeShape(this),j+=this.measureSize(oe).width+E}}else this._partialTextX=j,this._partialTextY=z+H,this._partialText=ne,o.fillStrokeShape(this);o.restore(),c>1&&(z+=m)}}}_hitFunc(o){var l=this.getWidth(),c=this.getHeight();o.beginPath(),o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)}setText(o){var l=x._isString(o)?o:null==o?"":o+"";return this._setAttr("text",l),this}getWidth(){return this.attrs.width===cr||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===cr||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(o){var d,l=mn(),c=this.fontSize();return l.save(),l.font=this._getContextFont(),d=l.measureText(o),l.restore(),{width:d.width,height:c}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+function mc(f){return f.split(",").map(o=>{const l=(o=o.trim()).indexOf(" ")>=0,c=o.indexOf('"')>=0||o.indexOf("'")>=0;return l&&!c&&(o=`"${o}"`),o}).join(", ")}(this.fontFamily())}_addTextLine(o){this.align()===zn&&(o=o.trim());var c=this._getTextWidth(o);return this.textArr.push({text:o,width:c,lastInParagraph:!1})}_getTextWidth(o){var l=this.letterSpacing(),c=o.length;return mn().measureText(o).width+(c?l*(c-1):0)}_setTextData(){var o=this.text().split("\n"),l=+this.fontSize(),c=0,d=this.lineHeight()*l,p=this.attrs.width,m=this.attrs.height,v=p!==cr&&void 0!==p,_=m!==cr&&void 0!==m,C=this.padding(),w=p-2*C,E=m-2*C,I=0,A=this.wrap(),O="char"!==A&&"none"!==A,P=this.ellipsis();this.textArr=[],mn().font=this._getContextFont();for(var z=P?this._getTextWidth("\u2026"):0,j=0,H=o.length;j<H;++j){var $=o[j],ne=this._getTextWidth($);if(v&&ne>w)for(;$.length>0;){for(var q=0,Y=$.length,te="",ie=0;q<Y;){var J=q+Y>>>1,se=$.slice(0,J+1),we=this._getTextWidth(se)+z;we<=w?(q=J+1,te=se,ie=we):Y=J}if(!te)break;if(O){var oe,be=$[te.length];(oe=(" "===be||"-"===be)&&ie<=w?te.length:Math.max(te.lastIndexOf(" "),te.lastIndexOf("-"))+1)>0&&(te=te.slice(0,q=oe),ie=this._getTextWidth(te))}if(te=te.trimRight(),this._addTextLine(te),c=Math.max(c,ie),this._shouldHandleEllipsis(I+=d)){this._tryToAddEllipsisToLastLine();break}if(($=($=$.slice(q)).trimLeft()).length>0&&(ne=this._getTextWidth($))<=w){this._addTextLine($),I+=d,c=Math.max(c,ne);break}}else this._addTextLine($),I+=d,c=Math.max(c,ne),this._shouldHandleEllipsis(I)&&j<H-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),_&&I+d>E)break}this.textHeight=l,this.textWidth=c}_shouldHandleEllipsis(o){var l=+this.fontSize(),c=this.lineHeight()*l,d=this.attrs.height,p=d!==cr&&void 0!==d,v=d-2*this.padding();return!("none"!==this.wrap())||p&&o+c>v}_tryToAddEllipsisToLastLine(){var o=this.attrs.width,l=o!==cr&&void 0!==o,d=o-2*this.padding(),p=this.ellipsis(),m=this.textArr[this.textArr.length-1];m&&p&&(l&&(this._getTextWidth(m.text+"\u2026")<d||(m.text=m.text.slice(0,m.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(m.text+"\u2026"))}getStrokeScaleEnabled(){return!0}}function Et(f){f.fillText(this.partialText,0,0)}function hr(f){f.strokeText(this.partialText,0,0)}Ee.prototype._fillFunc=function vc(f){f.fillText(this._partialText,this._partialTextX,this._partialTextY)},Ee.prototype._strokeFunc=function il(f){f.strokeText(this._partialText,this._partialTextX,this._partialTextY)},Ee.prototype.className="Text",Ee.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],Re(Ee),M.overWriteSetter(Ee,"width",ni()),M.overWriteSetter(Ee,"height",ni()),M.addGetterSetter(Ee,"fontFamily","Arial"),M.addGetterSetter(Ee,"fontSize",12,V()),M.addGetterSetter(Ee,"fontStyle","normal"),M.addGetterSetter(Ee,"fontVariant","normal"),M.addGetterSetter(Ee,"padding",0,V()),M.addGetterSetter(Ee,"align","left"),M.addGetterSetter(Ee,"verticalAlign","top"),M.addGetterSetter(Ee,"lineHeight",1,V()),M.addGetterSetter(Ee,"wrap","word"),M.addGetterSetter(Ee,"ellipsis",!1,Wt()),M.addGetterSetter(Ee,"letterSpacing",0,V()),M.addGetterSetter(Ee,"text","",zt()),M.addGetterSetter(Ee,"textDecoration","");class je extends B{constructor(o){super(o),this.dummyCanvas=x.createCanvasElement(),this.dataArray=[],this.dataArray=Ve.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=Ve.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(o){o.setAttr("font",this._getContextFont()),o.setAttr("textBaseline",this.textBaseline()),o.setAttr("textAlign","left"),o.save();var l=this.textDecoration(),c=this.fill(),d=this.fontSize(),p=this.glyphInfo;"underline"===l&&o.beginPath();for(var m=0;m<p.length;m++){o.save();var v=p[m].p0;o.translate(v.x,v.y),o.rotate(p[m].rotation),this.partialText=p[m].text,o.fillStrokeShape(this),"underline"===l&&(0===m&&o.moveTo(0,d/2+1),o.lineTo(d,d/2+1)),o.restore()}"underline"===l&&(o.strokeStyle=c,o.lineWidth=d/20,o.stroke()),o.restore()}_hitFunc(o){o.beginPath();var l=this.glyphInfo;if(l.length>=1){var c=l[0].p0;o.moveTo(c.x,c.y)}for(var d=0;d<l.length;d++){var p=l[d].p1;o.lineTo(p.x,p.y)}o.setAttr("lineWidth",this.fontSize()),o.setAttr("strokeStyle",this.colorKey),o.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(o){return Ee.prototype.setText.call(this,o)}_getContextFont(){return Ee.prototype._getContextFont.call(this)}_getTextSize(o){var c=this.dummyCanvas.getContext("2d");c.save(),c.font=this._getContextFont();var d=c.measureText(o);return c.restore(),{width:d.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var o=this,l=this._getTextSize(this.attrs.text),c=this.letterSpacing(),d=this.align(),p=this.kerningFunc();this.textWidth=l.width,this.textHeight=l.height;var m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*c,0);this.glyphInfo=[];for(var v=0,_=0;_<o.dataArray.length;_++)o.dataArray[_].pathLength>0&&(v+=o.dataArray[_].pathLength);var C=0;"center"===d&&(C=Math.max(0,v/2-m/2)),"right"===d&&(C=Math.max(0,v-m));for(var I,A,b,w=le(this.text()),E=this.text().split(" ").length-1,O=-1,P=0,z=function(){P=0;for(var we=o.dataArray,oe=O+1;oe<we.length;oe++){if(we[oe].pathLength>0)return O=oe,we[oe];"M"===we[oe].command&&(I={x:we[oe].points[0],y:we[oe].points[1]})}return{}},j=function(we){var oe=o._getTextSize(we).width+c;" "===we&&"justify"===d&&(oe+=(v-m)/E);var be=0,Nt=0;for(A=void 0;Math.abs(oe-be)/oe>.01&&Nt<20;){Nt++;for(var Pe=be;void 0===b;)(b=z())&&Pe+b.pathLength<oe&&(Pe+=b.pathLength,b=void 0);if(0===Object.keys(b).length||void 0===I)return;var ot=!1;switch(b.command){case"L":Ve.getLineLength(I.x,I.y,b.points[0],b.points[1])>oe?A=Ve.getPointOnLine(oe,I.x,I.y,b.points[0],b.points[1],I.x,I.y):b=void 0;break;case"A":var qt=b.points[5],Ie=b.points[4]+qt;0===P?P=b.points[4]+1e-8:oe>be?P+=Math.PI/180*qt/Math.abs(qt):P-=Math.PI/360*qt/Math.abs(qt),(qt<0&&P<Ie||qt>=0&&P>Ie)&&(P=Ie,ot=!0),A=Ve.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],P,b.points[6]);break;case"C":0===P?P=oe>b.pathLength?1e-8:oe/b.pathLength:oe>be?P+=(oe-be)/b.pathLength/2:P=Math.max(P-(be-oe)/b.pathLength/2,0),P>1&&(P=1,ot=!0),A=Ve.getPointOnCubicBezier(P,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);break;case"Q":0===P?P=oe/b.pathLength:oe>be?P+=(oe-be)/b.pathLength:P-=(be-oe)/b.pathLength,P>1&&(P=1,ot=!0),A=Ve.getPointOnQuadraticBezier(P,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3])}void 0!==A&&(be=Ve.getLineLength(I.x,I.y,A.x,A.y)),ot&&(ot=!1,b=void 0)}},ne=C/(o._getTextSize("C").width+c)-1,q=0;q<ne&&(j("C"),void 0!==I&&void 0!==A);q++)I=A;for(var Y=0;Y<w.length&&(j(w[Y]),void 0!==I&&void 0!==A);Y++){var te=Ve.getLineLength(I.x,I.y,A.x,A.y),ie=0;if(p)try{ie=p(w[Y-1],w[Y])*this.fontSize()}catch{ie=0}I.x+=ie,A.x+=ie,this.textWidth+=ie;var J=Ve.getPointOnLine(ie+te/2,I.x,I.y,A.x,A.y),se=Math.atan2(A.y-I.y,A.x-I.x);this.glyphInfo.push({transposeX:J.x,transposeY:J.y,text:w[Y],rotation:se,p0:I,p1:A}),I=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var o=[];this.glyphInfo.forEach(function(w){o.push(w.p0.x),o.push(w.p0.y),o.push(w.p1.x),o.push(w.p1.y)});for(var m,v,l=o[0]||0,c=o[0]||0,d=o[1]||0,p=o[1]||0,_=0;_<o.length/2;_++)m=o[2*_],v=o[2*_+1],l=Math.min(l,m),c=Math.max(c,m),d=Math.min(d,v),p=Math.max(p,v);var C=this.fontSize();return{x:l-C/2,y:d-C/2,width:c-l+C,height:p-d+C}}destroy(){return x.releaseCanvas(this.dummyCanvas),super.destroy()}}je.prototype._fillFunc=Et,je.prototype._strokeFunc=hr,je.prototype._fillFuncHit=Et,je.prototype._strokeFuncHit=hr,je.prototype.className="TextPath",je.prototype._attrsAffectingSize=["text","fontSize","data"],Re(je),M.addGetterSetter(je,"data"),M.addGetterSetter(je,"fontFamily","Arial"),M.addGetterSetter(je,"fontSize",12,V()),M.addGetterSetter(je,"fontStyle","normal"),M.addGetterSetter(je,"align","left"),M.addGetterSetter(je,"letterSpacing",0,V()),M.addGetterSetter(je,"textBaseline","middle"),M.addGetterSetter(je,"fontVariant","normal"),M.addGetterSetter(je,"text",""),M.addGetterSetter(je,"textDecoration",null),M.addGetterSetter(je,"kerningFunc",null);var Do="tr-konva",sl=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(f=>f+`.${Do}`).join(" "),gi="nodesRect",Tn=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],X={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const ye="ontouchstart"in Q._global;var Ot=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Wn=1e8;function fr(f,o,l){const c=l.x+(f.x-l.x)*Math.cos(o)-(f.y-l.y)*Math.sin(o),d=l.y+(f.x-l.x)*Math.sin(o)+(f.y-l.y)*Math.cos(o);return Object.assign(Object.assign({},f),{rotation:f.rotation+o,x:c,y:d})}class Oe extends hi{constructor(o){super(o),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(sl,this.update),this.getNode()&&this.update()}attachTo(o){return this.setNode(o),this}setNode(o){return x.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([o])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Do+this._id}setNodes(o=[]){this._nodes&&this._nodes.length&&this.detach();const l=o.filter(d=>!d.isAncestorOf(this)||(x.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=o=l,1===o.length&&this.useSingleNodeRotation()?this.rotation(o[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(d=>{const p=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},m=d._attrsAffectingSize.map(v=>v+"Change."+this._getEventNamespace()).join(" ");d.on(m,p),d.on(Tn.map(v=>v+`.${this._getEventNamespace()}`).join(" "),p),d.on(`absoluteTransformChange.${this._getEventNamespace()}`,p),this._proxyDrag(d)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(o){let l;o.on(`dragstart.${this._getEventNamespace()}`,c=>{l=o.getAbsolutePosition(),!this.isDragging()&&o!==this.findOne(".back")&&this.startDrag(c,!1)}),o.on(`dragmove.${this._getEventNamespace()}`,c=>{if(!l)return;const d=o.getAbsolutePosition(),p=d.x-l.x,m=d.y-l.y;this.nodes().forEach(v=>{if(v===o||v.isDragging())return;const _=v.getAbsolutePosition();v.setAbsolutePosition({x:_.x+p,y:_.y+m}),v.startDrag(c)}),l=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(o=>{o.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(gi),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(gi,this.__getNodeRect)}__getNodeShape(o,l=this.rotation(),c){var d=o.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=o.getAbsoluteScale(c),m=o.getAbsolutePosition(c),v=d.x*p.x-o.offsetX()*p.x,_=d.y*p.y-o.offsetY()*p.y;const C=(Q.getAngle(o.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return fr({x:m.x+v*Math.cos(C)+_*Math.sin(-C),y:m.y+_*Math.cos(C)+v*Math.sin(C),width:d.width*p.x,height:d.height*p.y,rotation:C},-Q.getAngle(l),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-Wn,y:-Wn,width:0,height:0,rotation:0};const l=[];this.nodes().map(C=>{const w=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var E=[{x:w.x,y:w.y},{x:w.x+w.width,y:w.y},{x:w.x+w.width,y:w.y+w.height},{x:w.x,y:w.y+w.height}],I=C.getAbsoluteTransform();E.forEach(function(A){var b=I.point(A);l.push(b)})});const c=new xt;var d,p,m,v;c.rotate(-Q.getAngle(this.rotation())),l.forEach(function(C){var w=c.point(C);void 0===d&&(d=m=w.x,p=v=w.y),d=Math.min(d,w.x),p=Math.min(p,w.y),m=Math.max(m,w.x),v=Math.max(v,w.y)}),c.invert();const _=c.point({x:d,y:p});return{x:_.x,y:_.y,width:m-d,height:v-p,rotation:Q.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ot.forEach(function(o){this._createAnchor(o)}.bind(this)),this._createAnchor("rotater")}_createAnchor(o){var l=new fi({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:o+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:ye?10:"auto"}),c=this;l.on("mousedown touchstart",function(d){c._handleMouseDown(d)}),l.on("dragstart",d=>{l.stopDrag(),d.cancelBubble=!0}),l.on("dragend",d=>{d.cancelBubble=!0}),l.on("mouseenter",()=>{var d=Q.getAngle(this.rotation()),p=function Qe(f,o){if("rotater"===f)return"crosshair";o+=x.degToRad(X[f]||0);var l=(x.radToDeg(o)%360+360)%360;return x._inRange(l,337.5,360)||x._inRange(l,0,22.5)?"ns-resize":x._inRange(l,22.5,67.5)?"nesw-resize":x._inRange(l,67.5,112.5)?"ew-resize":x._inRange(l,112.5,157.5)?"nwse-resize":x._inRange(l,157.5,202.5)?"ns-resize":x._inRange(l,202.5,247.5)?"nesw-resize":x._inRange(l,247.5,292.5)?"ew-resize":x._inRange(l,292.5,337.5)?"nwse-resize":(x.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}(o,d);l.getStage().content&&(l.getStage().content.style.cursor=p),this._cursorChange=!0}),l.on("mouseout",()=>{l.getStage().content&&(l.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(l)}_createBack(){var o=new B({name:"back",width:0,height:0,draggable:!0,sceneFunc(l){var c=this.getParent(),d=c.padding();l.beginPath(),l.rect(-d,-d,this.width()+2*d,this.height()+2*d),l.moveTo(this.width()/2,-d),c.rotateEnabled()&&l.lineTo(this.width()/2,-c.rotateAnchorOffset()*x._sign(this.height())-d),l.fillStrokeShape(this)},hitFunc:(l,c)=>{if(this.shouldOverdrawWholeArea()){var d=this.padding();l.beginPath(),l.rect(-d,-d,c.width()+2*d,c.height()+2*d),l.fillStrokeShape(c)}}});this.add(o),this._proxyDrag(o),o.on("dragstart",l=>{l.cancelBubble=!0}),o.on("dragmove",l=>{l.cancelBubble=!0}),o.on("dragend",l=>{l.cancelBubble=!0}),this.on("dragmove",l=>{this.update()})}_handleMouseDown(o){this._movingAnchorName=o.target.name().split(" ")[0];var l=this._getNodeRect(),c=l.width,d=l.height,p=Math.sqrt(Math.pow(c,2)+Math.pow(d,2));this.sin=Math.abs(d/p),this.cos=Math.abs(c/p),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var m=o.target.getAbsolutePosition(),v=o.target.getStage().getPointerPosition();this._anchorDragOffset={x:v.x-m.x,y:v.y-m.y},this._fire("transformstart",{evt:o.evt,target:this.getNode()}),this._nodes.forEach(_=>{_._fire("transformstart",{evt:o.evt,target:_})})}_handleMouseMove(o){var l,c,d,p=this.findOne("."+this._movingAnchorName),m=p.getStage();m.setPointersPositions(o);const v=m.getPointerPosition();let _={x:v.x-this._anchorDragOffset.x,y:v.y-this._anchorDragOffset.y};const C=p.getAbsolutePosition();this.anchorDragBoundFunc()&&(_=this.anchorDragBoundFunc()(C,_,o)),p.setAbsolutePosition(_);const w=p.getAbsolutePosition();if(C.x!==w.x||C.y!==w.y){if("rotater"===this._movingAnchorName){var E=this._getNodeRect();l=p.x()-E.width/2,c=-p.y()+E.height/2;let we=Math.atan2(-c,l)+Math.PI/2;E.height<0&&(we-=Math.PI);const oe=Q.getAngle(this.rotation())+we,be=Q.getAngle(this.rotationSnapTolerance()),Pe=function Zi(f,o,l){let c=o;for(let d=0;d<f.length;d++){const p=Q.getAngle(f[d]),m=Math.abs(p-o)%(2*Math.PI);Math.min(m,2*Math.PI-m)<l&&(c=p)}return c}(this.rotationSnaps(),oe,be)-E.rotation,ot=function Je(f,o){const l=function Dt(f){return{x:f.x+f.width/2*Math.cos(f.rotation)+f.height/2*Math.sin(-f.rotation),y:f.y+f.height/2*Math.cos(f.rotation)+f.width/2*Math.sin(f.rotation)}}(f);return fr(f,o,l)}(E,Pe);return void this._fitNodesInto(ot,o)}var A=this.keepRatio()||o.shiftKey,j=this.centeredScaling()||o.altKey;if("top-left"===this._movingAnchorName){if(A){var b=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};d=Math.sqrt(Math.pow(b.x-p.x(),2)+Math.pow(b.y-p.y(),2));var O=this.findOne(".top-left").x()>b.x?-1:1,P=this.findOne(".top-left").y()>b.y?-1:1;l=d*this.cos*O,c=d*this.sin*P,this.findOne(".top-left").x(b.x-l),this.findOne(".top-left").y(b.y-c)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(p.y());else if("top-right"===this._movingAnchorName){A&&(b=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},d=Math.sqrt(Math.pow(p.x()-b.x,2)+Math.pow(b.y-p.y(),2)),O=this.findOne(".top-right").x()<b.x?-1:1,P=this.findOne(".top-right").y()>b.y?-1:1,l=d*this.cos*O,c=d*this.sin*P,this.findOne(".top-right").x(b.x+l),this.findOne(".top-right").y(b.y-c));var z=p.position();this.findOne(".top-left").y(z.y),this.findOne(".bottom-right").x(z.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(p.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(p.x()):"bottom-left"===this._movingAnchorName?(A&&(b=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},d=Math.sqrt(Math.pow(b.x-p.x(),2)+Math.pow(p.y()-b.y,2)),O=b.x<p.x()?-1:1,P=p.y()<b.y?-1:1,c=d*this.sin*P,p.x(b.x-(l=d*this.cos*O)),p.y(b.y+c)),z=p.position(),this.findOne(".top-left").x(z.x),this.findOne(".bottom-right").y(z.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(p.y()):"bottom-right"===this._movingAnchorName?A&&(b=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},d=Math.sqrt(Math.pow(p.x()-b.x,2)+Math.pow(p.y()-b.y,2)),O=this.findOne(".bottom-right").x()<b.x?-1:1,P=this.findOne(".bottom-right").y()<b.y?-1:1,l=d*this.cos*O,c=d*this.sin*P,this.findOne(".bottom-right").x(b.x+l),this.findOne(".bottom-right").y(b.y+c)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(j=this.centeredScaling()||o.altKey){var H=this.findOne(".top-left"),$=this.findOne(".bottom-right"),ne=H.x(),q=H.y(),Y=this.getWidth()-$.x(),te=this.getHeight()-$.y();$.move({x:-ne,y:-q}),H.move({x:Y,y:te})}var ie=this.findOne(".top-left").getAbsolutePosition();l=ie.x,c=ie.y;var J=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),se=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:l,y:c,width:J,height:se,rotation:Q.getAngle(this.rotation())},o)}}_handleMouseUp(o){this._removeEvents(o)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(o){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var l=this.getNode();this._fire("transformend",{evt:o,target:l}),l&&this._nodes.forEach(c=>{c._fire("transformend",{evt:o,target:c})}),this._movingAnchorName=null}}_fitNodesInto(o,l){var c=this._getNodeRect();if(x._inRange(o.width,2*-this.padding()-1,1))return void this.update();if(x._inRange(o.height,2*-this.padding()-1,1))return void this.update();const p=this.flipEnabled();var m=new xt;if(m.rotate(Q.getAngle(this.rotation())),this._movingAnchorName&&o.width<0&&this._movingAnchorName.indexOf("left")>=0){const E=m.point({x:2*-this.padding(),y:0});if(o.x+=E.x,o.y+=E.y,o.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,!p)return void this.update()}else if(this._movingAnchorName&&o.width<0&&this._movingAnchorName.indexOf("right")>=0){const E=m.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,o.width+=2*this.padding(),!p)return void this.update()}if(this._movingAnchorName&&o.height<0&&this._movingAnchorName.indexOf("top")>=0){const E=m.point({x:0,y:2*-this.padding()});if(o.x+=E.x,o.y+=E.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,o.height+=2*this.padding(),!p)return void this.update()}else if(this._movingAnchorName&&o.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const E=m.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=E.x,this._anchorDragOffset.y-=E.y,o.height+=2*this.padding(),!p)return void this.update()}if(this.boundBoxFunc()){const E=this.boundBoxFunc()(c,o);E?o=E:x.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const v=1e7,_=new xt;_.translate(c.x,c.y),_.rotate(c.rotation),_.scale(c.width/v,c.height/v);const C=new xt;C.translate(o.x,o.y),C.rotate(o.rotation),C.scale(o.width/v,o.height/v);const w=C.multiply(_.invert());this._nodes.forEach(E=>{var I;const A=E.getParent().getAbsoluteTransform(),b=E.getTransform().copy();b.translate(E.offsetX(),E.offsetY());const O=new xt;O.multiply(A.copy().invert()).multiply(w).multiply(A).multiply(b);const P=O.decompose();E.setAttrs(P),this._fire("transform",{evt:l,target:E}),E._fire("transform",{evt:l,target:E}),null===(I=E.getLayer())||void 0===I||I.batchDraw()}),this.rotation(x._getRotation(o.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(o,l){this.findOne(o).setAttrs(l)}update(){var o,l=this._getNodeRect();this.rotation(x._getRotation(l.rotation));var c=l.width,d=l.height,p=this.enabledAnchors(),m=this.resizeEnabled(),v=this.padding(),_=this.anchorSize();this.find("._anchor").forEach(C=>{C.setAttrs({width:_,height:_,offsetX:_/2,offsetY:_/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:_/2+v,offsetY:_/2+v,visible:m&&p.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:c/2,y:0,offsetY:_/2+v,visible:m&&p.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:c,y:0,offsetX:_/2-v,offsetY:_/2+v,visible:m&&p.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:d/2,offsetX:_/2+v,visible:m&&p.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:c,y:d/2,offsetX:_/2-v,visible:m&&p.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:d,offsetX:_/2+v,offsetY:_/2-v,visible:m&&p.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:c/2,y:d,offsetY:_/2-v,visible:m&&p.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:c,y:d,offsetX:_/2-v,offsetY:_/2-v,visible:m&&p.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:c/2,y:-this.rotateAnchorOffset()*x._sign(d)-v,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:c,height:d,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(o=this.getLayer())||void 0===o||o.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var o=this.findOne("."+this._movingAnchorName);o&&o.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),hi.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return G.prototype.toObject.call(this)}clone(o){return G.prototype.clone.call(this,o)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Oe.prototype.className="Transformer",Re(Oe),M.addGetterSetter(Oe,"enabledAnchors",Ot,function De(f){return f instanceof Array||x.warn("enabledAnchors value should be an array"),f instanceof Array&&f.forEach(function(o){-1===Ot.indexOf(o)&&x.warn("Unknown anchor name: "+o+". Available names are: "+Ot.join(", "))}),f||[]}),M.addGetterSetter(Oe,"flipEnabled",!0,Wt()),M.addGetterSetter(Oe,"resizeEnabled",!0),M.addGetterSetter(Oe,"anchorSize",10,V()),M.addGetterSetter(Oe,"rotateEnabled",!0),M.addGetterSetter(Oe,"rotationSnaps",[]),M.addGetterSetter(Oe,"rotateAnchorOffset",50,V()),M.addGetterSetter(Oe,"rotationSnapTolerance",5,V()),M.addGetterSetter(Oe,"borderEnabled",!0),M.addGetterSetter(Oe,"anchorStroke","rgb(0, 161, 255)"),M.addGetterSetter(Oe,"anchorStrokeWidth",1,V()),M.addGetterSetter(Oe,"anchorFill","white"),M.addGetterSetter(Oe,"anchorCornerRadius",0,V()),M.addGetterSetter(Oe,"borderStroke","rgb(0, 161, 255)"),M.addGetterSetter(Oe,"borderStrokeWidth",1,V()),M.addGetterSetter(Oe,"borderDash"),M.addGetterSetter(Oe,"keepRatio",!0),M.addGetterSetter(Oe,"centeredScaling",!1),M.addGetterSetter(Oe,"ignoreStroke",!1),M.addGetterSetter(Oe,"padding",0,V()),M.addGetterSetter(Oe,"node"),M.addGetterSetter(Oe,"nodes"),M.addGetterSetter(Oe,"boundBoxFunc"),M.addGetterSetter(Oe,"anchorDragBoundFunc"),M.addGetterSetter(Oe,"shouldOverdrawWholeArea",!1),M.addGetterSetter(Oe,"useSingleNodeRotation",!0),M.backCompat(Oe,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class tn extends B{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,Q.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}function Hr(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}tn.prototype.className="Wedge",tn.prototype._centroid=!0,tn.prototype._attrsAffectingSize=["radius"],Re(tn),M.addGetterSetter(tn,"radius",0,V()),M.addGetterSetter(tn,"angle",0,V()),M.addGetterSetter(tn,"clockwise",!1),M.backCompat(tn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var ol=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Ur=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Ji(f,o,l,c,d){var p=l-o,m=d-c;return 0===p?c+m/2:0===m?c:m*((f-o)/p)+c}function So(f,o,l){var c=4*(l*f.width+o),d=[];return d.push(f.data[c++],f.data[c++],f.data[c++],f.data[c++]),d}function vt(f,o){return Math.sqrt(Math.pow(f[0]-o[0],2)+Math.pow(f[1]-o[1],2)+Math.pow(f[2]-o[2],2))}M.addGetterSetter(G,"blurRadius",0,V(),M.afterSetFilter),M.addGetterSetter(G,"brightness",0,V(),M.afterSetFilter),M.addGetterSetter(G,"contrast",0,V(),M.afterSetFilter),M.addGetterSetter(G,"embossStrength",.5,V(),M.afterSetFilter),M.addGetterSetter(G,"embossWhiteLevel",.5,V(),M.afterSetFilter),M.addGetterSetter(G,"embossDirection","top-left",null,M.afterSetFilter),M.addGetterSetter(G,"embossBlend",!1,null,M.afterSetFilter),M.addGetterSetter(G,"enhance",0,V(),M.afterSetFilter),M.addGetterSetter(G,"hue",0,V(),M.afterSetFilter),M.addGetterSetter(G,"saturation",0,V(),M.afterSetFilter),M.addGetterSetter(G,"luminance",0,V(),M.afterSetFilter),M.addGetterSetter(G,"hue",0,V(),M.afterSetFilter),M.addGetterSetter(G,"saturation",0,V(),M.afterSetFilter),M.addGetterSetter(G,"value",0,V(),M.afterSetFilter),M.addGetterSetter(G,"kaleidoscopePower",2,V(),M.afterSetFilter),M.addGetterSetter(G,"kaleidoscopeAngle",0,V(),M.afterSetFilter),M.addGetterSetter(G,"threshold",0,V(),M.afterSetFilter),M.addGetterSetter(G,"noise",.2,V(),M.afterSetFilter),M.addGetterSetter(G,"pixelSize",8,V(),M.afterSetFilter),M.addGetterSetter(G,"levels",.5,V(),M.afterSetFilter),M.addGetterSetter(G,"red",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),M.addGetterSetter(G,"green",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),M.addGetterSetter(G,"blue",0,ti,M.afterSetFilter),M.addGetterSetter(G,"red",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),M.addGetterSetter(G,"green",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),M.addGetterSetter(G,"blue",0,ti,M.afterSetFilter),M.addGetterSetter(G,"alpha",1,function(f){return this._filterUpToDate=!1,f>1?1:f<0?0:f}),M.addGetterSetter(G,"threshold",.5,V(),M.afterSetFilter);const vp=Qa.Util._assign(Qa,{Arc:dn,Arrow:re,Circle:$n,Ellipse:Vn,Image:Xe,Label:Lr,Tag:lr,Line:hn,Path:Ve,Rect:fi,RegularPolygon:ur,Ring:en,Sprite:St,Star:Gn,Text:Ee,TextPath:je,Transformer:Oe,Wedge:tn,Filters:{Blur:function(o){var l=Math.round(this.blurRadius());l>0&&function wt(f,o){var p,m,v,_,C,w,E,I,A,b,O,P,z,j,H,$,ne,q,Y,te,ie,J,se,we,l=f.data,c=f.width,d=f.height,oe=o+o+1,be=c-1,Nt=d-1,Pe=o+1,ot=Pe*(Pe+1)/2,et=new Hr,qt=null,Ie=et,ee=null,Mt=null,pr=ol[o],qn=Ur[o];for(v=1;v<oe;v++)Ie=Ie.next=new Hr,v===Pe&&(qt=Ie);for(Ie.next=et,E=w=0,m=0;m<d;m++){for($=ne=q=Y=I=A=b=O=0,P=Pe*(te=l[w]),z=Pe*(ie=l[w+1]),j=Pe*(J=l[w+2]),H=Pe*(se=l[w+3]),I+=ot*te,A+=ot*ie,b+=ot*J,O+=ot*se,Ie=et,v=0;v<Pe;v++)Ie.r=te,Ie.g=ie,Ie.b=J,Ie.a=se,Ie=Ie.next;for(v=1;v<Pe;v++)I+=(Ie.r=te=l[_=w+((be<v?be:v)<<2)])*(we=Pe-v),A+=(Ie.g=ie=l[_+1])*we,b+=(Ie.b=J=l[_+2])*we,O+=(Ie.a=se=l[_+3])*we,$+=te,ne+=ie,q+=J,Y+=se,Ie=Ie.next;for(ee=et,Mt=qt,p=0;p<c;p++)l[w+3]=se=O*pr>>qn,0!==se?(l[w]=(I*pr>>qn)*(se=255/se),l[w+1]=(A*pr>>qn)*se,l[w+2]=(b*pr>>qn)*se):l[w]=l[w+1]=l[w+2]=0,I-=P,A-=z,b-=j,O-=H,P-=ee.r,z-=ee.g,j-=ee.b,H-=ee.a,_=E+((_=p+o+1)<be?_:be)<<2,I+=$+=ee.r=l[_],A+=ne+=ee.g=l[_+1],b+=q+=ee.b=l[_+2],O+=Y+=ee.a=l[_+3],ee=ee.next,P+=te=Mt.r,z+=ie=Mt.g,j+=J=Mt.b,H+=se=Mt.a,$-=te,ne-=ie,q-=J,Y-=se,Mt=Mt.next,w+=4;E+=c}for(p=0;p<c;p++){for(ne=q=Y=$=A=b=O=I=0,P=Pe*(te=l[w=p<<2]),z=Pe*(ie=l[w+1]),j=Pe*(J=l[w+2]),H=Pe*(se=l[w+3]),I+=ot*te,A+=ot*ie,b+=ot*J,O+=ot*se,Ie=et,v=0;v<Pe;v++)Ie.r=te,Ie.g=ie,Ie.b=J,Ie.a=se,Ie=Ie.next;for(C=c,v=1;v<=o;v++)I+=(Ie.r=te=l[w=C+p<<2])*(we=Pe-v),A+=(Ie.g=ie=l[w+1])*we,b+=(Ie.b=J=l[w+2])*we,O+=(Ie.a=se=l[w+3])*we,$+=te,ne+=ie,q+=J,Y+=se,Ie=Ie.next,v<Nt&&(C+=c);for(w=p,ee=et,Mt=qt,m=0;m<d;m++)l[3+(_=w<<2)]=se=O*pr>>qn,se>0?(l[_]=(I*pr>>qn)*(se=255/se),l[_+1]=(A*pr>>qn)*se,l[_+2]=(b*pr>>qn)*se):l[_]=l[_+1]=l[_+2]=0,I-=P,A-=z,b-=j,O-=H,P-=ee.r,z-=ee.g,j-=ee.b,H-=ee.a,_=p+((_=m+Pe)<Nt?_:Nt)*c<<2,I+=$+=ee.r=l[_],A+=ne+=ee.g=l[_+1],b+=q+=ee.b=l[_+2],O+=Y+=ee.a=l[_+3],ee=ee.next,P+=te=Mt.r,z+=ie=Mt.g,j+=J=Mt.b,H+=se=Mt.a,$-=te,ne-=ie,q-=J,Y-=se,Mt=Mt.next,w+=c}}(o,l)},Brighten:function(f){var d,o=255*this.brightness(),l=f.data,c=l.length;for(d=0;d<c;d+=4)l[d]+=o,l[d+1]+=o,l[d+2]+=o},Contrast:function(f){var v,o=Math.pow((this.contrast()+100)/100,2),l=f.data,c=l.length,d=150,p=150,m=150;for(v=0;v<c;v+=4)d=l[v],p=l[v+1],m=l[v+2],d/=255,d-=.5,d*=o,d+=.5,p/=255,p-=.5,p*=o,p+=.5,m/=255,m-=.5,m*=o,m+=.5,p=(p*=255)<0?0:p>255?255:p,m=(m*=255)<0?0:m>255?255:m,l[v]=d=(d*=255)<0?0:d>255?255:d,l[v+1]=p,l[v+2]=m},Emboss:function(f){var o=10*this.embossStrength(),l=255*this.embossWhiteLevel(),c=this.embossDirection(),d=this.embossBlend(),p=0,m=0,v=f.data,_=f.width,C=f.height,w=4*_,E=C;switch(c){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:x.error("Unknown emboss direction: "+c)}do{var I=(E-1)*w,A=p;E+A<1&&(A=0),E+A>C&&(A=0);var b=(E-1+A)*_*4,O=_;do{var P=I+4*(O-1),z=m;O+z<1&&(z=0),O+z>_&&(z=0);var j=b+4*(O-1+z),$=v[P+1]-v[j+1],ne=v[P+2]-v[j+2],q=v[P]-v[j],Y=q>0?q:-q;if(($>0?$:-$)>Y&&(q=$),(ne>0?ne:-ne)>Y&&(q=ne),q*=o,d){var J=v[P]+q,se=v[P+1]+q,we=v[P+2]+q;v[P]=J>255?255:J<0?0:J,v[P+1]=se>255?255:se<0?0:se,v[P+2]=we>255?255:we<0?0:we}else{var oe=l-q;oe<0?oe=0:oe>255&&(oe=255),v[P]=v[P+1]=v[P+2]=oe}}while(--O)}while(--E)},Enhance:function(f){var p,_,E,I,o=f.data,l=o.length,c=o[0],d=c,m=o[1],v=m,C=o[2],w=C,A=this.enhance();if(0!==A){for(I=0;I<l;I+=4)(p=o[I+0])<c?c=p:p>d&&(d=p),(_=o[I+1])<m?m=_:_>v&&(v=_),(E=o[I+2])<C?C=E:E>w&&(w=E);var b,O,P,z,j,H,$,ne,q;for(d===c&&(d=255,c=0),v===m&&(v=255,m=0),w===C&&(w=255,C=0),A>0?(O=d+A*(255-d),P=c-A*(c-0),j=v+A*(255-v),H=m-A*(m-0),ne=w+A*(255-w),q=C-A*(C-0)):(O=d+A*(d-(b=.5*(d+c))),P=c+A*(c-b),j=v+A*(v-(z=.5*(v+m))),H=m+A*(m-z),ne=w+A*(w-($=.5*(w+C))),q=C+A*(C-$)),I=0;I<l;I+=4)o[I+0]=Ji(o[I+0],c,d,P,O),o[I+1]=Ji(o[I+1],m,v,H,j),o[I+2]=Ji(o[I+2],C,w,q,ne)}},Grayscale:function(f){var c,d,o=f.data,l=o.length;for(c=0;c<l;c+=4)o[c]=d=.34*o[c]+.5*o[c+1]+.16*o[c+2],o[c+1]=d,o[c+2]=d},HSL:function(f){var v,H,$,ne,q,o=f.data,l=o.length,d=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,m=127*this.luminance(),_=1*d*Math.cos(p*Math.PI/180),C=1*d*Math.sin(p*Math.PI/180),w=.299+.701*_+.167*C,E=.587-.587*_+.33*C,I=.114-.114*_-.497*C,A=.299-.299*_-.328*C,b=.587+.413*_+.035*C,O=.114-.114*_+.293*C,P=.299-.3*_+1.25*C,z=.587-.586*_-1.05*C,j=.114+.886*_-.2*C;for(v=0;v<l;v+=4)q=o[v+3],o[v+0]=w*(H=o[v+0])+E*($=o[v+1])+I*(ne=o[v+2])+m,o[v+1]=A*H+b*$+O*ne+m,o[v+2]=P*H+z*$+j*ne+m,o[v+3]=q},HSV:function(f){var m,j,H,$,ne,o=f.data,l=o.length,c=Math.pow(2,this.value()),d=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,v=c*d*Math.cos(p*Math.PI/180),_=c*d*Math.sin(p*Math.PI/180),C=.299*c+.701*v+.167*_,w=.587*c-.587*v+.33*_,E=.114*c-.114*v-.497*_,I=.299*c-.299*v-.328*_,A=.587*c+.413*v+.035*_,b=.114*c-.114*v+.293*_,O=.299*c-.3*v+1.25*_,P=.587*c-.586*v-1.05*_,z=.114*c+.886*v-.2*_;for(m=0;m<l;m+=4)ne=o[m+3],o[m+0]=C*(j=o[m+0])+w*(H=o[m+1])+E*($=o[m+2]),o[m+1]=I*j+A*H+b*$,o[m+2]=O*j+P*H+z*$,o[m+3]=ne},Invert:function(f){var c,o=f.data,l=o.length;for(c=0;c<l;c+=4)o[c]=255-o[c],o[c+1]=255-o[c+1],o[c+2]=255-o[c+2]},Kaleidoscope:function(f){var c,d,p,m,_,C,w,E,I,o=f.width,l=f.height,A=Math.round(this.kaleidoscopePower()),b=Math.round(this.kaleidoscopeAngle()),O=Math.floor(o*(b%360)/360);if(!(A<1)){var P=x.createCanvasElement();P.width=o,P.height=l;var z=P.getContext("2d").getImageData(0,0,o,l);x.releaseCanvas(P),function(f,o,l){var C,w,E,P,c=f.data,d=o.data,p=f.width,m=f.height,v=l.polarCenterX||p/2,_=l.polarCenterY||m/2,I=0,A=0,b=0,O=0,z=Math.sqrt(v*v+_*_);w=p-v,E=m-_,z=(P=Math.sqrt(w*w+E*E))>z?P:z;var $,ne,Y,te,j=m,H=p,q=360/H*Math.PI/180;for(ne=0;ne<H;ne+=1)for(Y=Math.sin(ne*q),te=Math.cos(ne*q),$=0;$<j;$+=1)w=Math.floor(v+z*$/j*te),I=c[0+(C=4*((E=Math.floor(_+z*$/j*Y))*p+w))],A=c[C+1],b=c[C+2],O=c[C+3],d[0+(C=4*(ne+$*p))]=I,d[C+1]=A,d[C+2]=b,d[C+3]=O}(f,z,{polarCenterX:o/2,polarCenterY:l/2});for(var j=o/Math.pow(2,A);j<=8;)j*=2,A-=1;var H=j=Math.ceil(j),$=0,ne=H,q=1;for(O+j>o&&($=H,ne=0,q=-1),d=0;d<l;d+=1)for(c=$;c!==ne;c+=q)p=Math.round(c+O)%o,_=z.data[1+(E=4*(o*d+p))],C=z.data[E+2],w=z.data[E+3],z.data[0+(I=4*(o*d+c))]=z.data[E+0],z.data[I+1]=_,z.data[I+2]=C,z.data[I+3]=w;for(d=0;d<l;d+=1)for(H=Math.floor(j),m=0;m<A;m+=1){for(c=0;c<H+1;c+=1)_=z.data[1+(E=4*(o*d+c))],C=z.data[E+2],w=z.data[E+3],z.data[0+(I=4*(o*d+2*H-c-1))]=z.data[E+0],z.data[I+1]=_,z.data[I+2]=C,z.data[I+3]=w;H*=2}!function(f,o,l){var C,w,E,I,A,j,c=f.data,d=o.data,p=f.width,m=f.height,v=l.polarCenterX||p/2,_=l.polarCenterY||m/2,b=0,O=0,P=0,z=0,H=Math.sqrt(v*v+_*_);w=p-v,E=m-_,H=(j=Math.sqrt(w*w+E*E))>H?j:H;var q,Y,ie,$=m,ne=p,te=l.polarRotation||0;for(w=0;w<p;w+=1)for(E=0;E<m;E+=1)I=w-v,A=E-_,q=Math.sqrt(I*I+A*A)*$/H,Y=(Y=(180*Math.atan2(A,I)/Math.PI+360+te)%360)*ne/360,ie=Math.floor(Y),b=c[0+(C=4*(Math.floor(q)*p+ie))],O=c[C+1],P=c[C+2],z=c[C+3],d[0+(C=4*(E*p+w))]=b,d[C+1]=O,d[C+2]=P,d[C+3]=z}(z,f,{polarRotation:0})}},Mask:function(f){var l=function bo(f,o){var l=So(f,0,0),c=So(f,f.width-1,0),d=So(f,0,f.height-1),p=So(f,f.width-1,f.height-1),m=o||10;if(vt(l,c)<m&&vt(c,p)<m&&vt(p,d)<m&&vt(d,l)<m){for(var v=function nn(f){for(var o=[0,0,0],l=0;l<f.length;l++)o[0]+=f[l][0],o[1]+=f[l][1],o[2]+=f[l][2];return o[0]/=f.length,o[1]/=f.length,o[2]/=f.length,o}([c,l,p,d]),_=[],C=0;C<f.width*f.height;C++){var w=vt(v,[f.data[4*C],f.data[4*C+1],f.data[4*C+2]]);_[C]=w<m?0:255}return _}}(f,this.threshold());return l&&(l=function ns(f,o,l){for(var c=[1,1,1,1,0,1,1,1,1],d=Math.round(Math.sqrt(c.length)),p=Math.floor(d/2),m=[],v=0;v<l;v++)for(var _=0;_<o;_++){for(var C=v*o+_,w=0,E=0;E<d;E++)for(var I=0;I<d;I++){var A=v+E-p,b=_+I-p;A>=0&&A<l&&b>=0&&b<o&&(w+=f[A*o+b]*c[E*d+I])}m[C]=2040===w?255:0}return m}(l,f.width,f.height),l=function rn(f,o,l){for(var c=[1,1,1,1,1,1,1,1,1],d=Math.round(Math.sqrt(c.length)),p=Math.floor(d/2),m=[],v=0;v<l;v++)for(var _=0;_<o;_++){for(var C=v*o+_,w=0,E=0;E<d;E++)for(var I=0;I<d;I++){var A=v+E-p,b=_+I-p;A>=0&&A<l&&b>=0&&b<o&&(w+=f[A*o+b]*c[E*d+I])}m[C]=w>=1020?255:0}return m}(l,f.width,f.height),l=function yc(f,o,l){for(var c=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],d=Math.round(Math.sqrt(c.length)),p=Math.floor(d/2),m=[],v=0;v<l;v++)for(var _=0;_<o;_++){for(var C=v*o+_,w=0,E=0;E<d;E++)for(var I=0;I<d;I++){var A=v+E-p,b=_+I-p;A>=0&&A<l&&b>=0&&b<o&&(w+=f[A*o+b]*c[E*d+I])}m[C]=w}return m}(l,f.width,f.height),function yi(f,o){for(var l=0;l<f.width*f.height;l++)f.data[4*l+3]=o[l]}(f,l)),f},Noise:function(f){var p,o=255*this.noise(),l=f.data,c=l.length,d=o/2;for(p=0;p<c;p+=4)l[p+0]+=d-2*d*Math.random(),l[p+1]+=d-2*d*Math.random(),l[p+2]+=d-2*d*Math.random()},Pixelate:function(f){var d,p,m,v,_,C,w,A,b,O,P,z,j,H,o=Math.ceil(this.pixelSize()),l=f.width,c=f.height,E=Math.ceil(l/o),I=Math.ceil(c/o),$=f.data;if(o<=0)x.error("pixelSize value can not be <= 0");else for(z=0;z<E;z+=1)for(j=0;j<I;j+=1){for(v=0,_=0,C=0,w=0,b=(A=z*o)+o,P=(O=j*o)+o,H=0,d=A;d<b;d+=1)if(!(d>=l))for(p=O;p<P;p+=1)p>=c||(v+=$[0+(m=4*(l*p+d))],_+=$[m+1],C+=$[m+2],w+=$[m+3],H+=1);for(v/=H,_/=H,C/=H,w/=H,d=A;d<b;d+=1)if(!(d>=l))for(p=O;p<P;p+=1)p>=c||($[0+(m=4*(l*p+d))]=v,$[m+1]=_,$[m+2]=C,$[m+3]=w)}},Posterize:function(f){var p,o=Math.round(254*this.levels())+1,l=f.data,c=l.length,d=255/o;for(p=0;p<c;p+=1)l[p]=Math.floor(l[p]/d)*d},RGB:function(f){var m,v,o=f.data,l=o.length,c=this.red(),d=this.green(),p=this.blue();for(m=0;m<l;m+=4)o[m]=(v=(.34*o[m]+.5*o[m+1]+.16*o[m+2])/255)*c,o[m+1]=v*d,o[m+2]=v*p,o[m+3]=o[m+3]},RGBA:function(f){var v,_,o=f.data,l=o.length,c=this.red(),d=this.green(),p=this.blue(),m=this.alpha();for(v=0;v<l;v+=4)o[v]=c*m+o[v]*(_=1-m),o[v+1]=d*m+o[v+1]*_,o[v+2]=p*m+o[v+2]*_},Sepia:function(f){var c,d,p,m,o=f.data,l=o.length;for(c=0;c<l;c+=4)d=o[c+0],p=o[c+1],m=o[c+2],o[c+0]=Math.min(255,.393*d+.769*p+.189*m),o[c+1]=Math.min(255,.349*d+.686*p+.168*m),o[c+2]=Math.min(255,.272*d+.534*p+.131*m)},Solarize:function(f){var o=f.data,l=f.width,d=4*l,p=f.height;do{var m=(p-1)*d,v=l;do{var _=m+4*(v-1),C=o[_],w=o[_+1],E=o[_+2];C>127&&(C=255-C),w>127&&(w=255-w),E>127&&(E=255-E),o[_]=C,o[_+1]=w,o[_+2]=E}while(--v)}while(--p)},Threshold:function(f){var d,o=255*this.threshold(),l=f.data,c=l.length;for(d=0;d<c;d+=1)l[d]=l[d]<o?0:255}}})}},Aa=>{Aa(Aa.s=183)}]);